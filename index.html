<!-- Main waveedit demo. See use-case. -->
<!DOCTYPE html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Waev</title>

<link href="./main.css" rel="stylesheet"/>

<body>
  <div class="waev"
    :onmousedown.document="e=> (isMouseDown = true)"
    :onmouseup.document="e=> (isMouseDown = false)"
    >
    <div class="w-container" :onclick="handleCaret">
      <div class="w-loader wavefont"
        :if="loading"
        :with="{id:null, str:''}"
        :="if (loading) id=setInterval(()=>str+='.', 50); else clearInterval(id), str = '';"
        :text="str"
      >...</div>
      <!-- <file-attachment class="w-file" :if="!wavURL" directory :onfile-attachment-accepted="e=>console.log(e)">
        <input type="file" multiple />
      </file-attachment> -->
      <div contenteditable class="w-wavearea wavefont"
        :onkeydown.character.prevent
        :oninput="updateTimecodes"
        :onkeydown.enter="handleEnter"
        :onkeydown.backspace.prevent="handleDelete"
        :onkeydown.delete.prevent="handleDelete"
        :onkeydown.space.debounce-500="handleSpace"
        :ondragenter..ondragleave:ondragenter..ondrop="e=>(this.classList.add('dragover'),e=>this.classList.remove('dragover'))"
        :ondrop.prevent="handleDrop"
        :="this.style.setProperty('--linew', lineWidth), segments, requestAnimationFrame(updateTimecodes)"
      ><p class="w-segment" :each="segment, id1 in segments" :key="id1" :text="segment"></p></div>
    </div>

    <audio :disabled="!segments.length || loading" class="w-playback" controls :onplay..onpause="play" :onseeking="timeChange"></audio>
  </div>

  <script type="module" src="./dist/waev.js"></script>
</body>