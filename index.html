<!-- Main waveedit demo. See use-case. -->
<!DOCTYPE html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Waveplay</title>

<link href="./main.css" rel="stylesheet"/>

<body>
  <div class="waveplay">
    <div class="w-container">
      <div class="w-loader wavefont" :if="loading"
        :with="{id:null, str:''}"
        :="if (loading) id=setInterval(()=>str+='.', 50); else clearInterval(id), str = '';"
        :text="str"
      >...</div>
      <!-- <file-attachment class="w-file" :if="!wavURL" directory :onfile-attachment-accepted="e=>console.log(e)">
        <input type="file" multiple />
      </file-attachment> -->
      <div contenteditable class="w-wavearea wavefont"
        :onclick="handleCaret"
        :onkeydown="e=>console.log(e)||(![' ', 'Backspace', 'Enter', 'ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', 'Escape'].includes(e.key) && e.preventDefault(),handleKey(e))"
        :onchange:oninput="handleInput"
        :="this.style.setProperty('--linew', lineWidth)"
      ><p class="w-segment"
        :each="segment, id in segments"
        :text="segment"
        :length="Array.from({length: Math.ceil(segment.length / lineWidth)}, (_,i)=>timecode(i*lineWidth)).join('\n')"></p></div>
    </div>

    <audio :if="wavURL" class="w-playback" controls :src="wavURL" :onplay..onpause="play" :onseeking="timeChange"></audio>
  </div>

  <script type="module" src="./dist/waveplay.js"></script>
</body>