import{a as g}from"./chunk-ON5OQYWL.js";var F=g((I,A)=>{var M={pcm8:(r,n,p,i,f)=>{let o=new Uint8Array(r,n),a=0;for(let l=0;l<f;++l)for(let t=0;t<i;++t){let e=o[a++]-128;p[t][l]=e<0?e/128:e/127}},pcm16:(r,n,p,i,f)=>{let o=new Int16Array(r,n),a=0;for(let l=0;l<f;++l)for(let t=0;t<i;++t){let e=o[a++];p[t][l]=e<0?e/32768:e/32767}},pcm24:(r,n,p,i,f)=>{let o=new Uint8Array(r,n),a=0;for(let l=0;l<f;++l)for(let t=0;t<i;++t){let e=o[a++],m=o[a++],h=o[a++],c=e+(m<<8)+(h<<16),u=c>8388608?c-16777216:c;p[t][l]=u<0?u/8388608:u/8388607}},pcm32:(r,n,p,i,f)=>{let o=new Int32Array(r,n),a=0;for(let l=0;l<f;++l)for(let t=0;t<i;++t){let e=o[a++];p[t][l]=e<0?e/2147483648:e/2147483647}},pcm32f:(r,n,p,i,f)=>{let o=new Float32Array(r,n),a=0;for(let l=0;l<f;++l)for(let t=0;t<i;++t)p[t][l]=o[a++]},pcm64f:(r,n,p,i,f)=>{let o=new Float64Array(r,n),a=0;for(let l=0;l<f;++l)for(let t=0;t<i;++t)p[t][l]=o[a++]}},U={pcm8:(r,n,p,i,f)=>{let o=new Uint8Array(r,n),a=0;for(let l=0;l<f;++l)for(let t=0;t<i;++t){let e=Math.max(-1,Math.min(p[t][l],1));e=(e*.5+.5)*255|0,o[a++]=e}},pcm16:(r,n,p,i,f)=>{let o=new Int16Array(r,n),a=0;for(let l=0;l<f;++l)for(let t=0;t<i;++t){let e=Math.max(-1,Math.min(p[t][l],1));e=(e<0?e*32768:e*32767)|0,o[a++]=e}},pcm24:(r,n,p,i,f)=>{let o=new Uint8Array(r,n),a=0;for(let l=0;l<f;++l)for(let t=0;t<i;++t){let e=Math.max(-1,Math.min(p[t][l],1));e=(e<0?16777216+e*8388608:e*8388607)|0,o[a++]=e>>0&255,o[a++]=e>>8&255,o[a++]=e>>16&255}},pcm32:(r,n,p,i,f)=>{let o=new Int32Array(r,n),a=0;for(let l=0;l<f;++l)for(let t=0;t<i;++t){let e=Math.max(-1,Math.min(p[t][l],1));e=(e<0?e*2147483648:e*2147483647)|0,o[a++]=e}},pcm32f:(r,n,p,i,f)=>{let o=new Float32Array(r,n),a=0;for(let l=0;l<f;++l)for(let t=0;t<i;++t){let e=Math.max(-1,Math.min(p[t][l],1));o[a++]=e}},pcm64f:(r,n,p,i,f)=>{let o=new Float64Array(r,n),a=0;for(let l=0;l<f;++l)for(let t=0;t<i;++t){let e=Math.max(-1,Math.min(p[t][l],1));o[a++]=e}}};function y(r,n,p){let i="pcm"+n+(p?"f":""),f=r[i];if(!f)throw new TypeError("Unsupported data format: "+i);return f}function v(r){let n=0,p=0;r.buffer?(n=r.byteOffset,p=r.length,r=r.buffer):(n=0,p=r.byteLength);let i=new DataView(r);function f(){let e=i.getUint8(n);return n++,e}function o(){let e=i.getUint16(n,!0);return n+=2,e}function a(){let e=i.getUint32(n,!0);return n+=4,e}function l(e){let m="";for(let h=0;h<e;++h)m+=String.fromCharCode(f());return m}if(l(4)!=="RIFF")throw new TypeError("Invalid WAV file");if(a(),l(4)!=="WAVE")throw new TypeError("Invalid WAV file");let t;for(;n<p;){let e=l(4),m=a(),h=n+m;switch(e){case"fmt ":let c=o();if(c!==1&&c!==3)throw new TypeError("Unsupported format in WAV file: "+c.toString(16));t={format:"lpcm",floatingPoint:c===3,channels:o(),sampleRate:a(),byteRate:a(),blockSize:o(),bitDepth:o()};break;case"data":if(!t)throw new TypeError('Missing "fmt " chunk.');let u=Math.floor(m/t.blockSize),s=t.channels,w=t.sampleRate,x=[];for(let d=0;d<s;++d)x[d]=new Float32Array(u);return y(M,t.bitDepth,t.floatingPoint)(r,n,x,s,u),{sampleRate:w,channelData:x};break}n=h}}function b(r,n){let p=n.sampleRate||16e3,i=!!(n.float||n.floatingPoint),f=i?32:n.bitDepth|0||16,o=r.length,a=r[0].length,l=new ArrayBuffer(44+a*o*(f>>3)),t=new DataView(l),e=0;function m(s){t.setUint8(e++,s)}function h(s){t.setUint16(e,s,!0),e+=2}function c(s){t.setUint32(e,s,!0),e+=4}function u(s){for(var w=0;w<s.length;++w)m(s.charCodeAt(w))}return u("RIFF"),c(l.byteLength-8),u("WAVE"),u("fmt "),c(16),h(i?3:1),h(o),c(p),c(p*o*(f>>3)),h(o*(f>>3)),h(f),u("data"),c(l.byteLength-44),y(U,f,i)(l,e,r,o,a),Buffer(l)}A.exports={decode:v,encode:b}});export default F();
//# sourceMappingURL=node-wav-Z2YOVIIS.js.map
