import{f as K}from"./chunk-ZZPGCUWV.js";import{b as Ae}from"./chunk-A576P2ZR.js";var N,m,$,F,j;function ee(e){N=e.signal,m=e.effect,j=e.computed,F=e.batch||(r=>r()),$=e.untracked||F}var T=Symbol("signals"),L=Symbol("length");function x(e,r){if(!e||e[T])return e;if(Array.isArray(e))return Ce(e);if(e.constructor!==Object)return e;let t={...r?.[T]},n=N(Object.values(e).length),s=new Proxy(t,{get:(a,o)=>o===L?n:o===T?t:t[o]?.valueOf(),set:(a,o,l,f)=>(f=t[o],V(t,o,l),f??++n.value,1),deleteProperty:(a,o)=>(t[o]&&(te(t,o),n.value--),1),ownKeys(){return n.value,Reflect.ownKeys(t)}});for(let a in e){let o=Object.getOwnPropertyDescriptor(e,a);o?.get?(t[a]=j(o.get.bind(s)))._set=o.set?.bind(s):(t[a]=void 0,V(t,a,e[a]))}return s}var Oe={push:1,pop:1,shift:1,unshift:1,splice:1};function Ce(e){let r;if(e[T])return e;let t=N(e.length),n=Array(e.length).fill(),s=new Proxy(n,{get(a,o){if(typeof o=="symbol")return o===L?t:o===T?n:n[o];if(o==="length")return Oe[r]?t.peek():t.value;if(r=o,n[o])return n[o].valueOf();if(o<n.length)return(n[o]=N(x(e[o]))).value},set(a,o,l){if(o==="length"){for(let f=l,p=n.length;f<p;f++)delete s[f];return t.value=n.length=l,!0}return V(n,o,l),o>=t.peek()&&(t.value=n.length=Number(o)+1),!0},deleteProperty:(a,o)=>(n[o]&&te(n,o),1)});return s}function V(e,r,t){let n=e[r];if(r[0]==="_")e[r]=t;else if(!n)e[r]=n=t?.peek?t:N(x(t));else if(t!==n.peek())if(n._set)n._set(t);else if(Array.isArray(t)&&Array.isArray(n.peek())){let s=n.peek();s[L]?$(()=>{F(()=>{let a=0,o=t.length;for(;a<o;a++)s[a]=t[a];s.length=o})}):n.value=t}else n.value=x(t)}function te(e,r){let t=e[r],n=t[Symbol.dispose];n&&delete t[Symbol.dispose],delete e[r],n?.()}var re=Symbol.dispose||=Symbol("dispose"),d={},E=new WeakMap;function y(e,r){if(!e?.children)return;if(E.has(e))return Object.assign(E.get(e),r);let t=x(r||{}),n=[];return s(e),E.has(e)||E.set(e,t),e[re]=()=>{for(;n.length;)n.pop()();E.delete(e)},t;function s(a,o=a.parentNode){if(a.attributes)for(let l=0;l<a.attributes.length;){let f=a.attributes[l];if(f.name[0]===":"){a.removeAttribute(f.name);let p=f.name.slice(1).split(":");for(let g of p){let u=d[g]||d.default,c=(u.parse||oe)(f.value,oe),v=u(a,c,t,g);v&&n.push(v)}if(E.has(a))return n.push(a[re]);if(a.parentNode!==o)return}else l++}for(let l of[...a.children])s(l,a)}}var ne={},oe=(e,r,t)=>{if(t=ne[e=e.trim()])return t;try{t=se(e)}catch(n){X(n,r,e)}return ne[e]=t},X=(e,r,t="")=>{throw Object.assign(e,{message:`\u2234 ${e.message}

${r}${t?`="${t}"

`:""}`,expr:t})},se;y.use=e=>{e.signal&&ee(e),e.compile&&(se=e.compile)};var Z={};Ae(Z,{batch:()=>Se,computed:()=>xe,effect:()=>ie,signal:()=>ae,untracked:()=>Te});var _,R,ae=(e,r,t=new Set)=>(r={get value(){return _?.deps.push(t.add(_)),e},set value(n){if(n!==e){e=n;for(let s of t)R?R.add(s):s()}},peek(){return e}},r.toJSON=r.then=r.toString=r.valueOf=()=>r.value,r),ie=(e,r,t,n)=>(t=s=>{r?.call?.(),s=_,_=t;try{r=e()}finally{_=s}},n=t.deps=[],t(),s=>{for(r?.call?.();s=n.pop();)s.delete(t)}),xe=(e,r=ae(),t,n)=>(t={get value(){return n||=ie(()=>r.value=e()),r.value},peek:r.peek},t.toJSON=t.then=t.toString=t.valueOf=()=>t.value,t),Se=e=>{let r=R;r||(R=new Set);try{e()}finally{if(!r){r=R,R=null;for(let t of r)t()}}},Te=(e,r,t)=>(r=_,_=null,t=e(),_=r,t);var q=Symbol(":each");d.each=(e,[r,t,n],s)=>{let a=e[q]=document.createTextNode("");e.replaceWith(a);let o,l,f=0,p=j(()=>{l=null;let c=n(s);return typeof c=="number"&&(c=Array.from({length:c},(v,C)=>C+1)),c?.constructor===Object&&(l=Object.keys(c),c=Object.values(c)),c||[]}),g=()=>{$(()=>{let c=0,v=p.value,C=v.length;if(o&&!o[L]){for(let A of o[T]||[])A[Symbol.dispose]();o=null,f=0}if(C<f)o.length=C;else{if(!o)o=v;else for(;c<f;c++)o[c]=v[c];for(;c<C;c++){o[c]=v[c];let A=c,J=x({[r]:o[T]?.[A]||o[A],[t]:l?l[A]:A},s),D=(e.content||e).cloneNode(!0),P=e.content?{children:[...D.children],remove(){this.children.map(W=>W.remove())}}:D;a.before(D),y(P,J),((o[T]||=[])[c]||={})[Symbol.dispose]=()=>{P[Symbol.dispose](),P.remove()}}}f=C})},u=0;return m(()=>{p.value[L]?.value,u?u++:(g(),queueMicrotask(()=>(u&&g(),u=0)))})};d.each.parse=(e,r)=>{let[t,n]=e.split(/\s+in\s+/),[s,a="$"]=t.split(/\s*,\s*/);return[s,a,r(n)]};var le=Symbol("if");d.if=(e,r,t)=>{let n=e.parentNode,s=e.nextElementSibling,a=document.createTextNode(""),o,l,f,p=[];return e.after(a),e.content?(o=p,e.remove(),l=[...e.content.childNodes]):l=o=[e],s?.hasAttribute(":else")?(s.removeAttribute(":else"),s.hasAttribute(":if")?f=p:(s.remove(),f=s.content?[...s.content.childNodes]:[s])):f=p,m(()=>{let g=r(t)?l:e[le]?p:f;if(s&&(s[le]=g===l),o!=g){o[0]?.[q]&&(o=[o[0][q]]);for(let u of o)u.remove();o=g;for(let u of o)n.insertBefore(u,a),y(u,t)}})};d.default=(e,r,t,n)=>{if(!n.startsWith("on"))return m(()=>{let u=r(t);if(n)Q(e,n,S(u,t));else for(let c in u)Q(e,Le(c),S(u[c],t))});let s=n.split("..").map(u=>{let c={evt:"",target:e,test:()=>!0};return c.evt=(u.startsWith("on")?u.slice(2):u).replace(/\.(\w+)?-?([-\w]+)?/g,(v,C,A="")=>(c.test=_e[C]?.(c,...A.split("-"))||c.test,"")),c});if(s.length==1)return m(()=>g(r(t),s[0]));let a,o,l,f=0,p=u=>{l=g(c=>(l(),o=u?.(c),(f=++f%s.length)?p(o):a&&p(a)),s[f])};return m(()=>(a=r(t),!l&&p(a),()=>a=null));function g(u,{evt:c,target:v,test:C,defer:A,stop:J,prevent:D,immediate:P,...W}){A&&(u=A(u));let z=M=>{try{C(M)&&(J&&(P?M.stopImmediatePropagation():M.stopPropagation()),D&&M.preventDefault(),u?.(M))}catch(be){X(be,`:on${c}`,u)}};return v.addEventListener(c,z,W),()=>v.removeEventListener(c,z,W)}};var _e={prevent(e){e.prevent=!0},stop(e){e.stop=!0},immediate(e){e.immediate=!0},once(e){e.once=!0},passive(e){e.passive=!0},capture(e){e.capture=!0},window(e){e.target=window},document(e){e.target=document},throttle(e,r){e.defer=t=>ke(t,r?Number(r)||0:108)},debounce(e,r){e.defer=t=>Ne(t,r?Number(r)||0:108)},outside:e=>r=>{let t=e.target;return!(t.contains(r.target)||r.target.isConnected===!1||t.offsetWidth<1&&t.offsetHeight<1)},self:e=>r=>r.target===e.target,ctrl:(e,...r)=>t=>h.ctrl(t)&&r.every(n=>h[n]?h[n](t):t.key===n),shift:(e,...r)=>t=>h.shift(t)&&r.every(n=>h[n]?h[n](t):t.key===n),alt:(e,...r)=>t=>h.alt(t)&&r.every(n=>h[n]?h[n](t):t.key===n),meta:(e,...r)=>t=>h.meta(t)&&r.every(n=>h[n]?h[n](t):t.key===n),arrow:()=>h.arrow,enter:()=>h.enter,esc:()=>h.esc,tab:()=>h.tab,space:()=>h.space,delete:()=>h.delete,digit:()=>h.digit,letter:()=>h.letter,char:()=>h.char},h={ctrl:e=>e.ctrlKey||e.key==="Control"||e.key==="Ctrl",shift:e=>e.shiftKey||e.key==="Shift",alt:e=>e.altKey||e.key==="Alt",meta:e=>e.metaKey||e.key==="Meta"||e.key==="Command",arrow:e=>e.key.startsWith("Arrow"),enter:e=>e.key==="Enter",esc:e=>e.key.startsWith("Esc"),tab:e=>e.key==="Tab",space:e=>e.key==="\xA0"||e.key==="Space"||e.key===" ",delete:e=>e.key==="Delete"||e.key==="Backspace",digit:e=>/^\d$/.test(e.key),letter:e=>/^\p{L}$/gu.test(e.key),char:e=>/^\S$/.test(e.key)},Q=(e,r,t)=>{t==null||t===!1?e.removeAttribute(r):e.setAttribute(r,t===!0?"":typeof t=="number"||typeof t=="string"?t:"")},ke=(e,r)=>{let t,n,s=a=>{t=!0,setTimeout(()=>{if(t=!1,n)return n=!1,s(a),e(a)},r)};return a=>t?n=!0:(s(a),e(a))},Ne=(e,r)=>{let t;return n=>{clearTimeout(t),t=setTimeout(()=>{t=null,e(n)},r)}},Le=e=>e.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,r=>"-"+r.toLowerCase()),S=(e,r)=>e?.replace?e.replace(/\$<([^>]+)>/g,(t,n)=>r[n]??""):e;d.ref=(e,r,t)=>{t[S(r,t)]=e};d.ref.parse=e=>e;d.with=(e,r,t)=>{let n;return m(()=>{let s=r(t);y(e,n?s:n=x(s,t))})};d.html=(e,r,t)=>{let n=r(t);if(!n)return;let s=(n.content||n).cloneNode(!0);e.replaceChildren(s),y(e,t)};d.text=(e,r,t)=>(e.content&&e.replaceWith(e=document.createTextNode("")),m(()=>{let n=r(t);e.textContent=n??""}));d.class=(e,r,t)=>{let n=new Set;return m(()=>{let s=r(t),a=new Set;s&&(typeof s=="string"?S(s,t).split(" ").map(o=>a.add(o)):Array.isArray(s)?s.map(o=>(o=S(o,t))&&a.add(o)):Object.entries(s).map(([o,l])=>l&&a.add(o)));for(let o of n)a.has(o)?a.delete(o):e.classList.remove(o);for(let o of n=a)e.classList.add(o)})};d.style=(e,r,t)=>{let n=e.getAttribute("style")||"";return n.endsWith(";")||(n+="; "),m(()=>{let s=r(t);if(typeof s=="string")e.setAttribute("style",n+S(s,t));else{e.setAttribute("style",n);for(let a in s)e.style.setProperty(a,S(s[a],t))}})};d.value=(e,r,t)=>{let n,s,a=e.type==="text"||e.type===""?o=>e.setAttribute("value",e.value=o??""):e.tagName==="TEXTAREA"||e.type==="text"||e.type===""?o=>(n=e.selectionStart,s=e.selectionEnd,e.setAttribute("value",e.value=o??""),n&&e.setSelectionRange(n,s)):e.type==="checkbox"?o=>(e.checked=o,Q(e,"checked",o)):e.type==="select-one"?o=>{for(let l in e.options)l.removeAttribute("selected");e.value=o,e.selectedOptions[0]?.setAttribute("selected","")}:o=>e.value=o;return m(()=>a(r(t)))};d.fx=(e,r,t)=>m(()=>r(t));y.use(Z);y.use({compile:e=>y.constructor("__scope",`with (__scope) { return ${e} };`)});var ce=y;function G(e,r){if(!r)return e.play(),()=>e.pause();r.start||=0,e.currentTime=r.start;let t=()=>{if(e.readyState===0)return;let l=e.preload==="auto";l&&(e.preload="none"),e.currentTime<0&&(e.currentTime=0),e.currentTime>r.end&&(e.currentTime=r.end),l&&(e.preload="auto")},n,s=()=>{if(clearInterval(n),e.currentTime>=r.end){if(e.loop){e.currentTime=r.start;return}e.pause(),e.dispatchEvent(new Event("ended"));return}e.currentTime+.2>r.end&&(n=setInterval(s,10))},a=()=>{e.currentTime>=r.end&&(e.currentTime=r.start)};e.addEventListener("durationchange",t),e.addEventListener("seeking",t),e.addEventListener("timeupdate",s);let o=setInterval(s,50);return e.addEventListener("playing",a),e.play(),()=>{e.removeEventListener("durationchange",t),e.removeEventListener("seeking",t),e.removeEventListener("timeupdate",s),e.removeEventListener("playing",a),clearInterval(o),clearInterval(n),e.pause()}}var I=new Audio("data:audio/wav;base64,UklGRmgAAABXQVZFZm10IBAAAAABAAEAgLsAAAB3AQACABAAZGF0YQIAAABpNUxJU1Q6AAAASU5GT0lTRlQUAAAAcHJvYmUuYXVkaW90b29sLmNvbQBJQ1JEEQAAADIwMjMtMDMtMDIgMDctNDQAAA==");I.preload="metadata";I.load();I.volume=0;async function fe(){return new Promise(e=>{I.play();let r;I.onplaying=()=>r=performance.now(),I.onended=()=>{e(performance.now()-r)}})}var k={get(){let e=window.getSelection();if(!e.anchorNode||!e.anchorNode.parentNode.closest(".w-editarea"))return;let r=Y(e.anchorNode,e.anchorOffset),t=Y(e.focusNode,e.focusOffset),n=e.anchorNode.parentNode.closest(".w-segment"),s=e.anchorOffset,a=e.focusNode.parentNode.closest(".w-segment"),o=e.focusOffset;return r>t&&([t,a,o,r,n,s]=[r,n,s,t,a,o]),{start:r,startNode:n,startNodeOffset:s,end:t,endNode:a,endNodeOffset:o,collapsed:e.isCollapsed,range:e.getRangeAt(0)}},set(e,r){let t=window.getSelection();Array.isArray(e)&&(e=Y(...e)),Array.isArray(r)&&(r=Y(...r)),e=Math.max(0,e),r==null&&(r=e);let n=document.querySelector(".w-editarea"),[s,a]=ue(n,e),[o,l]=ue(n,r),f=t.getRangeAt(0);if(!(f.startContainer===s.firstChild&&f.startOffset===a)&&!(f.endContainer===o.firstChild&&f.endOffset===l)){t.removeAllRanges();let p=new Range;p.setStart(s.firstChild,a),p.setEnd(o.firstChild,l),t.addRange(p)}return{start:e,startNode:s,end:r,endNode:o,startNodeOffset:a,endNodeOffset:l,collapsed:t.isCollapsed,range:t.getRangeAt(0)}}};function Y(e,r){let t=e.parentNode.closest(".w-segment"),n=U(t.textContent.slice(0,r)).length;for(;t=t.previousSibling;)n+=U(t.textContent).length;return n}function ue(e,r){let t=e.firstChild,n;for(;r>(n=U(t.textContent).length);)r-=n,t=t.nextSibling;let s=0;for(let a=t.textContent,o=0;o<r;o++)for(;a[o+s]>="\u0300";)s++;return[t,r+s]}function U(e){return e.replace(/\u0300|\u0301/g,"")}history.scrollRestoration="manual";var b=document.querySelector(".wavearea"),O=b.querySelector(".w-editarea"),de=b.querySelector(".w-timecodes"),Ee=b.querySelector(".w-play"),Re=b.querySelector(".w-waveform"),me=b.querySelector(".w-caret-line"),w=new Audio,pe=new Worker("./dist/worker.js",{type:"module"}),he=new AudioContext,i=ce(b,{raf:e=>window.requestAnimationFrame(e),loading:!1,recording:!1,playing:!1,selecting:!1,isMouseDown:!1,scrolling:!1,clipStart:0,loop:!1,clipEnd:null,_startTime:0,_startTimeOffset:0,volume:1,latency:0,segments:[],total:0,duration:0,caretOffscreen:0,caretOffset:0,caretY:Re.getBoundingClientRect().top,caretX:0,cols:216,async handleCaret(){let e=k.get();!e||e.start===i.caretOffset&&e.collapsed||(i.caretOffset=e.start,i.updateCaretLine(e),i.clipStart=i.caretOffset,i.playing?(i._startTime=(performance.now()+i.latency)*.001,i._startTimeOffset=i.caretOffset):(i.clipEnd=e.collapsed?i.total:e.end,i.loop=w.loop=!e.collapsed),w.currentTime=i.duration*i.caretOffset/i.total)},async handleBeforeInput(e){let r=Ie[e.inputType];r?r.call(this,e):(e.preventDefault(),e.stopPropagation(),e.data===". "&&k.set(i.caretOffset))},async handleDrop(e){let t=e.dataTransfer.files[0];if(!t.type.startsWith("audio"))return!1;i.loading=!0,i.segments=[];let n=await K(t),s=await decodeAudio(n),a=await encodeAudio(s),o=new Blob([a],{type:"audio/wav"}),l=URL.createObjectURL(o);return await applyOp(["src",l]),i.loading=!1,n},async handleFile(e){i.loading="Decoding";let r=e.target.files[0],t=await K(r),n=await he.decodeAudioData(t),s=Array.from({length:n.numberOfChannels},a=>n.getChannelData(a));await ye(["file",{name:r.name,numberOfChannels:n.numberOfChannels,sampleRate:n.sampleRate,length:n.length,channelData:s}]),i.loading=!1},scrollIntoCaret(){i.caretOffscreen&&!i.scrolling&&(me.scrollIntoView({behavior:"smooth",block:"center"}),i.scrolling=!0,setTimeout(()=>i.scrolling=!1,108))},play(e){i.playing=!0,i.scrolling=!1,O.focus(),i.caretOffset===i.total&&k.set(i.caretOffset=i.clipStart=0),i.scrollIntoCaret();let{clipStart:r,clipEnd:t,loop:n}=i,s=()=>Ee.click(),a;i._startTime,i._startTimeOffset=i.caretOffset;let o=async()=>{await new Promise(u=>setTimeout(u,i.latency)),i._startTime=performance.now()*.001,clearInterval(a),a=setInterval(p,10.8)},l=O.getBoundingClientRect().top,f=()=>{if(i.scrolling)return;let u=O.getBoundingClientRect().top;u!==l?(i.scrolling=!0,setTimeout(()=>(i.scrolling=!1,f()),1080)):i.scrolling=!1,l=u},p=()=>{if(f(),i.selecting)return;let u=performance.now()*.001-i._startTime,c=Math.min(i._startTimeOffset+Math.round(i.total*u/i.duration),i.total);n&&(c=Math.min(c,t));let v=k.set(i.caretOffset=c);i.updateCaretLine(v),i.scrollIntoCaret()};w.addEventListener("play",o,{once:!0}),i.loop&&w.addEventListener("seeked",o);let g=G(w,i.loop&&{start:i.duration*i.clipStart/i.total,end:i.duration*i.clipEnd/i.total});return w.addEventListener("ended",s),()=>{w.removeEventListener("seeked",o),w.removeEventListener("ended",s),clearInterval(a),g(),i.playing=!1,i.scrolling=!1,i.loop?k.set(r,t):w.currentTime>=w.duration&&k.set(i.total),O.focus()}},async goto(e){try{await H(e)}catch{await ve()}k.set(i.caretOffset)},updateCaretLine(e){let r=e.range.getClientRects(),t=r[r.length-1];i.caretX=t.right,i.caretY=t.top},updateTimecodes(){if(de.replaceChildren(),!O.textContent)return;let e=0;for(let r of O.children){let t=new Range;t.selectNodeContents(O);let n=Math.round(t.getBoundingClientRect().height/t.getClientRects()[1].height);for(let s=0;s<n;s++){let a=document.createElement("a"),o=this.timecode(s*(i.cols||0)+e);a.href=`#${o}`,a.textContent=o,de.appendChild(a)}e+=r.textContent.length}},timecode(e,r=0){let t=e/i?.total*i?.duration||0;return`${Math.floor(t/60).toFixed(0)}:${(Math.floor(t)%60).toFixed(0).padStart(2,0)}${r?`.${(t%1).toFixed(r).slice(2).padStart(r)}`:""}`}}),Ie={insertFromDrop(e){console.log("insert from drop",e)},async deleteContentBackward(e){let r=e.getTargetRanges()[0],t=r.startContainer.parentNode.closest(".w-segment"),n=r.endContainer.parentNode.closest(".w-segment"),s=Number(t.dataset.id),a=Number(n.dataset.id),o=r.startOffset+i.segments.slice(0,s).reduce((p,g)=>p+g.length,0),l=r.endOffset+i.segments.slice(0,a).reduce((p,g)=>p+g.length,0);this._deleteTimeout?(clearTimeout(this._deleteTimeout),this._deleteOp[1]--):this._deleteOp=["del",o,l];let f=()=>{ye(this._deleteOp),this._deleteOp=this._deleteTimeout=null};this._deleteTimeout=setTimeout(f,280)}},B=async()=>{b.removeEventListener("touchstart",B),b.removeEventListener("mousedown",B),b.removeEventListener("keydown",B),i.latency=await fe()};b.addEventListener("touchstart",B);b.addEventListener("mousedown",B);b.addEventListener("keydown",B);var Be=new IntersectionObserver(([e])=>{i.caretOffscreen=e.isIntersecting?0:e.intersectionRect.top<=e.rootBounds.top?1:e.intersectionRect.bottom>=e.rootBounds.bottom?-1:0},{threshold:.999,rootMargin:"0px"});Be.observe(me);var De=new ResizeObserver(e=>{i.cols=ge(),i.updateTimecodes()});De.observe(O);function ge(){let e=new Range,r=O.firstChild.firstChild;if(!r?.textContent)return;let t=r.textContent;e.setStart(r,0),e.setEnd(r,1);let n=e.getClientRects()[0].y;for(var s=0,a=0;s<t.length;a++){let o=1;for(;t[s+o]>="\u0300";)o++;e.setStart(r,0),e.setEnd(r,s=s+o);let l=e.getClientRects();if(l[l.length-1].y>n)return a}return t.length}async function ye(...e){let r=new URL(location);for(let n of e){let[s,...a]=n;a[0].name?r.searchParams.set(s,a[0].name):r.searchParams.has(s)?r.searchParams.set(s,`${r.searchParams.get(s)}..${a.join("-")}`):r.searchParams.append(s,a.join("-"))}i.loading="Processing";let t=await we(...e);return history.pushState(t,"",decodeURI(r)),i.loading=!1,O.textContent&&console.assert(t.segments.join("")===O.textContent,"Rendered waveform is different from UI"),H(t)}function we(...e){return new Promise(r=>{pe.postMessage({id:history.state?.id||0,ops:e}),pe.addEventListener("message",t=>{r(t.data)},{once:!0})})}function H({url:e,segments:r,duration:t,offsets:n}){return i.total=r.reduce((s,a)=>s+=U(a).length,0),i.duration=t,i.segments=r,i.cols||(i.cols=ge()),i.updateTimecodes(),w.src=e,w.preload="metadata",new Promise((s,a)=>{w.addEventListener("error",a),w.addEventListener("loadedmetadata",()=>{w.currentTime=t*i.caretOffset/i.total||0},{once:!0})})}async function ve(e=new URL(location)){i.loading=" ";let r=[];for(let[n,s]of e.searchParams)r.push(...s.split("..").map(a=>[n,...n==="src"||n==="file"?[a]:a.split("-")]));if(r[0][0]==="src"){let[,n]=r.shift(),a=await(await fetch(n,{cache:"force-cache"})).arrayBuffer();i.loading="Decoding";let o=await he.decodeAudioData(a),l=Array.from({length:o.numberOfChannels},f=>o.getChannelData(f));r.push(["file",{name:n,numberOfChannels:o.numberOfChannels,sampleRate:o.sampleRate,length:o.length,channelData:l}])}let t=await we(...r);history.replaceState(t,"",decodeURI(e)),H(t),i.loading=!1}location.search.length&&ve();
//# sourceMappingURL=wavearea.js.map
