var v=Object.create;var y=Object.defineProperty;var U=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty;var R=(r,l)=>()=>(l||r((l={exports:{}}).exports,l),l.exports);var E=(r,l,a,f)=>{if(l&&typeof l=="object"||typeof l=="function")for(let o of b(l))!I.call(r,o)&&o!==a&&y(r,o,{get:()=>l[o],enumerable:!(f=U(l,o))||f.enumerable});return r};var V=(r,l,a)=>(a=r!=null?v(F(r)):{},E(l||!r||!r.__esModule?y(a,"default",{value:r,enumerable:!0}):a,r));var M=R((z,g)=>{"use strict";var k={pcm8:(r,l,a,f,o)=>{let i=new Uint8Array(r,l),p=0;for(let n=0;n<o;++n)for(let t=0;t<f;++t){let e=i[p++]-128;a[t][n]=e<0?e/128:e/127}},pcm16:(r,l,a,f,o)=>{let i=new Int16Array(r,l),p=0;for(let n=0;n<o;++n)for(let t=0;t<f;++t){let e=i[p++];a[t][n]=e<0?e/32768:e/32767}},pcm24:(r,l,a,f,o)=>{let i=new Uint8Array(r,l),p=0;for(let n=0;n<o;++n)for(let t=0;t<f;++t){let e=i[p++],m=i[p++],h=i[p++],c=e+(m<<8)+(h<<16),u=c>8388608?c-16777216:c;a[t][n]=u<0?u/8388608:u/8388607}},pcm32:(r,l,a,f,o)=>{let i=new Int32Array(r,l),p=0;for(let n=0;n<o;++n)for(let t=0;t<f;++t){let e=i[p++];a[t][n]=e<0?e/2147483648:e/2147483647}},pcm32f:(r,l,a,f,o)=>{let i=new Float32Array(r,l),p=0;for(let n=0;n<o;++n)for(let t=0;t<f;++t)a[t][n]=i[p++]},pcm64f:(r,l,a,f,o)=>{let i=new Float64Array(r,l),p=0;for(let n=0;n<o;++n)for(let t=0;t<f;++t)a[t][n]=i[p++]}},D={pcm8:(r,l,a,f,o)=>{let i=new Uint8Array(r,l),p=0;for(let n=0;n<o;++n)for(let t=0;t<f;++t){let e=Math.max(-1,Math.min(a[t][n],1));e=(e*.5+.5)*255|0,i[p++]=e}},pcm16:(r,l,a,f,o)=>{let i=new Int16Array(r,l),p=0;for(let n=0;n<o;++n)for(let t=0;t<f;++t){let e=Math.max(-1,Math.min(a[t][n],1));e=(e<0?e*32768:e*32767)|0,i[p++]=e}},pcm24:(r,l,a,f,o)=>{let i=new Uint8Array(r,l),p=0;for(let n=0;n<o;++n)for(let t=0;t<f;++t){let e=Math.max(-1,Math.min(a[t][n],1));e=(e<0?16777216+e*8388608:e*8388607)|0,i[p++]=e>>0&255,i[p++]=e>>8&255,i[p++]=e>>16&255}},pcm32:(r,l,a,f,o)=>{let i=new Int32Array(r,l),p=0;for(let n=0;n<o;++n)for(let t=0;t<f;++t){let e=Math.max(-1,Math.min(a[t][n],1));e=(e<0?e*2147483648:e*2147483647)|0,i[p++]=e}},pcm32f:(r,l,a,f,o)=>{let i=new Float32Array(r,l),p=0;for(let n=0;n<o;++n)for(let t=0;t<f;++t){let e=Math.max(-1,Math.min(a[t][n],1));i[p++]=e}},pcm64f:(r,l,a,f,o)=>{let i=new Float64Array(r,l),p=0;for(let n=0;n<o;++n)for(let t=0;t<f;++t){let e=Math.max(-1,Math.min(a[t][n],1));i[p++]=e}}};function A(r,l,a){let f="pcm"+l+(a?"f":""),o=r[f];if(!o)throw new TypeError("Unsupported data format: "+f);return o}function T(r){let l=0,a=0;r.buffer?(l=r.byteOffset,a=r.length,r=r.buffer):(l=0,a=r.byteLength);let f=new DataView(r);function o(){let e=f.getUint8(l);return l++,e}function i(){let e=f.getUint16(l,!0);return l+=2,e}function p(){let e=f.getUint32(l,!0);return l+=4,e}function n(e){let m="";for(let h=0;h<e;++h)m+=String.fromCharCode(o());return m}if(n(4)!=="RIFF")throw new TypeError("Invalid WAV file");if(p(),n(4)!=="WAVE")throw new TypeError("Invalid WAV file");let t;for(;l<a;){let e=n(4),m=p(),h=l+m;switch(e){case"fmt ":let c=i();if(c!==1&&c!==3)throw new TypeError("Unsupported format in WAV file: "+c.toString(16));t={format:"lpcm",floatingPoint:c===3,channels:i(),sampleRate:p(),byteRate:p(),blockSize:i(),bitDepth:i()};break;case"data":if(!t)throw new TypeError('Missing "fmt " chunk.');let u=Math.floor(m/t.blockSize),s=t.channels,w=t.sampleRate,x=[];for(let d=0;d<s;++d)x[d]=new Float32Array(u);return A(k,t.bitDepth,t.floatingPoint)(r,l,x,s,u),{sampleRate:w,channelData:x};break}l=h}}function W(r,l){let a=l.sampleRate||16e3,f=!!(l.float||l.floatingPoint),o=f?32:l.bitDepth|0||16,i=r.length,p=r[0].length,n=new ArrayBuffer(44+p*i*(o>>3)),t=new DataView(n),e=0;function m(s){t.setUint8(e++,s)}function h(s){t.setUint16(e,s,!0),e+=2}function c(s){t.setUint32(e,s,!0),e+=4}function u(s){for(var w=0;w<s.length;++w)m(s.charCodeAt(w))}return u("RIFF"),c(n.byteLength-8),u("WAVE"),u("fmt "),c(16),h(f?3:1),h(i),c(a),c(a*i*(o>>3)),h(i*(o>>3)),h(o),u("data"),c(n.byteLength-44),A(D,o,f)(n,e,r,i,p),Buffer(n)}g.exports={decode:T,encode:W}});var P=V(M());var export_wav=P.default;export{export_wav as wav};
//# sourceMappingURL=wav.js.map
