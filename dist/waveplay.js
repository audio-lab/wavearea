import"./chunk-ABZDHW4W.js";function nt(){throw new Error("Cycle detected")}function gt(){if(K>1)K--;else{for(var e,t=!1;J!==void 0;){var r=J;for(J=void 0,yt++;r!==void 0;){var n=r.o;if(r.o=void 0,r.f&=-3,!(8&r.f)&&Zt(r))try{r.c()}catch(i){t||(e=i,t=!0)}r=n}}if(yt=0,K--,t)throw e}}var v=void 0,J=void 0,K=0,yt=0,et=0;function Kt(e){if(v!==void 0){var t=e.n;if(t===void 0||t.t!==v)return v.s=t={i:0,S:e,p:void 0,n:v.s,t:v,e:void 0,x:void 0,r:t},e.n=t,32&v.f&&e.S(t),t;if(t.i===-1)return t.i=0,t.p!==void 0&&(t.p.n=t.n,t.n!==void 0&&(t.n.p=t.p),t.p=void 0,t.n=v.s,v.s.p=t,v.s=t),t}}function b(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}b.prototype.h=function(){return!0};b.prototype.S=function(e){this.t!==e&&e.e===void 0&&(e.x=this.t,this.t!==void 0&&(this.t.e=e),this.t=e)};b.prototype.U=function(e){var t=e.e,r=e.x;t!==void 0&&(t.x=r,e.e=void 0),r!==void 0&&(r.e=t,e.x=void 0),e===this.t&&(this.t=r)};b.prototype.subscribe=function(e){var t=this;return St(function(){var r=t.value,n=32&this.f;this.f&=-33;try{e(r)}finally{this.f|=n}})};b.prototype.valueOf=function(){return this.value};b.prototype.toString=function(){return this.value+""};b.prototype.peek=function(){return this.v};Object.defineProperty(b.prototype,"value",{get:function(){var e=Kt(this);return e!==void 0&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){yt>100&&nt(),this.v=e,this.i++,et++,K++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{gt()}}}});function Et(e){return new b(e)}function Zt(e){for(var t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function zt(e){for(var t=e.s;t!==void 0;t=t.n){var r=t.S.n;r!==void 0&&(t.r=r),t.S.n=t,t.i=-1}}function qt(e){for(var t=e.s,r=void 0;t!==void 0;){var n=t.n;t.i===-1?(t.S.U(t),t.n=void 0):(r!==void 0&&(r.p=t),t.p=void 0,t.n=r,r=t),t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=n}e.s=r}function L(e){b.call(this,void 0),this.x=e,this.s=void 0,this.g=et-1,this.f=4}(L.prototype=new b).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===et))return!0;if(this.g=et,this.f|=1,this.i>0&&!Zt(this))return this.f&=-2,!0;var e=v;try{zt(this),v=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(r){this.v=r,this.f|=16,this.i++}return v=e,qt(this),this.f&=-2,!0};L.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}b.prototype.S.call(this,e)};L.prototype.U=function(e){if(b.prototype.U.call(this,e),this.t===void 0){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}};L.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;e!==void 0;e=e.x)e.t.N()}};L.prototype.peek=function(){if(this.h()||nt(),16&this.f)throw this.v;return this.v};Object.defineProperty(L.prototype,"value",{get:function(){1&this.f&&nt();var e=Kt(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}});function Ht(e){return new L(e)}function Xt(e){var t=e.u;if(e.u=void 0,typeof t=="function"){K++;var r=v;v=void 0;try{t()}catch(n){throw e.f&=-2,e.f|=8,At(e),n}finally{v=r,gt()}}}function At(e){for(var t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,Xt(e)}function zr(e){if(v!==this)throw new Error("Out-of-order effect");qt(this),v=e,this.f&=-2,8&this.f&&At(this),gt()}function Q(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}Q.prototype.c=function(){var e=this.S();try{!(8&this.f)&&this.x!==void 0&&(this.u=this.x())}finally{e()}};Q.prototype.S=function(){1&this.f&&nt(),this.f|=1,this.f&=-9,Xt(this),zt(this),K++;var e=v;return v=this,zr.bind(this,e)};Q.prototype.N=function(){2&this.f||(this.f|=2,this.o=J,J=this)};Q.prototype.d=function(){this.f|=8,1&this.f||At(this)};function St(e){var t=new Q(e);return t.c(),t.d.bind(t)}Symbol.observable||=Symbol("observable");var Gt=e=>e&&!!(e[Symbol.observable]||e[Symbol.asyncIterator]||e.call&&e.set||e.subscribe||e.then),qr=new FinalizationRegistry(e=>e.call?.()),Hr=e=>e&&(()=>e.unsubscribe?.()),Jt=(e,t,r,n,i,o)=>e&&(o=Hr((e[Symbol.observable]?.()||e).subscribe?.(t,r,n))||e.set&&e.call?.(i,t)||(e.then?.(a=>(!i&&t(a),n?.()),r)||(async a=>{try{for await(a of e){if(i)return;t(a)}n?.()}catch(u){r?.(u)}})())&&(a=>i=1),qr.register(e,o),o);var Qt=e=>e&&e.peek,Rt=e=>e&&e[tr],tr=Symbol("signal-struct");B.isStruct=Rt;function B(e,t){if(Rt(e)&&!t)return e;let r,n;if(bt(e)){r=Object.create(t||Object.getPrototypeOf(e)),n={};let i=Object.getOwnPropertyDescriptors(e);if(Rt(e))for(let o in i)Object.defineProperty(r,o,i[o]);else for(let o in i)n[o]=Xr(r,o,i[o].get?Ht(i[o].get.bind(r)):i[o].value);return Object.defineProperty(r,tr,{configurable:!1,enumerable:!1,value:!0}),r}return Array.isArray(e)?e.map(i=>B(i)):e}function Xr(e,t,r){let n,i=Qt(r)?r:bt(r)||Array.isArray(r)?Et(B(r)):Et((n=Gt(r))?void 0:r);return n&&Jt(r,o=>i.value=o),Object.defineProperty(e,t,{get(){return i.value},set:!Qt(r)&&bt(r)?o=>o?Object.assign(i.value,o):i.value=B(o):o=>i.value=B(o),enumerable:!0,configurable:!1}),i}function bt(e){return e&&e.constructor===Object}var Z=(e,t,r,n=null)=>{let i=0,o,a,u,s=r.length,l=t.length,{remove:h,same:c,insert:w,replace:p}=Z;for(;i<s&&i<l&&c(t[i],r[i]);)i++;for(;i<s&&i<l&&c(r[s-1],t[l-1]);)n=r[--l,--s];if(i==l)for(;i<s;)w(n,r[i++],e);else{for(o=t[i];i<s;)u=r[i++],a=o?o.nextSibling:n,c(o,u)?o=a:i<s&&c(r[i],a)?(p(o,u,e),o=a):w(o,u,e);for(;!c(o,n);)a=o.nextSibling,h(o,e),o=a}return r};Z.same=(e,t)=>e==t;Z.replace=(e,t,r)=>r.replaceChild(t,e);Z.insert=(e,t,r)=>r.insertBefore(t,e);Z.remove=(e,t)=>t.removeChild(e);var rr=Z;var z={},Gr={},Jr={},er=e=>e===null?Gr:e===void 0?Jr:typeof e=="number"||e instanceof Number?z[e]||(z[e]=new Number(e)):typeof e=="string"||e instanceof String?z[e]||(z[e]=new String(e)):typeof e=="boolean"||e instanceof Boolean?z[e]||(z[e]=new Boolean(e)):e;var E={},nr=(e,t,r,n)=>{let i=n.startsWith("on")&&n.slice(2),o=A(e,t,":"+n),a;if(o)return i?u=>{a&&ur(e,i,a),a=o(u),a&&ar(e,i,a)}:u=>ot(e,n,o(u))},ot=(e,t,r)=>{r==null||r===!1?e.removeAttribute(t):e.setAttribute(t,r===!0?"":typeof r=="number"||typeof r=="string"?r:"")};E[""]=(e,t)=>{let r=A(e,t,":");if(r)return n=>{let i=r(n);for(let o in i)ot(e,sr(o),i[o])}};var ir=Symbol(":each"),xt=Symbol(":ref");E.ref=(e,t,r)=>{if(e.hasAttribute(":each")){e[xt]=t;return}r[t]=e};E.with=(e,t,r)=>{let n=A(e,t,"with");W(e,B(n(r),r))};E.if=(e,t)=>{let r=document.createTextNode(""),n=[A(e,t,":if")],i=[e],o=e;for(;(o=e.nextElementSibling)&&o.hasAttribute(":else");)o.removeAttribute(":else"),(t=o.getAttribute(":if"))?(o.removeAttribute(":if"),o.remove(),i.push(o),n.push(A(e,t,":else :if"))):(o.remove(),i.push(o),n.push(()=>1));return e.replaceWith(o=r),a=>{let u=n.findIndex(s=>s(a));i[u]!=o&&((o[ir]||o).replaceWith(o=i[u]||r),W(o,a))}};E.each=(e,t)=>{let r=Qr(t);if(!r)return it(new Error,e,t);let n=e[ir]=document.createTextNode("");e.replaceWith(n);let i=A(e,r.items,":each"),o=new WeakMap,a=new WeakMap,u=[];return s=>{let l=i(s);l?typeof l=="number"?l=Array.from({length:l},(w,p)=>[p,p+1]):Array.isArray(l)?l=l.map((w,p)=>[p+1,w]):typeof l=="object"?l=Object.entries(l):it(Error("Bad list value"),e,t,":each",l):l=[];let h=[],c=[];for(let[w,p]of l){let d=er(p),y=a.get(d);if(y||(y=e.cloneNode(!0),a.set(d,y)),h.push(y),!o.has(d)){let R=Object.create(s);R[r.item]=p,r.index&&(R[r.index]=w),e[xt]&&(R[e[xt]]=y),o.set(d,R)}c.push(o.get(d))}rr(n.parentNode,u,h,n),u=h;for(let w=0;w<h.length;w++)W(h[w],c[w])}};function Qr(e){let t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,r=/^\s*\(|\)\s*$/g,n=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,i=e.match(n);if(!i)return;let o={};o.items=i[2].trim();let a=i[1].replace(r,"").trim(),u=a.match(t);return u?(o.item=a.replace(t,"").trim(),o.index=u[1].trim()):o.item=a,o}E.id=(e,t)=>{let r=A(e,t,":id"),n=i=>e.id=i||i===0?i:"";return i=>n(r(i))};E.class=(e,t)=>{let r=A(e,t,":class"),n=e.className;return i=>{let o=r(i);e.className=n+typeof o=="string"?o:(Array.isArray(o)?o:Object.entries(o).map(([a,u])=>u?a:"")).filter(Boolean).join(" ")}};E.style=(e,t)=>{let r=A(e,t,":style"),n=e.getAttribute("style")||"";return n.endsWith(";")||(n+="; "),i=>{let o=r(i);if(typeof o=="string")e.setAttribute("style",n+o);else for(let a in o)e.style[a]=o[a]}};E.text=(e,t)=>{let r=A(e,t,":text");return n=>{let i=r(n);e.textContent=i??""}};E.value=(e,t)=>{let r=A(e,t,":value"),n,i,o=e.type==="text"||e.type===""?a=>e.setAttribute("value",e.value=a??""):e.tagName==="TEXTAREA"||e.type==="text"||e.type===""?a=>(n=e.selectionStart,i=e.selectionEnd,e.setAttribute("value",e.value=a??""),n&&e.setSelectionRange(n,i)):e.type==="checkbox"?a=>(e.value=a?"on":"",ot(e,"checked",a)):e.type==="select-one"?a=>{for(let u in e.options)u.removeAttribute("selected");e.value=a,e.selectedOptions[0]?.setAttribute("selected","")}:a=>e.value=a;return a=>o(r(a))};var or=Symbol("stop");E.on=(e,t)=>{let r=A(e,t,":on"),n={};return i=>{for(let o in n)ur(e,o,n[o]);n=r(i);for(let o in n)ar(e,o,n[o])}};var ar=(e,t,r)=>{if(t.indexOf("..")<0)e.addEventListener(t,r);else{let n=t.split("..").map(o=>o.startsWith("on")?o.slice(2):o),i=(o,a=0)=>{let u=s=>{e.removeEventListener(n[a],u),typeof(o=o.call(e,s))!="function"&&(o=()=>{}),++a<n.length?i(o,a):r[or]||i(r)};e.addEventListener(n[a],u)};i(r)}},ur=(e,t,r)=>{t.indexOf("..")>=0&&(r[or]=!0),e.removeEventListener(t,r)};E.data=(e,t)=>{let r=A(e,t,":data");return n=>{let i=r(n);for(let o in i)e.dataset[o]=i[o]}};E.aria=(e,t)=>{let r=A(e,t,":aria"),n=i=>{for(let o in i)ot(e,"aria-"+sr(o),i[o]==null?null:i[o]+"")};return i=>n(r(i))};var _t={};function A(e,t,r){if(_t[t])return _t[t];let n=/^[\n\s]*if.*\(.*\)/.test(t)||/^(let|const)\s/.test(t)?`(() => { ${t} })()`:t,i;try{i=new Function("__scope",`with (__scope) { return ${n} };`).bind(e)}catch(o){return it(o,e,t,r)}return _t[t]=o=>{let a;try{a=i(o)}catch(u){return it(u,e,t,r)}return a}}function it(e,t,r,n){Object.assign(e,{element:t,expression:r}),console.warn(`\u2234 ${e.message}

${n}=${r?`"${r}"

`:""}`,t),setTimeout(()=>{throw e},0)}function sr(e){return e.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,t=>"-"+t.toLowerCase())}var at=new WeakMap;function W(e,t){if(!e.children)return;if(at.has(e))return at.get(e);let r=B(t||{}),n=[],i=(o,a=o.parentNode)=>{if(o.attributes)for(let u=0;u<o.attributes.length;){let s=o.attributes[u];if(s.name[0]!==":"){u++;continue}o.removeAttribute(s.name);let l=s.value;if(!l)continue;let h=s.name.slice(1).split(":");for(let c of h){let w=E[c]||nr;if(n.push(w(o,l,r,c)||(()=>{})),at.has(o)||o.parentNode!==a)return!1}}for(let u=0,s;s=o.children[u];u++)i(s,o)===!1&&u--};i(e);for(let o of n)St(()=>o(r));return Object.seal(r),at.set(e,r),r}var lr=W;var fr=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},U=[],x=[],te=typeof Uint8Array<"u"?Uint8Array:Array,Ut=!1;function wr(){Ut=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)U[t]=e[t],x[e.charCodeAt(t)]=t;x["-".charCodeAt(0)]=62,x["_".charCodeAt(0)]=63}function re(e){Ut||wr();var t,r,n,i,o,a,u=e.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=e[u-2]==="="?2:e[u-1]==="="?1:0,a=new te(u*3/4-o),n=o>0?u-4:u;var s=0;for(t=0,r=0;t<n;t+=4,r+=3)i=x[e.charCodeAt(t)]<<18|x[e.charCodeAt(t+1)]<<12|x[e.charCodeAt(t+2)]<<6|x[e.charCodeAt(t+3)],a[s++]=i>>16&255,a[s++]=i>>8&255,a[s++]=i&255;return o===2?(i=x[e.charCodeAt(t)]<<2|x[e.charCodeAt(t+1)]>>4,a[s++]=i&255):o===1&&(i=x[e.charCodeAt(t)]<<10|x[e.charCodeAt(t+1)]<<4|x[e.charCodeAt(t+2)]>>2,a[s++]=i>>8&255,a[s++]=i&255),a}function ee(e){return U[e>>18&63]+U[e>>12&63]+U[e>>6&63]+U[e&63]}function ne(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(ee(n));return i.join("")}function cr(e){Ut||wr();for(var t,r=e.length,n=r%3,i="",o=[],a=16383,u=0,s=r-n;u<s;u+=a)o.push(ne(e,u,u+a>s?s:u+a));return n===1?(t=e[r-1],i+=U[t>>2],i+=U[t<<4&63],i+="=="):n===2&&(t=(e[r-2]<<8)+e[r-1],i+=U[t>>10],i+=U[t>>4&63],i+=U[t<<2&63],i+="="),o.push(i),o.join("")}function st(e,t,r,n,i){var o,a,u=i*8-n-1,s=(1<<u)-1,l=s>>1,h=-7,c=r?i-1:0,w=r?-1:1,p=e[t+c];for(c+=w,o=p&(1<<-h)-1,p>>=-h,h+=u;h>0;o=o*256+e[t+c],c+=w,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=n;h>0;a=a*256+e[t+c],c+=w,h-=8);if(o===0)o=1-l;else{if(o===s)return a?NaN:(p?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-l}return(p?-1:1)*a*Math.pow(2,o-n)}function dr(e,t,r,n,i,o){var a,u,s,l=o*8-i-1,h=(1<<l)-1,c=h>>1,w=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),a+c>=1?t+=w/s:t+=w*Math.pow(2,1-c),t*s>=2&&(a++,s/=2),a+c>=h?(u=0,a=h):a+c>=1?(u=(t*s-1)*Math.pow(2,i),a=a+c):(u=t*Math.pow(2,c-1)*Math.pow(2,i),a=0));i>=8;e[r+p]=u&255,p+=d,u/=256,i-=8);for(a=a<<i|u,l+=i;l>0;e[r+p]=a&255,p+=d,a/=256,l-=8);e[r+p-d]|=y*128}var ie={}.toString,mr=Array.isArray||function(e){return ie.call(e)=="[object Array]"};var oe=50;f.TYPED_ARRAY_SUPPORT=fr.TYPED_ARRAY_SUPPORT!==void 0?fr.TYPED_ARRAY_SUPPORT:!0;function It(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function D(e,t){if(It()<t)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=f.prototype):(e===null&&(e=new f(t)),e.length=t),e}function f(e,t,r){if(!f.TYPED_ARRAY_SUPPORT&&!(this instanceof f))return new f(e,t,r);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return Tt(this,e)}return vr(this,e,t,r)}f.poolSize=8192;f._augment=function(e){return e.__proto__=f.prototype,e};function vr(e,t,r,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?se(e,t,r,n):typeof t=="string"?ue(e,t,r):le(e,t)}f.from=function(e,t,r){return vr(null,e,t,r)};f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array);function yr(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function ae(e,t,r,n){return yr(t),t<=0?D(e,t):r!==void 0?typeof n=="string"?D(e,t).fill(r,n):D(e,t).fill(r):D(e,t)}f.alloc=function(e,t,r){return ae(null,e,t,r)};function Tt(e,t){if(yr(t),e=D(e,t<0?0:Pt(t)|0),!f.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}f.allocUnsafe=function(e){return Tt(null,e)};f.allocUnsafeSlow=function(e){return Tt(null,e)};function ue(e,t,r){if((typeof r!="string"||r==="")&&(r="utf8"),!f.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=gr(t,r)|0;e=D(e,n);var i=e.write(t,r);return i!==n&&(e=e.slice(0,i)),e}function Bt(e,t){var r=t.length<0?0:Pt(t.length)|0;e=D(e,r);for(var n=0;n<r;n+=1)e[n]=t[n]&255;return e}function se(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return r===void 0&&n===void 0?t=new Uint8Array(t):n===void 0?t=new Uint8Array(t,r):t=new Uint8Array(t,r,n),f.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=f.prototype):e=Bt(e,t),e}function le(e,t){if(T(t)){var r=Pt(t.length)|0;return e=D(e,r),e.length===0||t.copy(e,0,0,r),e}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||Be(t.length)?D(e,0):Bt(e,t);if(t.type==="Buffer"&&mr(t.data))return Bt(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Pt(e){if(e>=It())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+It().toString(16)+" bytes");return e|0}f.isBuffer=Ue;function T(e){return!!(e!=null&&e._isBuffer)}f.compare=function(t,r){if(!T(t)||!T(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var n=t.length,i=r.length,o=0,a=Math.min(n,i);o<a;++o)if(t[o]!==r[o]){n=t[o],i=r[o];break}return n<i?-1:i<n?1:0};f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};f.concat=function(t,r){if(!mr(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return f.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;var i=f.allocUnsafe(r),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!T(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i};function gr(e,t){if(T(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var r=e.length;if(r===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return ut(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return xr(e).length;default:if(n)return ut(e).length;t=(""+t).toLowerCase(),n=!0}}f.byteLength=gr;function fe(e,t,r){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return Ee(this,t,r);case"utf8":case"utf-8":return Sr(this,t,r);case"ascii":return ye(this,t,r);case"latin1":case"binary":return ge(this,t,r);case"base64":return me(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ae(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}f.prototype._isBuffer=!0;function j(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}f.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)j(this,r,r+1);return this};f.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)j(this,r,r+3),j(this,r+1,r+2);return this};f.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)j(this,r,r+7),j(this,r+1,r+6),j(this,r+2,r+5),j(this,r+3,r+4);return this};f.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?Sr(this,0,t):fe.apply(this,arguments)};f.prototype.equals=function(t){if(!T(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:f.compare(this,t)===0};f.prototype.inspect=function(){var t="",r=oe;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"};f.prototype.compare=function(t,r,n,i,o){if(!T(t))throw new TypeError("Argument must be a Buffer");if(r===void 0&&(r=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var a=o-i,u=n-r,s=Math.min(a,u),l=this.slice(i,o),h=t.slice(r,n),c=0;c<s;++c)if(l[c]!==h[c]){a=l[c],u=h[c];break}return a<u?-1:u<a?1:0};function Er(e,t,r,n,i){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof t=="string"&&(t=f.from(t,n)),T(t))return t.length===0?-1:hr(e,t,r,n,i);if(typeof t=="number")return t=t&255,f.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):hr(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function hr(e,t,r,n,i){var o=1,a=e.length,u=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;o=2,a/=2,u/=2,r/=2}function s(p,d){return o===1?p[d]:p.readUInt16BE(d*o)}var l;if(i){var h=-1;for(l=r;l<a;l++)if(s(e,l)===s(t,h===-1?0:l-h)){if(h===-1&&(h=l),l-h+1===u)return h*o}else h!==-1&&(l-=l-h),h=-1}else for(r+u>a&&(r=a-u),l=r;l>=0;l--){for(var c=!0,w=0;w<u;w++)if(s(e,l+w)!==s(t,w)){c=!1;break}if(c)return l}return-1}f.prototype.includes=function(t,r,n){return this.indexOf(t,r,n)!==-1};f.prototype.indexOf=function(t,r,n){return Er(this,t,r,n,!0)};f.prototype.lastIndexOf=function(t,r,n){return Er(this,t,r,n,!1)};function ce(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var u=parseInt(t.substr(a*2,2),16);if(isNaN(u))return a;e[r+a]=u}return a}function he(e,t,r,n){return ct(ut(t,e.length-r),e,r,n)}function Ar(e,t,r,n){return ct(xe(t),e,r,n)}function pe(e,t,r,n){return Ar(e,t,r,n)}function we(e,t,r,n){return ct(xr(t),e,r,n)}function de(e,t,r,n){return ct(Ie(t,e.length-r),e,r,n)}f.prototype.write=function(t,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-r;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return ce(this,t,r,n);case"utf8":case"utf-8":return he(this,t,r,n);case"ascii":return Ar(this,t,r,n);case"latin1":case"binary":return pe(this,t,r,n);case"base64":return we(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,t,r,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function me(e,t,r){return t===0&&r===e.length?cr(e):cr(e.slice(t,r))}function Sr(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],a=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=r){var s,l,h,c;switch(u){case 1:o<128&&(a=o);break;case 2:s=e[i+1],(s&192)===128&&(c=(o&31)<<6|s&63,c>127&&(a=c));break;case 3:s=e[i+1],l=e[i+2],(s&192)===128&&(l&192)===128&&(c=(o&15)<<12|(s&63)<<6|l&63,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:s=e[i+1],l=e[i+2],h=e[i+3],(s&192)===128&&(l&192)===128&&(h&192)===128&&(c=(o&15)<<18|(s&63)<<12|(l&63)<<6|h&63,c>65535&&c<1114112&&(a=c))}}a===null?(a=65533,u=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=u}return ve(n)}var pr=4096;function ve(e){var t=e.length;if(t<=pr)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=pr));return r}function ye(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]&127);return n}function ge(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function Ee(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=_e(e[o]);return i}function Ae(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}f.prototype.slice=function(t,r){var n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);var i;if(f.TYPED_ARRAY_SUPPORT)i=this.subarray(t,r),i.__proto__=f.prototype;else{var o=r-t;i=new f(o,void 0);for(var a=0;a<o;++a)i[a]=this[a+t]}return i};function g(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUIntLE=function(t,r,n){t=t|0,r=r|0,n||g(t,r,this.length);for(var i=this[t],o=1,a=0;++a<r&&(o*=256);)i+=this[t+a]*o;return i};f.prototype.readUIntBE=function(t,r,n){t=t|0,r=r|0,n||g(t,r,this.length);for(var i=this[t+--r],o=1;r>0&&(o*=256);)i+=this[t+--r]*o;return i};f.prototype.readUInt8=function(t,r){return r||g(t,1,this.length),this[t]};f.prototype.readUInt16LE=function(t,r){return r||g(t,2,this.length),this[t]|this[t+1]<<8};f.prototype.readUInt16BE=function(t,r){return r||g(t,2,this.length),this[t]<<8|this[t+1]};f.prototype.readUInt32LE=function(t,r){return r||g(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};f.prototype.readUInt32BE=function(t,r){return r||g(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};f.prototype.readIntLE=function(t,r,n){t=t|0,r=r|0,n||g(t,r,this.length);for(var i=this[t],o=1,a=0;++a<r&&(o*=256);)i+=this[t+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};f.prototype.readIntBE=function(t,r,n){t=t|0,r=r|0,n||g(t,r,this.length);for(var i=r,o=1,a=this[t+--i];i>0&&(o*=256);)a+=this[t+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*r)),a};f.prototype.readInt8=function(t,r){return r||g(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};f.prototype.readInt16LE=function(t,r){r||g(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};f.prototype.readInt16BE=function(t,r){r||g(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};f.prototype.readInt32LE=function(t,r){return r||g(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};f.prototype.readInt32BE=function(t,r){return r||g(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};f.prototype.readFloatLE=function(t,r){return r||g(t,4,this.length),st(this,t,!0,23,4)};f.prototype.readFloatBE=function(t,r){return r||g(t,4,this.length),st(this,t,!1,23,4)};f.prototype.readDoubleLE=function(t,r){return r||g(t,8,this.length),st(this,t,!0,52,8)};f.prototype.readDoubleBE=function(t,r){return r||g(t,8,this.length),st(this,t,!1,52,8)};function S(e,t,r,n,i,o){if(!T(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}f.prototype.writeUIntLE=function(t,r,n,i){if(t=+t,r=r|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;S(this,t,r,n,o,0)}var a=1,u=0;for(this[r]=t&255;++u<n&&(a*=256);)this[r+u]=t/a&255;return r+n};f.prototype.writeUIntBE=function(t,r,n,i){if(t=+t,r=r|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;S(this,t,r,n,o,0)}var a=n-1,u=1;for(this[r+a]=t&255;--a>=0&&(u*=256);)this[r+a]=t/u&255;return r+n};f.prototype.writeUInt8=function(t,r,n){return t=+t,r=r|0,n||S(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=t&255,r+1};function lt(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}f.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=r|0,n||S(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8):lt(this,t,r,!0),r+2};f.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=r|0,n||S(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t&255):lt(this,t,r,!1),r+2};function ft(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>(n?i:3-i)*8&255}f.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=r|0,n||S(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255):ft(this,t,r,!0),r+4};f.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=r|0,n||S(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255):ft(this,t,r,!1),r+4};f.prototype.writeIntLE=function(t,r,n,i){if(t=+t,r=r|0,!i){var o=Math.pow(2,8*n-1);S(this,t,r,n,o-1,-o)}var a=0,u=1,s=0;for(this[r]=t&255;++a<n&&(u*=256);)t<0&&s===0&&this[r+a-1]!==0&&(s=1),this[r+a]=(t/u>>0)-s&255;return r+n};f.prototype.writeIntBE=function(t,r,n,i){if(t=+t,r=r|0,!i){var o=Math.pow(2,8*n-1);S(this,t,r,n,o-1,-o)}var a=n-1,u=1,s=0;for(this[r+a]=t&255;--a>=0&&(u*=256);)t<0&&s===0&&this[r+a+1]!==0&&(s=1),this[r+a]=(t/u>>0)-s&255;return r+n};f.prototype.writeInt8=function(t,r,n){return t=+t,r=r|0,n||S(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=t&255,r+1};f.prototype.writeInt16LE=function(t,r,n){return t=+t,r=r|0,n||S(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8):lt(this,t,r,!0),r+2};f.prototype.writeInt16BE=function(t,r,n){return t=+t,r=r|0,n||S(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t&255):lt(this,t,r,!1),r+2};f.prototype.writeInt32LE=function(t,r,n){return t=+t,r=r|0,n||S(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):ft(this,t,r,!0),r+4};f.prototype.writeInt32BE=function(t,r,n){return t=+t,r=r|0,n||S(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255):ft(this,t,r,!1),r+4};function Rr(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function br(e,t,r,n,i){return i||Rr(e,t,r,4),dr(e,t,r,n,23,4),r+4}f.prototype.writeFloatLE=function(t,r,n){return br(this,t,r,!0,n)};f.prototype.writeFloatBE=function(t,r,n){return br(this,t,r,!1,n)};function _r(e,t,r,n,i){return i||Rr(e,t,r,8),dr(e,t,r,n,52,8),r+8}f.prototype.writeDoubleLE=function(t,r,n){return _r(this,t,r,!0,n)};f.prototype.writeDoubleBE=function(t,r,n){return _r(this,t,r,!1,n)};f.prototype.copy=function(t,r,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-n&&(i=t.length-r+n);var o=i-n,a;if(this===t&&n<r&&r<i)for(a=o-1;a>=0;--a)t[a+r]=this[a+n];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)t[a+r]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),r);return o};f.prototype.fill=function(t,r,n,i){if(typeof t=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),t.length===1){var o=t.charCodeAt(0);o<256&&(t=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!f.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof t=="number"&&(t=t&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var a;if(typeof t=="number")for(a=r;a<n;++a)this[a]=t;else{var u=T(t)?t:ut(new f(t,i).toString()),s=u.length;for(a=0;a<n-r;++a)this[a+r]=u[a%s]}return this};var Se=/[^+\/0-9A-Za-z-_]/g;function Re(e){if(e=be(e).replace(Se,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function be(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function _e(e){return e<16?"0"+e.toString(16):e.toString(16)}function ut(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function xe(e){for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function Ie(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function xr(e){return re(Re(e))}function ct(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Be(e){return e!==e}function Ue(e){return e!=null&&(!!e._isBuffer||Ir(e)||Te(e))}function Ir(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Te(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&Ir(e.slice(0,0))}var Pe={pcm8:(e,t,r,n,i)=>{let o=new Uint8Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=o[a++]-128;r[s][u]=l<0?l/128:l/127}},pcm16:(e,t,r,n,i)=>{let o=new Int16Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=o[a++];r[s][u]=l<0?l/32768:l/32767}},pcm24:(e,t,r,n,i)=>{let o=new Uint8Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=o[a++],h=o[a++],c=o[a++],w=l+(h<<8)+(c<<16),p=w>8388608?w-16777216:w;r[s][u]=p<0?p/8388608:p/8388607}},pcm32:(e,t,r,n,i)=>{let o=new Int32Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=o[a++];r[s][u]=l<0?l/2147483648:l/2147483647}},pcm32f:(e,t,r,n,i)=>{let o=new Float32Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s)r[s][u]=o[a++]},pcm64f:(e,t,r,n,i)=>{let o=new Float64Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s)r[s][u]=o[a++]}},Ce={pcm8:(e,t,r,n,i)=>{let o=new Uint8Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(r[s][u],1));l=(l*.5+.5)*255|0,o[a++]=l}},pcm16:(e,t,r,n,i)=>{let o=new Int16Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(r[s][u],1));l=(l<0?l*32768:l*32767)|0,o[a++]=l}},pcm24:(e,t,r,n,i)=>{let o=new Uint8Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(r[s][u],1));l=(l<0?16777216+l*8388608:l*8388607)|0,o[a++]=l>>0&255,o[a++]=l>>8&255,o[a++]=l>>16&255}},pcm32:(e,t,r,n,i)=>{let o=new Int32Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(r[s][u],1));l=(l<0?l*2147483648:l*2147483647)|0,o[a++]=l}},pcm32f:(e,t,r,n,i)=>{let o=new Float32Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(r[s][u],1));o[a++]=l}},pcm64f:(e,t,r,n,i)=>{let o=new Float64Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(r[s][u],1));o[a++]=l}}};function Br(e,t,r){let n="pcm"+t+(r?"f":"");console.log("encoder",n);let i=e[n];if(!i)throw new TypeError("Unsupported data format: "+n);return i}function Me(e){let t=0,r=0;e.buffer?(t=e.byteOffset,r=e.length,e=e.buffer):(t=0,r=e.byteLength);let n=new DataView(e);function i(){let l=n.getUint8(t);return t++,l}function o(){let l=n.getUint16(t,!0);return t+=2,l}function a(){let l=n.getUint32(t,!0);return t+=4,l}function u(l){let h="";for(let c=0;c<l;++c)h+=String.fromCharCode(i());return h}if(u(4)!=="RIFF")throw new TypeError("Invalid WAV file");if(a(),u(4)!=="WAVE")throw new TypeError("Invalid WAV file");let s;for(;t<r;){let l=u(4),h=a(),c=t+h;switch(l){case"fmt ":let w=o();if(w!==1&&w!==3)throw new TypeError("Unsupported format in WAV file: "+w.toString(16));s={format:"lpcm",floatingPoint:w===3,channels:o(),sampleRate:a(),byteRate:a(),blockSize:o(),bitDepth:o()};break;case"data":if(!s)throw new TypeError('Missing "fmt " chunk.');let p=Math.floor(h/s.blockSize),d=s.channels,y=s.sampleRate,R=[];for(let Y=0;Y<d;++Y)R[Y]=new Float32Array(p);return Br(Pe,s.bitDepth,s.floatingPoint)(e,t,R,d,p),{sampleRate:y,channelData:R}}t=c}}function De(e,t){console.time("encode start");let r=t.sampleRate||16e3,n=!!(t.float||t.floatingPoint),i=n?32:t.bitDepth|0||16,o=e.length,a=e[0].length,u=new ArrayBuffer(44+a*o*(i>>3)),s=new DataView(u),l=0;function h(d){s.setUint8(l++,d)}function c(d){s.setUint16(l,d,!0),l+=2}function w(d){s.setUint32(l,d,!0),l+=4}function p(d){for(var y=0;y<d.length;++y)h(d.charCodeAt(y))}return p("RIFF"),w(u.byteLength-8),p("WAVE"),p("fmt "),w(16),c(n?3:1),c(o),w(r),w(r*o*(i>>3)),c(o*(i>>3)),c(i),p("data"),w(u.byteLength-44),console.timeEnd("encode start"),console.time("encode body"),Br(Ce,i,n)(u,l,e,o,a),console.timeEnd("encode body"),u}var Ct={decode:Me,encode:De},sn=Ct.decode,Ur=Ct,ln=Ct.encode;var Mr=function(){function e(){}return e.prototype.then=function(t,r){let n=new e,i=this.s;if(i){let o=1&i?t:r;if(o){try{_(n,1,o(this.v))}catch(a){_(n,2,a)}return n}return this}return this.o=function(o){try{let a=o.v;1&o.s?_(n,1,t?t(a):a):r?_(n,1,r(a)):_(n,2,a)}catch(a){_(n,2,a)}},n},e}();function _(e,t,r){if(!e.s){if(r instanceof Mr){if(!r.s)return void(r.o=_.bind(null,e,t));1&t&&(t=r.s),r=r.v}if(r&&r.then)return void r.then(_.bind(null,e,t),_.bind(null,e,2));e.s=t,e.v=r;let n=e.o;n&&n(e)}}var ke=0,H=typeof WeakMap=="function"?WeakMap:function(){var e=typeof Symbol=="function"?Symbol(0):"__weak$"+ ++ke;this.set=function(t,r){t[e]=r},this.get=function(t){return t[e]}};function Nt(e,t){return new Promise(function(r,n){e.onsuccess=function(){var i=e.result;t&&(i=t(i)),r(i)},e.onerror=function(){n(e.error)}})}function Dr(e,t){return Nt(e.openCursor(t),function(r){return r?[r.key,r.value]:[]})}function Tr(e){return new Promise(function(t,r){e.oncomplete=function(){t()},e.onabort=function(){r(e.error)},e.onerror=function(){r(e.error)}})}function Mt(e){if(!function(t){return!!(typeof t=="number"||typeof t=="string"||typeof t=="object"&&t&&(Array.isArray(t)||"setUTCFullYear"in t||typeof ArrayBuffer=="function"&&ArrayBuffer.isView(t)||"byteLength"in t&&"length"in t))}(e))throw Error("kv-storage: The given value is not allowed as a key")}var kr={};function Pr(e,t){return Dr(e,Nr(t))}function Nr(e){return e===kr?IDBKeyRange.lowerBound(-1/0):IDBKeyRange.lowerBound(e,!0)}var Yr=new H,pt=new H,wt=new H,Or=new H,ht=function(){};function Cr(e,t){return t(function(r,n){try{let l=function(){return pt.set(e,o),wt.set(e,void 0),{value:u,done:o===void 0}};var i=pt.get(e);if(i===void 0)return Promise.resolve({value:void 0,done:!0});var o,a,u,s=function(h,c){var w,p=-1;t:{for(var d=0;d<c.length;d++){var y=c[d][0];if(y){var R=y();if(R&&R.then)break t;if(R===h){p=d;break}}else p=d}if(p!==-1){do{for(var Y=c[p][1];!Y;)Y=c[++p][1];var tt=Y();if(tt&&tt.then){w=!0;break t}var $t=c[p][2];p++}while($t&&!$t());return tt}}let X=new Mr,rt=_.bind(null,X,2);return(w?tt.then(vt):R.then(function V(O){for(;;){if(O===h){p=d;break}if(++d===c.length){if(p!==-1)break;return void _(X,1,G)}if(y=c[d][0]){if((O=y())&&O.then)return void O.then(V).then(void 0,rt)}else p=d}do{for(var F=c[p][1];!F;)F=c[++p][1];var G=F();if(G&&G.then)return void G.then(vt).then(void 0,rt);var Vt=c[p][2];p++}while(Vt&&!Vt());_(X,1,G)})).then(void 0,rt),X;function vt(V){for(;;){var O=c[p][2];if(!O||O())break;for(var F=c[++p][1];!F;)F=c[++p][1];if((V=F())&&V.then)return void V.then(vt).then(void 0,rt)}_(X,1,V)}}(Or.get(e),[[function(){return"keys"},function(){return Promise.resolve(function(h,c){return Dr(h,Nr(c)).then(function(w){return w[0]})}(n,i)).then(function(h){u=o=h})}],[function(){return"values"},function(){return Promise.resolve(Pr(n,i)).then(function(h){var c;o=(c=h)[0],u=a=c[1]})}],[function(){return"entries"},function(){return Promise.resolve(Pr(n,i)).then(function(h){var c;a=(c=h)[1],u=(o=c[0])===void 0?void 0:[o,a]})}]]);return Promise.resolve(s&&s.then?s.then(l):l())}catch(l){return Promise.reject(l)}})}function Dt(e,t){var r=new ht;return Or.set(r,e),Yr.set(r,t),pt.set(r,kr),wt.set(r,void 0),r}ht.prototype.return=function(){pt.set(this,void 0)},ht.prototype.next=function(){var e=this,t=Yr.get(this);if(!t)return Promise.reject(new TypeError("Invalid this value"));var r,n=wt.get(this);return r=n!==void 0?n.then(function(){return Cr(e,t)}):Cr(this,t),wt.set(this,r),r},typeof Symbol=="function"&&Symbol.asyncIterator&&(ht.prototype[Symbol.asyncIterator]=function(){return this});var q=function(e,t,r){try{return k.get(e)===null&&function(n){var i=Yt.get(n);k.set(n,new Promise(function(o,a){var u=self.indexedDB.open(i,1);u.onsuccess=function(){var s=u.result;(function(l,h,c){if(l.objectStoreNames.length!==1||l.objectStoreNames[0]!==$)return c(kt(h)),!1;var w=l.transaction($,"readonly").objectStore($);return!(w.autoIncrement||w.keyPath||w.indexNames.length)||(c(kt(h)),!1)})(s,i,a)&&(s.onclose=function(){k.set(n,null)},s.onversionchange=function(){s.close(),k.set(n,null)},o(s))},u.onerror=function(){return a(u.error)},u.onupgradeneeded=function(){try{u.result.createObjectStore($)}catch(s){a(s)}}}))}(e),Promise.resolve(k.get(e)).then(function(n){var i=n.transaction($,t),o=i.objectStore($);return r(i,o)})}catch(n){return Promise.reject(n)}},Yt=new H,k=new H,$="store",P=function(e){var t="kv-storage:"+e;k.set(this,null),Yt.set(this,t),this.backingStore={database:t,store:$,version:1}};function kt(e){return new Error('kv-storage: database "'+e+'" corrupted')}P.prototype.set=function(e,t){try{return Mt(e),q(this,"readwrite",function(r,n){return t===void 0?n.delete(e):n.put(t,e),Tr(r)})}catch(r){return Promise.reject(r)}},P.prototype.get=function(e){try{return Mt(e),q(this,"readonly",function(t,r){return Nt(r.get(e))})}catch(t){return Promise.reject(t)}},P.prototype.delete=function(e){try{return Mt(e),q(this,"readwrite",function(t,r){return r.delete(e),Tr(t)})}catch(t){return Promise.reject(t)}},P.prototype.clear=function(){try{let i=function(){function o(){return Nt(self.indexedDB.deleteDatabase(Yt.get(e)))}var a=function(){if(t){try{t.close()}catch{}return Promise.resolve(new Promise(setTimeout)).then(function(){})}}();return a&&a.then?a.then(o):o()};var e=this,t,r=k.get(e),n=function(){if(r!==null){let a=function(){k.set(e,null)};var o=function(u,s){try{var l=Promise.resolve(r).then(function(h){t=h})}catch{return}return l&&l.then?l.then(void 0,function(){}):l}();return o&&o.then?o.then(a):a()}}();return n&&n.then?n.then(i):i()}catch(i){return Promise.reject(i)}},P.prototype.keys=function(){var e=this;return Dt("keys",function(t){return q(e,"readonly",t)})},P.prototype.values=function(){var e=this;return Dt("values",function(t){return q(e,"readonly",t)})},P.prototype.entries=function(){var e=this;return Dt("entries",function(t){return q(e,"readonly",t)})},typeof Symbol=="function"&&Symbol.asyncIterator&&(P.prototype[Symbol.asyncIterator]=P.prototype.entries);var Ne=new P("default");var dt=44100,C=1024,Ye=await(async()=>{let e=new Audio,t=OfflineAudioContext;return e.canPlayType("audio/ogg")||(t=(await import("./oggmented-bundle-ZFEURIUF.js")).default.OggmentedAudioContext),new t({sampleRate:dt,length:60*60*44100})})(),mt=e=>Math.floor(e*dt/C),Ot=e=>e*C/dt;async function Fr(e){console.time("fetch");let t=await fetch(e);if(!t.ok)throw new Error(`HTTP error: status=${t.status}`);let r=await t.arrayBuffer();return console.timeEnd("fetch"),r}async function Lr(e,t){console.time("decode");let r;try{r=await Ye.decodeAudioData(e)}catch(n){console.log(n)}return console.timeEnd("decode"),r}async function Wr(e){console.time("wav encode");let t=e.getChannelData(0),r=Ur.encode([t],{sampleRate:e.sampleRate,float:!1,bitDepth:16});return console.timeEnd("wav encode"),r}async function jr(e){if(!e)return"";console.time("to waveform string");let t=e.getChannelData(0),r="",n=2;for(let i=0,o=C;i<t.length;){let a=0,u=0;for(;i<o;i++)a+=i>t.length?0:t[i]**2;let s=Math.sqrt(a/C),l=Math.min(100,Math.ceil(s*100*n));r+=String.fromCharCode(256+l),o+=C}return console.timeEnd("to waveform string"),r}function $r(e,t,r){t=t??0,r=Math.min(r??e.length,e.length);for(var n=[],i,o=0;o<e.numberOfChannels;o++){n.push(i=new Float32Array(e.length-Math.abs(r-t)));var a=e.getChannelData(o);i.set(a.subarray(0,t),0),i.set(a.subarray(r),t)}return Ft(n)}function Vr(e,t=2){let r=Array.from({length:t},()=>new Float32Array(e));return Ft(r)}function Ft(e){let t=new AudioBuffer({length:e[0].length,numberOfChannels:e.length,sampleRate:dt});for(var r=0;r<t.numberOfChannels;r++)t.copyToChannel(e[r],r,0);return t}function Kr(e,t,r){for(var n=[],i,o=0;o<e.numberOfChannels;o++){n.push(i=new Float32Array(e.length+r.length));var a=e.getChannelData(o);i.set(a.subarray(0,t),0),i.set(r.getChannelData(o),t),i.set(a.subarray(t),t+r.length)}return Ft(n)}window.BlobBuilder||=window.WebKitBlobBuilder||window.MozBlobBuilder;var Wt;document.addEventListener("mousedown",()=>Wt=!0);document.addEventListener("mouseup",()=>Wt=!1);var jt=document.querySelector(".waveplay"),M=jt.querySelector(".w-wavearea"),N=jt.querySelector(".w-playback"),m=lr(jt,{loading:!0,recording:!1,playing:!1,selecting:!1,startFrame:0,endFrame:null,volume:1,error:null,buffer:null,waveform:"",wavURL:"",handleCaret(e){m.startFrame=mt(N.currentTime=Ot(I().start)),m.endFrame=I().collapsed?m.waveform.length:I().end},handleKey(e){e.key==="Enter"&&e.preventDefault()},handleInput(e){let{waveform:t}=m,r=I().start,n=M.textContent;t.length===n.length&&t===n||(clearTimeout(M._id),M._id=setTimeout(()=>{if(n.length<t.length){let i=r*C,o=(r+t.length-n.length)*C;m.buffer=$r(m.buffer,i,o)}else{let i=n.match(/\s+/);if(i){let o=i.index,a=i[0].length;m.buffer=Kr(m.buffer,o*C,Vr(a*C))}}m.render()},700))},timeChange(e){document.activeElement!==M&&(I(m.startFrame=mt(N.currentTime)),M.focus())},async render(){let{buffer:e}=m,t=await Wr(e),r=new Blob([t],{type:"audio/wav"});m.wavURL=URL.createObjectURL(r);let n=I();n&&(N.currentTime=Ot(n.start)),N.onload=()=>{URL.revokeObjectURL(m.wavURL)};let i=await jr(e);i!==m.waveform&&(m.waveform=i),n&&I(n.start)},play(e){m.playing=!0;let t=I();t||(t=I(0)),m.startFrame=t.start,m.endFrame=t.start!==t.end?t.end:m.waveform.length;let r,n=()=>{let i=mt(N.currentTime)-m.startFrame,o=m.startFrame+i;Wt||I(o),m.endFrame&&o>=m.endFrame?N.pause():r=requestAnimationFrame(n)};return n(),M.focus(),()=>{m.playing=!1,cancelAnimationFrame(r),r=null,t.start!==t.end&&I(startFrame,endFrame),N.currentTime>=N.duration&&I(m.waveform.length),M.focus()}}}),I=(e,t=e)=>{let r=window.getSelection();if(e!=null){let i,o;r.removeAllRanges();let a=new Range;for(i=M.firstChild;e>i.firstChild.data.length;)e-=i.firstChild.data.length,i=i.nextSibling;for(a.setStart(i.firstChild,e),o=M.firstChild;t>o.firstChild.data.length;)t-=o.firstChild.data.length,o=o.nextSibling;return a.setEnd(o.firstChild,t),r.addRange(a),{start:e,startNode:i,end:t,endNode:o,collapsed:r.isCollapsed}}if(!r.anchorNode||r.anchorNode.parentNode.parentNode!==M)return;e=r.anchorOffset,t=r.focusOffset;let n=r.anchorNode;for(;n=n.previousSibling;)e+=n.textContent.length;for(n=r.focusNode;n=n.previousSibling;)t+=n.textContent.length;return{start:e,startNode:r.anchorNode,end:t,endNode:r.focusNode,collapsed:r.isCollapsed}},Zr=["https://upload.wikimedia.org/wikipedia/commons/c/cf/Caja_de_m%C3%BAsica_%28PianoConcerto5_Beethoven%29.ogg"],Lt=new URL(location);async function Fe(e){m.loading=!0,e||(e=Zr[Math.floor(Math.random()*Zr.length)],Lt.searchParams.set("src",e),history.pushState(null,"",Lt));try{let t;t=await Fr(e),m.buffer=await Lr(t),m.render()}catch(t){console.error(t),m.error=t.message}m.loading=!1}Fe(Lt.searchParams.get("src"));
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
//# sourceMappingURL=waveplay.js.map
