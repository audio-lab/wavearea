import{b as Hr}from"./chunk-YFDESRXI.js";function st(){throw new Error("Cycle detected")}function lt(){if(N>1)N--;else{for(var r,t=!1;et!==void 0;){var e=et;for(et=void 0,xt++;e!==void 0;){var n=e.o;if(e.o=void 0,e.f&=-3,!(8&e.f)&&zt(e))try{e.c()}catch(i){t||(r=i,t=!0)}e=n}}if(xt=0,N--,t)throw r}}function qt(r){if(N>0)return r();N++;try{return r()}finally{lt()}}var w=void 0,et=void 0,N=0,xt=0,ut=0;function Ht(r){if(w!==void 0){var t=r.n;if(t===void 0||t.t!==w)return t={i:0,S:r,p:w.s,n:void 0,t:w,e:void 0,x:void 0,r:t},w.s!==void 0&&(w.s.n=t),w.s=t,r.n=t,32&w.f&&r.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=w.s,t.n=void 0,w.s.n=t,w.s=t),t}}function S(r){this.v=r,this.i=0,this.n=void 0,this.t=void 0}S.prototype.h=function(){return!0};S.prototype.S=function(r){this.t!==r&&r.e===void 0&&(r.x=this.t,this.t!==void 0&&(this.t.e=r),this.t=r)};S.prototype.U=function(r){if(this.t!==void 0){var t=r.e,e=r.x;t!==void 0&&(t.x=e,r.e=void 0),e!==void 0&&(e.e=t,r.x=void 0),r===this.t&&(this.t=e)}};S.prototype.subscribe=function(r){var t=this;return It(function(){var e=t.value,n=32&this.f;this.f&=-33;try{r(e)}finally{this.f|=n}})};S.prototype.valueOf=function(){return this.value};S.prototype.toString=function(){return this.value+""};S.prototype.peek=function(){return this.v};Object.defineProperty(S.prototype,"value",{get:function(){var r=Ht(this);return r!==void 0&&(r.i=this.i),this.v},set:function(r){if(r!==this.v){xt>100&&st(),this.v=r,this.i++,ut++,N++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{lt()}}}});function Xt(r){return new S(r)}function zt(r){for(var t=r.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function Gt(r){for(var t=r.s;t!==void 0;t=t.n){var e=t.S.n;if(e!==void 0&&(t.r=e),t.S.n=t,t.i=-1,t.n===void 0){r.s=t;break}}}function Jt(r){for(var t=r.s,e=void 0;t!==void 0;){var n=t.p;t.i===-1?(t.S.U(t),n!==void 0&&(n.n=t.n),t.n!==void 0&&(t.n.p=n)):e=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=n}r.s=e}function F(r){S.call(this,void 0),this.x=r,this.s=void 0,this.g=ut-1,this.f=4}(F.prototype=new S).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===ut))return!0;if(this.g=ut,this.f|=1,this.i>0&&!zt(this))return this.f&=-2,!0;var r=w;try{Gt(this),w=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return w=r,Jt(this),this.f&=-2,!0};F.prototype.S=function(r){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}S.prototype.S.call(this,r)};F.prototype.U=function(r){if(this.t!==void 0&&(S.prototype.U.call(this,r),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}};F.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var r=this.t;r!==void 0;r=r.x)r.t.N()}};F.prototype.peek=function(){if(this.h()||st(),16&this.f)throw this.v;return this.v};Object.defineProperty(F.prototype,"value",{get:function(){1&this.f&&st();var r=Ht(this);if(this.h(),r!==void 0&&(r.i=this.i),16&this.f)throw this.v;return this.v}});function Qt(r){return new F(r)}function tr(r){var t=r.u;if(r.u=void 0,typeof t=="function"){N++;var e=w;w=void 0;try{t()}catch(n){throw r.f&=-2,r.f|=8,_t(r),n}finally{w=e,lt()}}}function _t(r){for(var t=r.s;t!==void 0;t=t.n)t.S.U(t);r.x=void 0,r.s=void 0,tr(r)}function Xr(r){if(w!==this)throw new Error("Out-of-order effect");Jt(this),w=r,this.f&=-2,8&this.f&&_t(this),lt()}function nt(r){this.x=r,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}nt.prototype.c=function(){var r=this.S();try{!(8&this.f)&&this.x!==void 0&&(this.u=this.x())}finally{r()}};nt.prototype.S=function(){1&this.f&&st(),this.f|=1,this.f&=-9,tr(this),Gt(this),N++;var r=w;return w=this,Xr.bind(this,r)};nt.prototype.N=function(){2&this.f||(this.f|=2,this.o=et,et=this)};nt.prototype.d=function(){this.f|=8,1&this.f||_t(this)};function It(r){var t=new nt(r);try{t.c()}catch(e){throw t.d(),e}return t.d.bind(t)}Symbol.observable||=Symbol("observable");var rr=r=>r&&!!(r[Symbol.observable]||r[Symbol.asyncIterator]||r.call&&r.set||r.subscribe||r.then),zr=new FinalizationRegistry(r=>r.call?.()),Gr=r=>r&&(()=>r.unsubscribe?.()),er=(r,t,e,n,i,o)=>r&&(o=Gr((r[Symbol.observable]?.()||r).subscribe?.(t,e,n))||r.set&&r.call?.(i,t)||(r.then?.(a=>(!i&&t(a),n?.()),e)||(async a=>{try{for await(a of r){if(i)return;t(a)}n?.()}catch(u){e?.(u)}})())&&(a=>i=1),zr.register(r,o),o);var Jr=r=>r&&r.peek,Ct=r=>r&&r[nr],nr=Symbol("signal-struct");R.isStruct=Ct;function R(r,t){if(Ct(r)&&!t)return r;if(ft(r)){let e=Object.create(t||Object.getPrototypeOf(r)),n={},i=Object.getOwnPropertyDescriptors(r);for(let o in i){let a=i[o];if(a.get){let u=n[o]=Qt(a.get.bind(e));Object.defineProperty(e,o,{get(){return u.value},set:a.set?.bind(e),configurable:!1,enumerable:!0})}else{let u=a.value,s=rr(u),l=n[o]=Jr(u)?u:Xt(s?void 0:ft(u)?Object.seal(R(u)):Array.isArray(u)?R(u):u);s&&er(u,h=>l.value=h),Object.defineProperty(e,o,{get(){return l.value},set(h){if(ft(h)){if(ft(l.value))try{Object.assign(l.value,h);return}catch{}l.value=Object.seal(R(h))}else Array.isArray(h)?l.value=R(h):l.value=h},enumerable:!0,configurable:!1})}}return Object.defineProperty(e,nr,{configurable:!1,enumerable:!1,value:!0}),e}return Array.isArray(r)&&!Ct(r[0])?r.map(e=>R(e)):r}function ft(r){return r&&r.constructor===Object}var q=(r,t,e,n=null)=>{let i=0,o,a,u,s=e.length,l=t.length,{remove:h,same:c,insert:p,replace:d}=q;for(;i<s&&i<l&&c(t[i],e[i]);)i++;for(;i<s&&i<l&&c(e[s-1],t[l-1]);)n=e[--l,--s];if(i==l)for(;i<s;)p(n,e[i++],r);else{for(o=t[i];i<s;)u=e[i++],a=o?o.nextSibling:n,c(o,u)?o=a:i<s&&c(e[i],a)?(d(o,u,r),o=a):p(o,u,r);for(;!c(o,n);)a=o.nextSibling,h(o,r),o=a}return e};q.same=(r,t)=>r==t;q.replace=(r,t,e)=>e.replaceChild(t,r);q.insert=(r,t,e)=>e.insertBefore(t,r);q.remove=(r,t)=>t.removeChild(r);var ir=q;var H={},Qr={},te={},or=r=>r===null?Qr:r===void 0?te:typeof r=="number"||r instanceof Number?H[r]||(H[r]=new Number(r)):typeof r=="string"||r instanceof String?H[r]||(H[r]=new String(r)):typeof r=="boolean"||r instanceof Boolean?H[r]||(H[r]=new Boolean(r)):r;var X={},x={};X.if=(r,t)=>{let e=document.createTextNode(""),n=[A(r,t,":if")],i=[r],o=r;for(;(o=r.nextElementSibling)&&o.hasAttribute(":else");)o.removeAttribute(":else"),(t=o.getAttribute(":if"))?(o.removeAttribute(":if"),o.remove(),i.push(o),n.push(A(r,t,":else :if"))):(o.remove(),i.push(o),n.push(()=>1));return r.replaceWith(o=e),a=>{let u=n.findIndex(s=>s(a));i[u]!=o&&((o[ur]||o).replaceWith(o=i[u]||e),j(o,a))}};X.with=(r,t,e)=>{let n=A(r,t,"with");j(r,R(n(e),e))};var ur=Symbol(":each");X.each=(r,t)=>{let e=re(t);if(!e)return ct(new Error,r,t);let n=r[ur]=document.createTextNode("");r.replaceWith(n);let i=A(r,e[2],":each"),o=r.getAttribute(":key"),a=o?A(null,o):null;r.removeAttribute(":key");let u=new WeakMap,s=new WeakMap,l=[];return h=>{let c=i(h);c?typeof c=="number"?c=Array.from({length:c},(m,v)=>[v,v+1]):Array.isArray(c)?c=c.map((m,v)=>[v+1,m]):typeof c=="object"?c=Object.entries(c):ct(Error("Bad list value"),r,t,":each",c):c=[];let p=[],d=[];for(let[m,v]of c){let T,P,g=a?.({[e[0]]:v,[e[1]]:m});ee(g)&&(g=or(g)),g==null?T=r.cloneNode(!0):(T=s.get(g))||s.set(g,T=r.cloneNode(!0)),p.push(T),g==null||!(P=u.get(g))?(P=R({[e[0]]:v,[e[1]]:m},h),g!=null&&u.set(g,P)):P[e[0]]=v,d.push(P)}ir(n.parentNode,l,p,n),l=p;for(let m=0;m<p.length;m++)j(p[m],d[m])}};function re(r){let t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,e=/^\s*\(|\)\s*$/g,n=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,i=r.match(n);if(!i)return;let o=i[2].trim(),a=i[1].replace(e,"").trim(),u=a.match(t);return u?[a.replace(t,"").trim(),u[1].trim(),o]:[a,"",o]}x.ref=(r,t,e)=>{e[t]=r};x.id=(r,t)=>{let e=A(r,t,":id"),n=i=>r.id=i||i===0?i:"";return i=>n(e(i))};x.class=(r,t)=>{let e=A(r,t,":class"),n=r.className;return i=>{let o=e(i);r.className=n+typeof o=="string"?o:(Array.isArray(o)?o:Object.entries(o).map(([a,u])=>u?a:"")).filter(Boolean).join(" ")}};x.style=(r,t)=>{let e=A(r,t,":style"),n=r.getAttribute("style")||"";return n.endsWith(";")||(n+="; "),i=>{let o=e(i);if(typeof o=="string")r.setAttribute("style",n+o);else for(let a in o)r.style[a]=o[a]}};x.text=(r,t)=>{let e=A(r,t,":text");return n=>{let i=e(n);r.textContent=i??""}};x.value=(r,t)=>{let e=A(r,t,":value"),n,i,o=r.type==="text"||r.type===""?a=>r.setAttribute("value",r.value=a??""):r.tagName==="TEXTAREA"||r.type==="text"||r.type===""?a=>(n=r.selectionStart,i=r.selectionEnd,r.setAttribute("value",r.value=a??""),n&&r.setSelectionRange(n,i)):r.type==="checkbox"?a=>(r.value=a?"on":"",ht(r,"checked",a)):r.type==="select-one"?a=>{for(let u in r.options)u.removeAttribute("selected");r.value=a,r.selectedOptions[0]?.setAttribute("selected","")}:a=>r.value=a;return a=>o(e(a))};x.on=(r,t)=>{let e=A(r,t,":on");return n=>{let i=e(n);for(let o in i)lr(r,o,i[o]);return()=>{for(let o in i)fr(r,o,i[o])}}};var sr=Symbol("stop"),lr=(r,t,e)=>{if(t.indexOf("..")<0)r.addEventListener(t,e);else{let n=t.split("..").map(o=>o.startsWith("on")?o.slice(2):o),i=(o,a=0)=>{let u=s=>{r.removeEventListener(n[a],u),typeof(o=o.call(r,s))!="function"&&(o=()=>{}),++a<n.length?i(o,a):e[sr]||i(e)};r.addEventListener(n[a],u)};i(e)}},fr=(r,t,e)=>{t.indexOf("..")>=0&&(e[sr]=!0),r.removeEventListener(t,e)};x.data=(r,t)=>{let e=A(r,t,":data");return n=>{let i=e(n);for(let o in i)r.dataset[o]=i[o]}};x.aria=(r,t)=>{let e=A(r,t,":aria"),n=i=>{for(let o in i)ht(r,"aria-"+hr(o),i[o]==null?null:i[o]+"")};return i=>n(e(i))};x[""]=(r,t)=>{let e=A(r,t,":");if(e)return n=>{let i=e(n);for(let o in i)ht(r,hr(o),i[o])}};var cr=(r,t,e,n)=>{let i=n.startsWith("on")&&n.slice(2),o=A(r,t,":"+n);if(o)return i?a=>{let u=o(a);if(u)return lr(r,i,u),()=>fr(r,i,u)}:a=>ht(r,n,o(a))},ht=(r,t,e)=>{e==null||e===!1?r.removeAttribute(t):r.setAttribute(t,e===!0?"":typeof e=="number"||typeof e=="string"?e:"")},ar={};function A(r,t,e){let n=ar[t];if(!n){let i=/^[\n\s]*if.*\(.*\)/.test(t)||/^(let|const)\s/.test(t)?`(() => { ${t} })()`:t;try{n=ar[t]=new Function("__scope",`with (__scope) { return ${i} };`)}catch(o){return ct(o,r,t,e)}}return i=>{let o;try{o=n.call(r,i)}catch(a){return ct(a,r,t,e)}return o}}function ct(r,t,e,n){Object.assign(r,{element:t,expression:e}),console.warn(`\u2234 ${r.message}

${n}=${e?`"${e}"

`:""}`,t),setTimeout(()=>{throw r},0)}function hr(r){return r.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,t=>"-"+t.toLowerCase())}function ee(r){return typeof r=="string"||typeof r=="boolean"||typeof r=="number"}var it=new WeakMap;function j(r,t){if(!r.children)return;if(it.has(r)){let o=it.get(r);return qt(()=>Object.assign(o,t)),o}let e=R(t||{}),n=[],i=(o,a=o.parentNode)=>{for(let u in X){let s=":"+u;if(o.hasAttribute?.(s)){let l=o.getAttribute(s);if(o.removeAttribute(s),!l)continue;if(n.push(X[u](o,l,e,u)),it.has(o)||o.parentNode!==a)return!1}}if(o.attributes)for(let u=0;u<o.attributes.length;){let s=o.attributes[u];if(s.name[0]!==":"){u++;continue}o.removeAttribute(s.name);let l=s.value;if(!l)continue;let h=s.name.slice(1).split(":");for(let c of h){let p=x[c]||cr;if(n.push(p(o,l,e,c)),it.has(o)||o.parentNode!==a)return!1}}for(let u=0,s;s=o.children[u];u++)i(s,o)===!1&&u--};i(r);for(let o of n)if(o){let a;It(()=>{typeof a=="function"&&a(),a=o(e)})}return Object.seal(e),it.set(r,e),e}var pr=j;var dr=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},C=[],_=[],ne=typeof Uint8Array<"u"?Uint8Array:Array,Tt=!1;function yr(){Tt=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,e=r.length;t<e;++t)C[t]=r[t],_[r.charCodeAt(t)]=t;_["-".charCodeAt(0)]=62,_["_".charCodeAt(0)]=63}function ie(r){Tt||yr();var t,e,n,i,o,a,u=r.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=r[u-2]==="="?2:r[u-1]==="="?1:0,a=new ne(u*3/4-o),n=o>0?u-4:u;var s=0;for(t=0,e=0;t<n;t+=4,e+=3)i=_[r.charCodeAt(t)]<<18|_[r.charCodeAt(t+1)]<<12|_[r.charCodeAt(t+2)]<<6|_[r.charCodeAt(t+3)],a[s++]=i>>16&255,a[s++]=i>>8&255,a[s++]=i&255;return o===2?(i=_[r.charCodeAt(t)]<<2|_[r.charCodeAt(t+1)]>>4,a[s++]=i&255):o===1&&(i=_[r.charCodeAt(t)]<<10|_[r.charCodeAt(t+1)]<<4|_[r.charCodeAt(t+2)]>>2,a[s++]=i>>8&255,a[s++]=i&255),a}function oe(r){return C[r>>18&63]+C[r>>12&63]+C[r>>6&63]+C[r&63]}function ae(r,t,e){for(var n,i=[],o=t;o<e;o+=3)n=(r[o]<<16)+(r[o+1]<<8)+r[o+2],i.push(oe(n));return i.join("")}function mr(r){Tt||yr();for(var t,e=r.length,n=e%3,i="",o=[],a=16383,u=0,s=e-n;u<s;u+=a)o.push(ae(r,u,u+a>s?s:u+a));return n===1?(t=r[e-1],i+=C[t>>2],i+=C[t<<4&63],i+="=="):n===2&&(t=(r[e-2]<<8)+r[e-1],i+=C[t>>10],i+=C[t>>4&63],i+=C[t<<2&63],i+="="),o.push(i),o.join("")}function dt(r,t,e,n,i){var o,a,u=i*8-n-1,s=(1<<u)-1,l=s>>1,h=-7,c=e?i-1:0,p=e?-1:1,d=r[t+c];for(c+=p,o=d&(1<<-h)-1,d>>=-h,h+=u;h>0;o=o*256+r[t+c],c+=p,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=n;h>0;a=a*256+r[t+c],c+=p,h-=8);if(o===0)o=1-l;else{if(o===s)return a?NaN:(d?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-l}return(d?-1:1)*a*Math.pow(2,o-n)}function gr(r,t,e,n,i,o){var a,u,s,l=o*8-i-1,h=(1<<l)-1,c=h>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,m=n?1:-1,v=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),a+c>=1?t+=p/s:t+=p*Math.pow(2,1-c),t*s>=2&&(a++,s/=2),a+c>=h?(u=0,a=h):a+c>=1?(u=(t*s-1)*Math.pow(2,i),a=a+c):(u=t*Math.pow(2,c-1)*Math.pow(2,i),a=0));i>=8;r[e+d]=u&255,d+=m,u/=256,i-=8);for(a=a<<i|u,l+=i;l>0;r[e+d]=a&255,d+=m,a/=256,l-=8);r[e+d-m]|=v*128}var ue={}.toString,Ar=Array.isArray||function(r){return ue.call(r)=="[object Array]"};var se=50;f.TYPED_ARRAY_SUPPORT=dr.TYPED_ARRAY_SUPPORT!==void 0?dr.TYPED_ARRAY_SUPPORT:!0;function Bt(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function M(r,t){if(Bt()<t)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(t),r.__proto__=f.prototype):(r===null&&(r=new f(t)),r.length=t),r}function f(r,t,e){if(!f.TYPED_ARRAY_SUPPORT&&!(this instanceof f))return new f(r,t,e);if(typeof r=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return Pt(this,r)}return Er(this,r,t,e)}f.poolSize=8192;f._augment=function(r){return r.__proto__=f.prototype,r};function Er(r,t,e,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?ce(r,t,e,n):typeof t=="string"?fe(r,t,e):he(r,t)}f.from=function(r,t,e){return Er(null,r,t,e)};f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array);function Sr(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function le(r,t,e,n){return Sr(t),t<=0?M(r,t):e!==void 0?typeof n=="string"?M(r,t).fill(e,n):M(r,t).fill(e):M(r,t)}f.alloc=function(r,t,e){return le(null,r,t,e)};function Pt(r,t){if(Sr(t),r=M(r,t<0?0:Mt(t)|0),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<t;++e)r[e]=0;return r}f.allocUnsafe=function(r){return Pt(null,r)};f.allocUnsafeSlow=function(r){return Pt(null,r)};function fe(r,t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=br(t,e)|0;r=M(r,n);var i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}function Ut(r,t){var e=t.length<0?0:Mt(t.length)|0;r=M(r,e);for(var n=0;n<e;n+=1)r[n]=t[n]&255;return r}function ce(r,t,e,n){if(t.byteLength,e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return e===void 0&&n===void 0?t=new Uint8Array(t):n===void 0?t=new Uint8Array(t,e):t=new Uint8Array(t,e,n),f.TYPED_ARRAY_SUPPORT?(r=t,r.__proto__=f.prototype):r=Ut(r,t),r}function he(r,t){if(B(t)){var e=Mt(t.length)|0;return r=M(r,e),r.length===0||t.copy(r,0,0,e),r}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||Te(t.length)?M(r,0):Ut(r,t);if(t.type==="Buffer"&&Ar(t.data))return Ut(r,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Mt(r){if(r>=Bt())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Bt().toString(16)+" bytes");return r|0}f.isBuffer=Pe;function B(r){return!!(r!=null&&r._isBuffer)}f.compare=function(t,e){if(!B(t)||!B(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,o=0,a=Math.min(n,i);o<a;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0};f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};f.concat=function(t,e){if(!Ar(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return f.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=f.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!B(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i};function br(r,t){if(B(r))return r.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var e=r.length;if(e===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return pt(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return Ur(r).length;default:if(n)return pt(r).length;t=(""+t).toLowerCase(),n=!0}}f.byteLength=br;function pe(r,t,e){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(r||(r="utf8");;)switch(r){case"hex":return be(this,t,e);case"utf8":case"utf-8":return _r(this,t,e);case"ascii":return Ee(this,t,e);case"latin1":case"binary":return Se(this,t,e);case"base64":return ge(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Re(this,t,e);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}f.prototype._isBuffer=!0;function W(r,t,e){var n=r[t];r[t]=r[e],r[e]=n}f.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)W(this,e,e+1);return this};f.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)W(this,e,e+3),W(this,e+1,e+2);return this};f.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)W(this,e,e+7),W(this,e+1,e+6),W(this,e+2,e+5),W(this,e+3,e+4);return this};f.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?_r(this,0,t):pe.apply(this,arguments)};f.prototype.equals=function(t){if(!B(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:f.compare(this,t)===0};f.prototype.inspect=function(){var t="",e=se;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"};f.prototype.compare=function(t,e,n,i,o){if(!B(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var a=o-i,u=n-e,s=Math.min(a,u),l=this.slice(i,o),h=t.slice(e,n),c=0;c<s;++c)if(l[c]!==h[c]){a=l[c],u=h[c];break}return a<u?-1:u<a?1:0};function Rr(r,t,e,n,i){if(r.length===0)return-1;if(typeof e=="string"?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:r.length-1),e<0&&(e=r.length+e),e>=r.length){if(i)return-1;e=r.length-1}else if(e<0)if(i)e=0;else return-1;if(typeof t=="string"&&(t=f.from(t,n)),B(t))return t.length===0?-1:wr(r,t,e,n,i);if(typeof t=="number")return t=t&255,f.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,t,e):Uint8Array.prototype.lastIndexOf.call(r,t,e):wr(r,[t],e,n,i);throw new TypeError("val must be string, number or Buffer")}function wr(r,t,e,n,i){var o=1,a=r.length,u=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||t.length<2)return-1;o=2,a/=2,u/=2,e/=2}function s(d,m){return o===1?d[m]:d.readUInt16BE(m*o)}var l;if(i){var h=-1;for(l=e;l<a;l++)if(s(r,l)===s(t,h===-1?0:l-h)){if(h===-1&&(h=l),l-h+1===u)return h*o}else h!==-1&&(l-=l-h),h=-1}else for(e+u>a&&(e=a-u),l=e;l>=0;l--){for(var c=!0,p=0;p<u;p++)if(s(r,l+p)!==s(t,p)){c=!1;break}if(c)return l}return-1}f.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1};f.prototype.indexOf=function(t,e,n){return Rr(this,t,e,n,!0)};f.prototype.lastIndexOf=function(t,e,n){return Rr(this,t,e,n,!1)};function de(r,t,e,n){e=Number(e)||0;var i=r.length-e;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var u=parseInt(t.substr(a*2,2),16);if(isNaN(u))return a;r[e+a]=u}return a}function me(r,t,e,n){return vt(pt(t,r.length-e),r,e,n)}function xr(r,t,e,n){return vt(Be(t),r,e,n)}function we(r,t,e,n){return xr(r,t,e,n)}function ve(r,t,e,n){return vt(Ur(t),r,e,n)}function ye(r,t,e,n){return vt(Ue(t,r.length-e),r,e,n)}f.prototype.write=function(t,e,n,i){if(e===void 0)i="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")i=e,n=this.length,e=0;else if(isFinite(e))e=e|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-e;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return de(this,t,e,n);case"utf8":case"utf-8":return me(this,t,e,n);case"ascii":return xr(this,t,e,n);case"latin1":case"binary":return we(this,t,e,n);case"base64":return ve(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ge(r,t,e){return t===0&&e===r.length?mr(r):mr(r.slice(t,e))}function _r(r,t,e){e=Math.min(r.length,e);for(var n=[],i=t;i<e;){var o=r[i],a=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=e){var s,l,h,c;switch(u){case 1:o<128&&(a=o);break;case 2:s=r[i+1],(s&192)===128&&(c=(o&31)<<6|s&63,c>127&&(a=c));break;case 3:s=r[i+1],l=r[i+2],(s&192)===128&&(l&192)===128&&(c=(o&15)<<12|(s&63)<<6|l&63,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:s=r[i+1],l=r[i+2],h=r[i+3],(s&192)===128&&(l&192)===128&&(h&192)===128&&(c=(o&15)<<18|(s&63)<<12|(l&63)<<6|h&63,c>65535&&c<1114112&&(a=c))}}a===null?(a=65533,u=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=u}return Ae(n)}var vr=4096;function Ae(r){var t=r.length;if(t<=vr)return String.fromCharCode.apply(String,r);for(var e="",n=0;n<t;)e+=String.fromCharCode.apply(String,r.slice(n,n+=vr));return e}function Ee(r,t,e){var n="";e=Math.min(r.length,e);for(var i=t;i<e;++i)n+=String.fromCharCode(r[i]&127);return n}function Se(r,t,e){var n="";e=Math.min(r.length,e);for(var i=t;i<e;++i)n+=String.fromCharCode(r[i]);return n}function be(r,t,e){var n=r.length;(!t||t<0)&&(t=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=t;o<e;++o)i+=Ce(r[o]);return i}function Re(r,t,e){for(var n=r.slice(t,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}f.prototype.slice=function(t,e){var n=this.length;t=~~t,e=e===void 0?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var i;if(f.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=f.prototype;else{var o=e-t;i=new f(o,void 0);for(var a=0;a<o;++a)i[a]=this[a+t]}return i};function y(r,t,e){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+t>e)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUIntLE=function(t,e,n){t=t|0,e=e|0,n||y(t,e,this.length);for(var i=this[t],o=1,a=0;++a<e&&(o*=256);)i+=this[t+a]*o;return i};f.prototype.readUIntBE=function(t,e,n){t=t|0,e=e|0,n||y(t,e,this.length);for(var i=this[t+--e],o=1;e>0&&(o*=256);)i+=this[t+--e]*o;return i};f.prototype.readUInt8=function(t,e){return e||y(t,1,this.length),this[t]};f.prototype.readUInt16LE=function(t,e){return e||y(t,2,this.length),this[t]|this[t+1]<<8};f.prototype.readUInt16BE=function(t,e){return e||y(t,2,this.length),this[t]<<8|this[t+1]};f.prototype.readUInt32LE=function(t,e){return e||y(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};f.prototype.readUInt32BE=function(t,e){return e||y(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};f.prototype.readIntLE=function(t,e,n){t=t|0,e=e|0,n||y(t,e,this.length);for(var i=this[t],o=1,a=0;++a<e&&(o*=256);)i+=this[t+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i};f.prototype.readIntBE=function(t,e,n){t=t|0,e=e|0,n||y(t,e,this.length);for(var i=e,o=1,a=this[t+--i];i>0&&(o*=256);)a+=this[t+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*e)),a};f.prototype.readInt8=function(t,e){return e||y(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};f.prototype.readInt16LE=function(t,e){e||y(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};f.prototype.readInt16BE=function(t,e){e||y(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};f.prototype.readInt32LE=function(t,e){return e||y(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};f.prototype.readInt32BE=function(t,e){return e||y(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};f.prototype.readFloatLE=function(t,e){return e||y(t,4,this.length),dt(this,t,!0,23,4)};f.prototype.readFloatBE=function(t,e){return e||y(t,4,this.length),dt(this,t,!1,23,4)};f.prototype.readDoubleLE=function(t,e){return e||y(t,8,this.length),dt(this,t,!0,52,8)};f.prototype.readDoubleBE=function(t,e){return e||y(t,8,this.length),dt(this,t,!1,52,8)};function E(r,t,e,n,i,o){if(!B(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(e+n>r.length)throw new RangeError("Index out of range")}f.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e=e|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;E(this,t,e,n,o,0)}var a=1,u=0;for(this[e]=t&255;++u<n&&(a*=256);)this[e+u]=t/a&255;return e+n};f.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e=e|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;E(this,t,e,n,o,0)}var a=n-1,u=1;for(this[e+a]=t&255;--a>=0&&(u*=256);)this[e+a]=t/u&255;return e+n};f.prototype.writeUInt8=function(t,e,n){return t=+t,e=e|0,n||E(this,t,e,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t&255,e+1};function mt(r,t,e,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(r.length-e,2);i<o;++i)r[e+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}f.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=e|0,n||E(this,t,e,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8):mt(this,t,e,!0),e+2};f.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=e|0,n||E(this,t,e,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t&255):mt(this,t,e,!1),e+2};function wt(r,t,e,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(r.length-e,4);i<o;++i)r[e+i]=t>>>(n?i:3-i)*8&255}f.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=e|0,n||E(this,t,e,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255):wt(this,t,e,!0),e+4};f.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=e|0,n||E(this,t,e,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255):wt(this,t,e,!1),e+4};f.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=e|0,!i){var o=Math.pow(2,8*n-1);E(this,t,e,n,o-1,-o)}var a=0,u=1,s=0;for(this[e]=t&255;++a<n&&(u*=256);)t<0&&s===0&&this[e+a-1]!==0&&(s=1),this[e+a]=(t/u>>0)-s&255;return e+n};f.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=e|0,!i){var o=Math.pow(2,8*n-1);E(this,t,e,n,o-1,-o)}var a=n-1,u=1,s=0;for(this[e+a]=t&255;--a>=0&&(u*=256);)t<0&&s===0&&this[e+a+1]!==0&&(s=1),this[e+a]=(t/u>>0)-s&255;return e+n};f.prototype.writeInt8=function(t,e,n){return t=+t,e=e|0,n||E(this,t,e,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=t&255,e+1};f.prototype.writeInt16LE=function(t,e,n){return t=+t,e=e|0,n||E(this,t,e,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8):mt(this,t,e,!0),e+2};f.prototype.writeInt16BE=function(t,e,n){return t=+t,e=e|0,n||E(this,t,e,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t&255):mt(this,t,e,!1),e+2};f.prototype.writeInt32LE=function(t,e,n){return t=+t,e=e|0,n||E(this,t,e,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):wt(this,t,e,!0),e+4};f.prototype.writeInt32BE=function(t,e,n){return t=+t,e=e|0,n||E(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255):wt(this,t,e,!1),e+4};function Ir(r,t,e,n,i,o){if(e+n>r.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function Cr(r,t,e,n,i){return i||Ir(r,t,e,4),gr(r,t,e,n,23,4),e+4}f.prototype.writeFloatLE=function(t,e,n){return Cr(this,t,e,!0,n)};f.prototype.writeFloatBE=function(t,e,n){return Cr(this,t,e,!1,n)};function Br(r,t,e,n,i){return i||Ir(r,t,e,8),gr(r,t,e,n,52,8),e+8}f.prototype.writeDoubleLE=function(t,e,n){return Br(this,t,e,!0,n)};f.prototype.writeDoubleBE=function(t,e,n){return Br(this,t,e,!1,n)};f.prototype.copy=function(t,e,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var o=i-n,a;if(this===t&&n<e&&e<i)for(a=o-1;a>=0;--a)t[a+e]=this[a+n];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)t[a+e]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o};f.prototype.fill=function(t,e,n,i){if(typeof t=="string"){if(typeof e=="string"?(i=e,e=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),t.length===1){var o=t.charCodeAt(0);o<256&&(t=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!f.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof t=="number"&&(t=t&255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e=e>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var a;if(typeof t=="number")for(a=e;a<n;++a)this[a]=t;else{var u=B(t)?t:pt(new f(t,i).toString()),s=u.length;for(a=0;a<n-e;++a)this[a+e]=u[a%s]}return this};var xe=/[^+\/0-9A-Za-z-_]/g;function _e(r){if(r=Ie(r).replace(xe,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Ie(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Ce(r){return r<16?"0"+r.toString(16):r.toString(16)}function pt(r,t){t=t||1/0;for(var e,n=r.length,i=null,o=[],a=0;a<n;++a){if(e=r.charCodeAt(a),e>55295&&e<57344){if(!i){if(e>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(t-=3)>-1&&o.push(239,191,189),i=e;continue}e=(i-55296<<10|e-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((t-=1)<0)break;o.push(e)}else if(e<2048){if((t-=2)<0)break;o.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;o.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return o}function Be(r){for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e)&255);return t}function Ue(r,t){for(var e,n,i,o=[],a=0;a<r.length&&!((t-=2)<0);++a)e=r.charCodeAt(a),n=e>>8,i=e%256,o.push(i),o.push(n);return o}function Ur(r){return ie(_e(r))}function vt(r,t,e,n){for(var i=0;i<n&&!(i+e>=t.length||i>=r.length);++i)t[i+e]=r[i];return i}function Te(r){return r!==r}function Pe(r){return r!=null&&(!!r._isBuffer||Tr(r)||Me(r))}function Tr(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function Me(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&Tr(r.slice(0,0))}var De={pcm8:(r,t,e,n,i)=>{let o=new Uint8Array(r,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(e[s][u],1));l=(l*.5+.5)*255|0,o[a++]=l}},pcm16:(r,t,e,n,i)=>{let o=new Int16Array(r,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(e[s][u],1));l=(l<0?l*32768:l*32767)|0,o[a++]=l}},pcm24:(r,t,e,n,i)=>{let o=new Uint8Array(r,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(e[s][u],1));l=(l<0?16777216+l*8388608:l*8388607)|0,o[a++]=l>>0&255,o[a++]=l>>8&255,o[a++]=l>>16&255}},pcm32:(r,t,e,n,i)=>{let o=new Int32Array(r,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(e[s][u],1));l=(l<0?l*2147483648:l*2147483647)|0,o[a++]=l}},pcm32f:(r,t,e,n,i)=>{let o=new Float32Array(r,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(e[s][u],1));o[a++]=l}},pcm64f:(r,t,e,n,i)=>{let o=new Float64Array(r,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(e[s][u],1));o[a++]=l}}};function Ne(r,t,e){let n="pcm"+t+(e?"f":"");console.log("encoder",n);let i=r[n];if(!i)throw new TypeError("Unsupported data format: "+n);return i}function Oe(r,t){console.time("encode start");let e=t.sampleRate||16e3,n=!!(t.float||t.floatingPoint),i=n?32:t.bitDepth|0||16,o=r.length,a=r[0].length,u=new ArrayBuffer(44+a*o*(i>>3)),s=new DataView(u),l=0;function h(m){s.setUint8(l++,m)}function c(m){s.setUint16(l,m,!0),l+=2}function p(m){s.setUint32(l,m,!0),l+=4}function d(m){for(var v=0;v<m.length;++v)h(m.charCodeAt(v))}return d("RIFF"),p(u.byteLength-8),d("WAVE"),d("fmt "),p(16),c(n?3:1),c(o),p(e),p(e*o*(i>>3)),c(o*(i>>3)),c(i),d("data"),p(u.byteLength-44),console.timeEnd("encode start"),console.time("encode body"),Ne(De,i,n)(u,l,r,o,a),console.timeEnd("encode body"),u}var Pr=Oe;var Or=function(){function r(){}return r.prototype.then=function(t,e){let n=new r,i=this.s;if(i){let o=1&i?t:e;if(o){try{b(n,1,o(this.v))}catch(a){b(n,2,a)}return n}return this}return this.o=function(o){try{let a=o.v;1&o.s?b(n,1,t?t(a):a):e?b(n,1,e(a)):b(n,2,a)}catch(a){b(n,2,a)}},n},r}();function b(r,t,e){if(!r.s){if(e instanceof Or){if(!e.s)return void(e.o=b.bind(null,r,t));1&t&&(t=e.s),e=e.v}if(e&&e.then)return void e.then(b.bind(null,r,t),b.bind(null,r,2));r.s=t,r.v=e;let n=r.o;n&&n(r)}}var ke=0,G=typeof WeakMap=="function"?WeakMap:function(){var r=typeof Symbol=="function"?Symbol(0):"__weak$"+ ++ke;this.set=function(t,e){t[r]=e},this.get=function(t){return t[r]}};function kt(r,t){return new Promise(function(e,n){r.onsuccess=function(){var i=r.result;t&&(i=t(i)),e(i)},r.onerror=function(){n(r.error)}})}function kr(r,t){return kt(r.openCursor(t),function(e){return e?[e.key,e.value]:[]})}function Mr(r){return new Promise(function(t,e){r.oncomplete=function(){t()},r.onabort=function(){e(r.error)},r.onerror=function(){e(r.error)}})}function Dt(r){if(!function(t){return!!(typeof t=="number"||typeof t=="string"||typeof t=="object"&&t&&(Array.isArray(t)||"setUTCFullYear"in t||typeof ArrayBuffer=="function"&&ArrayBuffer.isView(t)||"byteLength"in t&&"length"in t))}(r))throw Error("kv-storage: The given value is not allowed as a key")}var Yr={};function Dr(r,t){return kr(r,Lr(t))}function Lr(r){return r===Yr?IDBKeyRange.lowerBound(-1/0):IDBKeyRange.lowerBound(r,!0)}var Fr=new G,gt=new G,At=new G,jr=new G,yt=function(){};function Nr(r,t){return t(function(e,n){try{let l=function(){return gt.set(r,o),At.set(r,void 0),{value:u,done:o===void 0}};var i=gt.get(r);if(i===void 0)return Promise.resolve({value:void 0,done:!0});var o,a,u,s=function(h,c){var p,d=-1;t:{for(var m=0;m<c.length;m++){var v=c[m][0];if(v){var T=v();if(T&&T.then)break t;if(T===h){d=m;break}}else d=m}if(d!==-1){do{for(var P=c[d][1];!P;)P=c[++d][1];var g=P();if(g&&g.then){p=!0;break t}var Vt=c[d][2];d++}while(Vt&&!Vt());return g}}let tt=new Or,at=b.bind(null,tt,2);return(p?g.then(Rt):T.then(function Z(Y){for(;;){if(Y===h){d=m;break}if(++m===c.length){if(d!==-1)break;return void b(tt,1,rt)}if(v=c[m][0]){if((Y=v())&&Y.then)return void Y.then(Z).then(void 0,at)}else d=m}do{for(var L=c[d][1];!L;)L=c[++d][1];var rt=L();if(rt&&rt.then)return void rt.then(Rt).then(void 0,at);var Zt=c[d][2];d++}while(Zt&&!Zt());b(tt,1,rt)})).then(void 0,at),tt;function Rt(Z){for(;;){var Y=c[d][2];if(!Y||Y())break;for(var L=c[++d][1];!L;)L=c[++d][1];if((Z=L())&&Z.then)return void Z.then(Rt).then(void 0,at)}b(tt,1,Z)}}(jr.get(r),[[function(){return"keys"},function(){return Promise.resolve(function(h,c){return kr(h,Lr(c)).then(function(p){return p[0]})}(n,i)).then(function(h){u=o=h})}],[function(){return"values"},function(){return Promise.resolve(Dr(n,i)).then(function(h){var c;o=(c=h)[0],u=a=c[1]})}],[function(){return"entries"},function(){return Promise.resolve(Dr(n,i)).then(function(h){var c;a=(c=h)[1],u=(o=c[0])===void 0?void 0:[o,a]})}]]);return Promise.resolve(s&&s.then?s.then(l):l())}catch(l){return Promise.reject(l)}})}function Nt(r,t){var e=new yt;return jr.set(e,r),Fr.set(e,t),gt.set(e,Yr),At.set(e,void 0),e}yt.prototype.return=function(){gt.set(this,void 0)},yt.prototype.next=function(){var r=this,t=Fr.get(this);if(!t)return Promise.reject(new TypeError("Invalid this value"));var e,n=At.get(this);return e=n!==void 0?n.then(function(){return Nr(r,t)}):Nr(this,t),At.set(this,e),e},typeof Symbol=="function"&&Symbol.asyncIterator&&(yt.prototype[Symbol.asyncIterator]=function(){return this});var z=function(r,t,e){try{return O.get(r)===null&&function(n){var i=Yt.get(n);O.set(n,new Promise(function(o,a){var u=self.indexedDB.open(i,1);u.onsuccess=function(){var s=u.result;(function(l,h,c){if(l.objectStoreNames.length!==1||l.objectStoreNames[0]!==$)return c(Ot(h)),!1;var p=l.transaction($,"readonly").objectStore($);return!(p.autoIncrement||p.keyPath||p.indexNames.length)||(c(Ot(h)),!1)})(s,i,a)&&(s.onclose=function(){O.set(n,null)},s.onversionchange=function(){s.close(),O.set(n,null)},o(s))},u.onerror=function(){return a(u.error)},u.onupgradeneeded=function(){try{u.result.createObjectStore($)}catch(s){a(s)}}}))}(r),Promise.resolve(O.get(r)).then(function(n){var i=n.transaction($,t),o=i.objectStore($);return e(i,o)})}catch(n){return Promise.reject(n)}},Yt=new G,O=new G,$="store",U=function(r){var t="kv-storage:"+r;O.set(this,null),Yt.set(this,t),this.backingStore={database:t,store:$,version:1}};function Ot(r){return new Error('kv-storage: database "'+r+'" corrupted')}U.prototype.set=function(r,t){try{return Dt(r),z(this,"readwrite",function(e,n){return t===void 0?n.delete(r):n.put(t,r),Mr(e)})}catch(e){return Promise.reject(e)}},U.prototype.get=function(r){try{return Dt(r),z(this,"readonly",function(t,e){return kt(e.get(r))})}catch(t){return Promise.reject(t)}},U.prototype.delete=function(r){try{return Dt(r),z(this,"readwrite",function(t,e){return e.delete(r),Mr(t)})}catch(t){return Promise.reject(t)}},U.prototype.clear=function(){try{let i=function(){function o(){return kt(self.indexedDB.deleteDatabase(Yt.get(r)))}var a=function(){if(t){try{t.close()}catch{}return Promise.resolve(new Promise(setTimeout)).then(function(){})}}();return a&&a.then?a.then(o):o()};var r=this,t,e=O.get(r),n=function(){if(e!==null){let a=function(){O.set(r,null)};var o=function(u,s){try{var l=Promise.resolve(e).then(function(h){t=h})}catch{return}return l&&l.then?l.then(void 0,function(){}):l}();return o&&o.then?o.then(a):a()}}();return n&&n.then?n.then(i):i()}catch(i){return Promise.reject(i)}},U.prototype.keys=function(){var r=this;return Nt("keys",function(t){return z(r,"readonly",t)})},U.prototype.values=function(){var r=this;return Nt("values",function(t){return z(r,"readonly",t)})},U.prototype.entries=function(){var r=this;return Nt("entries",function(t){return z(r,"readonly",t)})},typeof Symbol=="function"&&Symbol.asyncIterator&&(U.prototype[Symbol.asyncIterator]=U.prototype.entries);var Ye=new U("default");var ot=44100,K=1024,J=r=>Math.floor(r*ot/K),Lt=r=>r*K/ot,Wr=r=>Math.ceil(J(r)/K),Et=r=>r*K,Le=await(async()=>{let r=new Audio,t=OfflineAudioContext;return r.canPlayType("audio/ogg")||(t=(await import("./oggmented-bundle-PZW5FHYZ.js")).default.OggmentedAudioContext),new t({sampleRate:ot,length:60*60*44100})})();async function $r(r){console.time("fetch");let t=await fetch(r);if(!t.ok)throw new Error(`HTTP error: status=${t.status}`);let e=await t.arrayBuffer();return console.timeEnd("fetch"),e}async function Kr(r,t){console.time("decode");let e;try{e=await Le.decodeAudioData(r)}catch(n){console.log(n)}return console.timeEnd("decode"),e}async function Vr(...r){console.time("wav encode");let t=r[0],e=t.getChannelData(0),n=Pr([e],{sampleRate:t.sampleRate,float:!0,bitDepth:32});return console.timeEnd("wav encode"),n}function Zr(r){if(!r)return"";if(r._wf&&r._wf_first===r.getChannelData(0)[0])return r._wf;console.time("to waveform string");let t=r.getChannelData(0),e="",n=2;for(let i=0,o=K;i<t.length;){let a=0,u=0;for(;i<o;i++)a+=i>=t.length?0:t[i]**2;let s=Math.sqrt(a/K),l=Math.min(100,Math.ceil(s*100*n));e+=String.fromCharCode(256+l),o+=K}return r._wf=e,r._wf_first=r.getChannelData(0)[0],console.timeEnd("to waveform string"),e}function Ft(r,t=0,e=r.length){let n=new AudioBuffer({length:e-t,numberOfChannels:r.numberOfChannels,sampleRate:r.sampleRate});for(var i=0;i<n.numberOfChannels;i++)n.copyToChannel(r.getChannelData(i).subarray(t,e),i,0);return n}var St={};Hr(St,{add:()=>Ze,br:()=>We,clip:()=>Ve,cp:()=>qe,del:()=>$e,insert:()=>He,mute:()=>Ke,norm:()=>je,src:()=>Fe});var Fe=async(r,t)=>{let e=await $r(t);return[await Kr(e)]},je=r=>{let t=0,e=0;for(let a of r)for(let u=0;u<a.numberOfChannels;u++){let s=a.getChannelData(u);e+=s.length;for(let l=0;l<s.length;l++)t+=s[l]}let n=t/e;for(let a of r)for(let u=0;u<a.numberOfChannels;u++){let s=a.getChannelData(u);e+=s.length;for(let l=0;l<s.length;l++)s[l]-=n}let i=0;for(let a of r)for(let u=0;u<a.numberOfChannels;u++){let s=a.getChannelData(u);for(let l=0;l<s.length;l++)i=Math.max(Math.abs(s[l]),i)}let o=Math.max(1/i,1);for(let a of r)for(let u=0;u<a.numberOfChannels;u++){let s=a.getChannelData(u);for(let l=0;l<s.length;l++)s[l]=Math.min(1,Math.max(-1,s[l]*o))}return r},We=(r,...t)=>{for(let e of t){let[n,i]=jt(r,Et(e)),o=r[n];if(i>0&&i<o.length){let a=Ft(o,0,i),u=Ft(o,i);r.splice(n,1,a,u)}}return r};function $e(r,t,e){if(!e)return r;let n=jt(r,Et(t)),i=jt(r,Et(t+e));!i[1]&&i[0]&&(i[0]-=1,i[1]=r[i[0]].length);let o=r[n[0]],a=r[i[0]],u=new AudioBuffer({length:n[1]+(a.length-i[1]),sampleRate:ot,numberOfChannels:o.numberOfChannels});for(let s=0;s<o.numberOfChannels;s++){let l=0,h=u.getChannelData(s),c=o.getChannelData(s),p=a.getChannelData(s);for(l=0;l<n[1];l++)h[l]=c[l];for(let d=i[1];d<p.length;d++)h[l]=p[d],l++}return r.splice(n[0],i[0]-n[0]+1,u),r}function Ke(r,t=2){let e=Array.from({length:t},()=>new Float32Array(r));return create(e)}var Ve=(r,t,e)=>{},Ze=(r,t,e)=>{},qe=(r,t,e,n)=>{};function He(r,t,e){for(var n=[],i,o=0;o<r.numberOfChannels;o++){n.push(i=new Float32Array(r.length+e.length));var a=r.getChannelData(o);i.set(a.subarray(0,t),0),i.set(e.getChannelData(o),t),i.set(a.subarray(t),t+e.length)}return create(n)}var jt=(r,t)=>{if(t===0)return[0,0];var e=0,n;for(let i=0;i<r.length;i++){if(n=e+r[i].length,t<n)return[i,t-e];e=n}return[r.length-1,r[r.length-1].length]};var $t;document.addEventListener("mousedown",()=>$t=!0);document.addEventListener("mouseup",()=>$t=!1);var Kt=document.querySelector(".waveplay"),V=Kt.querySelector(".w-wavearea"),k=Kt.querySelector(".w-playback"),bt=[],Xe=new URL(location),Q=[],I=pr(Kt,{loading:!1,recording:!1,playing:!1,selecting:!1,startFrame:0,volume:1,error:null,segments:[],wavURL:"",lineWidth:215,handleCaret(r){I.startFrame=J(k.currentTime=Lt(D().start))},handleKey(r){if(!r.key.startsWith("Arrow")){if(r.preventDefault(),r.key==="Enter"){let t=D();if(!t.startNode.dataset.id)throw Error("Segment id is not found, strange");(Q.at(-1)[0]==="br"?Q.pop():["br"]).push(t.start),Wt(["br",t.start]);return}if(r.key==="Backspace"||r.key==="Delete"){let t=D();if(!t.startNode.dataset.id)throw Error("Segment id is not found, strange");let n=t.end-t.start,i=n?["del",t.start,n]:["del",t.start-(r.key==="Delete"?0:1),1];Q.push(i),Wt(i)}}},timeChange(r){document.activeElement!==V&&(D(I.startFrame=J(k.currentTime)),V.focus())},play(r){I.playing=!0;let t=D();t||(t=D(0));let e=t.start,n=t.collapsed?J(k.duration):t.end,i,o=()=>{let a=J(k.currentTime)-I.startFrame,u=I.startFrame+a;$t||D(u),n&&u>=n?k.pause():i=requestAnimationFrame(o)};return o(),V.focus(),()=>{I.playing=!1,cancelAnimationFrame(i),i=null,t.start!==t.end&&D(e,n),k.currentTime>=k.duration&&D(Wr(k.duration).length),V.focus()}},timecode(r){let t=Lt(r);return`${Math.floor(t/60).toFixed(0)}:${(t%60).toFixed(0).padStart(2,0)}`}}),D=(r,t=r)=>{let e=window.getSelection();if(r!=null){let s,l;e.removeAllRanges();let h=new Range,c=r;for(s=V.firstChild;c>s.firstChild.data.length;)c-=s.firstChild.data.length,s=s.nextSibling;h.setStart(s.firstChild,c);let p=t;for(l=V.firstChild;p>l.firstChild.data.length;)p-=l.firstChild.data.length,l=l.nextSibling;return h.setEnd(l.firstChild,p),e.addRange(h),{start:r,startNode:s,end:t,endNode:l,startNodeOffset:c,endNodeOffset:p,collapsed:e.isCollapsed}}if(!e.anchorNode||e.anchorNode.parentNode.parentNode!==V)return;r=e.anchorOffset,t=e.focusOffset;let n=e.anchorNode.parentNode;for(;n=n.previousSibling;)r+=n.firstChild.data.length;for(n=e.focusNode.parentNode;n=n.previousSibling;)t+=n.firstChild.data.length;let i=e.anchorNode.parentNode,o=e.anchorOffset,a=e.focusNode.parentNode,u=e.focusOffset;return r>t&&([t,a,u,r,i,o]=[r,i,o,t,a,u]),{start:r,startNode:i,startNodeOffset:o,end:t,endNode:a,endNodeOffset:u,collapsed:e.isCollapsed}},qr=["https://upload.wikimedia.org/wikipedia/commons/c/cf/Caja_de_m%C3%BAsica_%28PianoConcerto5_Beethoven%29.ogg"];async function ze(){I.loading=!0;try{for(let[r,t]of Xe.searchParams)console.log(r,t);if(!Q.length){let r=qr[Math.floor(Math.random()*qr.length)];Q.push(["src",r],["norm"])}await Wt(...Q)}catch(r){console.error(r),I.error=r.message}I.loading=!1}async function Wt(...r){console.log("Apply ops",r);for(let[t,...e]of r){if(!St[t])throw Error("Unknown operation `"+t+"`");bt=await St[t]?.(bt,...e)}Ge(bt),Je(bt)}var Ge=r=>{let t=[];for(let e of r){let n=Zr(e);n=n.replaceAll("\u0100"," "),t.push(n)}return I.segments=t},Je=async r=>{let t=await Vr(...r),e=new Blob([t],{type:"audio/wav"}),n=URL.createObjectURL(e);return I.wavURL=n};ze();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
//# sourceMappingURL=waveplay.js.map
