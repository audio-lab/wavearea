import"./chunk-ABZDHW4W.js";function it(){throw new Error("Cycle detected")}function At(){if(K>1)K--;else{for(var r,t=!1;Q!==void 0;){var e=Q;for(Q=void 0,gt++;e!==void 0;){var n=e.o;if(e.o=void 0,e.f&=-3,!(8&e.f)&&zt(e))try{e.c()}catch(i){t||(r=i,t=!0)}e=n}}if(gt=0,K--,t)throw r}}var v=void 0,Q=void 0,K=0,gt=0,nt=0;function Kt(r){if(v!==void 0){var t=r.n;if(t===void 0||t.t!==v)return t={i:0,S:r,p:v.s,n:void 0,t:v,e:void 0,x:void 0,r:t},v.s!==void 0&&(v.s.n=t),v.s=t,r.n=t,32&v.f&&r.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=v.s,t.n=void 0,v.s.n=t,v.s=t),t}}function b(r){this.v=r,this.i=0,this.n=void 0,this.t=void 0}b.prototype.h=function(){return!0};b.prototype.S=function(r){this.t!==r&&r.e===void 0&&(r.x=this.t,this.t!==void 0&&(this.t.e=r),this.t=r)};b.prototype.U=function(r){if(this.t!==void 0){var t=r.e,e=r.x;t!==void 0&&(t.x=e,r.e=void 0),e!==void 0&&(e.e=t,r.x=void 0),r===this.t&&(this.t=e)}};b.prototype.subscribe=function(r){var t=this;return St(function(){var e=t.value,n=32&this.f;this.f&=-33;try{r(e)}finally{this.f|=n}})};b.prototype.valueOf=function(){return this.value};b.prototype.toString=function(){return this.value+""};b.prototype.peek=function(){return this.v};Object.defineProperty(b.prototype,"value",{get:function(){var r=Kt(this);return r!==void 0&&(r.i=this.i),this.v},set:function(r){if(r!==this.v){gt>100&&it(),this.v=r,this.i++,nt++,K++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{At()}}}});function Zt(r){return new b(r)}function zt(r){for(var t=r.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function qt(r){for(var t=r.s;t!==void 0;t=t.n){var e=t.S.n;if(e!==void 0&&(t.r=e),t.S.n=t,t.i=-1,t.n===void 0){r.s=t;break}}}function Ht(r){for(var t=r.s,e=void 0;t!==void 0;){var n=t.p;t.i===-1?(t.S.U(t),n!==void 0&&(n.n=t.n),t.n!==void 0&&(t.n.p=n)):e=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=n}r.s=e}function F(r){b.call(this,void 0),this.x=r,this.s=void 0,this.g=nt-1,this.f=4}(F.prototype=new b).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===nt))return!0;if(this.g=nt,this.f|=1,this.i>0&&!zt(this))return this.f&=-2,!0;var r=v;try{qt(this),v=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return v=r,Ht(this),this.f&=-2,!0};F.prototype.S=function(r){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}b.prototype.S.call(this,r)};F.prototype.U=function(r){if(this.t!==void 0&&(b.prototype.U.call(this,r),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}};F.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var r=this.t;r!==void 0;r=r.x)r.t.N()}};F.prototype.peek=function(){if(this.h()||it(),16&this.f)throw this.v;return this.v};Object.defineProperty(F.prototype,"value",{get:function(){1&this.f&&it();var r=Kt(this);if(this.h(),r!==void 0&&(r.i=this.i),16&this.f)throw this.v;return this.v}});function Xt(r){return new F(r)}function Gt(r){var t=r.u;if(r.u=void 0,typeof t=="function"){K++;var e=v;v=void 0;try{t()}catch(n){throw r.f&=-2,r.f|=8,Et(r),n}finally{v=e,At()}}}function Et(r){for(var t=r.s;t!==void 0;t=t.n)t.S.U(t);r.x=void 0,r.s=void 0,Gt(r)}function zr(r){if(v!==this)throw new Error("Out-of-order effect");Ht(this),v=r,this.f&=-2,8&this.f&&Et(this),At()}function tt(r){this.x=r,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}tt.prototype.c=function(){var r=this.S();try{!(8&this.f)&&this.x!==void 0&&(this.u=this.x())}finally{r()}};tt.prototype.S=function(){1&this.f&&it(),this.f|=1,this.f&=-9,Gt(this),qt(this),K++;var r=v;return v=this,zr.bind(this,r)};tt.prototype.N=function(){2&this.f||(this.f|=2,this.o=Q,Q=this)};tt.prototype.d=function(){this.f|=8,1&this.f||Et(this)};function St(r){var t=new tt(r);try{t.c()}catch(e){throw t.d(),e}return t.d.bind(t)}Symbol.observable||=Symbol("observable");var Jt=r=>r&&!!(r[Symbol.observable]||r[Symbol.asyncIterator]||r.call&&r.set||r.subscribe||r.then),qr=new FinalizationRegistry(r=>r.call?.()),Hr=r=>r&&(()=>r.unsubscribe?.()),Qt=(r,t,e,n,i,o)=>r&&(o=Hr((r[Symbol.observable]?.()||r).subscribe?.(t,e,n))||r.set&&r.call?.(i,t)||(r.then?.(a=>(!i&&t(a),n?.()),e)||(async a=>{try{for await(a of r){if(i)return;t(a)}n?.()}catch(u){e?.(u)}})())&&(a=>i=1),qr.register(r,o),o);var Xr=r=>r&&r.peek,Rt=r=>r&&r[tr],tr=Symbol("signal-struct");I.isStruct=Rt;function I(r,t){if(Rt(r)&&!t)return r;if(ot(r)){let e=Object.create(t||Object.getPrototypeOf(r)),n={},i=Object.getOwnPropertyDescriptors(r);for(let o in i){let a=i[o];if(a.get){let u=n[o]=Xt(a.get.bind(e));Object.defineProperty(e,o,{get(){return u.value},set:a.set?.bind(e),configurable:!1,enumerable:!0})}else{let u=a.value,s=Jt(u),l=n[o]=Xr(u)?u:Zt(s?void 0:ot(u)?Object.seal(I(u)):Array.isArray(u)?I(u):u);s&&Qt(u,h=>l.value=h),Object.defineProperty(e,o,{get(){return l.value},set(h){if(ot(h)){if(ot(l.value))try{Object.assign(l.value,h);return}catch{}l.value=Object.seal(I(h))}else Array.isArray(h)?l.value=I(h):l.value=h},enumerable:!0,configurable:!1})}}return Object.defineProperty(e,tr,{configurable:!1,enumerable:!1,value:!0}),e}return Array.isArray(r)&&!Rt(r[0])?r.map(e=>I(e)):r}function ot(r){return r&&r.constructor===Object}var Z=(r,t,e,n=null)=>{let i=0,o,a,u,s=e.length,l=t.length,{remove:h,same:f,insert:d,replace:p}=Z;for(;i<s&&i<l&&f(t[i],e[i]);)i++;for(;i<s&&i<l&&f(e[s-1],t[l-1]);)n=e[--l,--s];if(i==l)for(;i<s;)d(n,e[i++],r);else{for(o=t[i];i<s;)u=e[i++],a=o?o.nextSibling:n,f(o,u)?o=a:i<s&&f(e[i],a)?(p(o,u,r),o=a):d(o,u,r);for(;!f(o,n);)a=o.nextSibling,h(o,r),o=a}return e};Z.same=(r,t)=>r==t;Z.replace=(r,t,e)=>e.replaceChild(t,r);Z.insert=(r,t,e)=>e.insertBefore(t,r);Z.remove=(r,t)=>t.removeChild(r);var rr=Z;var z={},Gr={},Jr={},er=r=>r===null?Gr:r===void 0?Jr:typeof r=="number"||r instanceof Number?z[r]||(z[r]=new Number(r)):typeof r=="string"||r instanceof String?z[r]||(z[r]=new String(r)):typeof r=="boolean"||r instanceof Boolean?z[r]||(z[r]=new Boolean(r)):r;var A={},nr=(r,t,e,n)=>{let i=n.startsWith("on")&&n.slice(2),o=E(r,t,":"+n),a;if(o)return i?u=>{a&&ur(r,i,a),a=o(u),a&&ar(r,i,a)}:u=>ut(r,n,o(u))},ut=(r,t,e)=>{e==null||e===!1?r.removeAttribute(t):r.setAttribute(t,e===!0?"":typeof e=="number"||typeof e=="string"?e:"")};A[""]=(r,t)=>{let e=E(r,t,":");if(e)return n=>{let i=e(n);for(let o in i)ut(r,sr(o),i[o])}};var ir=Symbol(":each"),_t=Symbol(":ref");A.ref=(r,t,e)=>{if(r.hasAttribute(":each")){r[_t]=t;return}e[t]=r};A.with=(r,t,e)=>{let n=E(r,t,"with");j(r,I(n(e),e))};A.if=(r,t)=>{let e=document.createTextNode(""),n=[E(r,t,":if")],i=[r],o=r;for(;(o=r.nextElementSibling)&&o.hasAttribute(":else");)o.removeAttribute(":else"),(t=o.getAttribute(":if"))?(o.removeAttribute(":if"),o.remove(),i.push(o),n.push(E(r,t,":else :if"))):(o.remove(),i.push(o),n.push(()=>1));return r.replaceWith(o=e),a=>{let u=n.findIndex(s=>s(a));i[u]!=o&&((o[ir]||o).replaceWith(o=i[u]||e),j(o,a))}};A.each=(r,t)=>{let e=Qr(t);if(!e)return at(new Error,r,t);let n=r[ir]=document.createTextNode("");r.replaceWith(n);let i=E(r,e.items,":each"),o=new WeakMap,a=new WeakMap,u=[];return s=>{let l=i(s);l?typeof l=="number"?l=Array.from({length:l},(d,p)=>[p,p+1]):Array.isArray(l)?l=l.map((d,p)=>[p+1,d]):typeof l=="object"?l=Object.entries(l):at(Error("Bad list value"),r,t,":each",l):l=[];let h=[],f=[];for(let[d,p]of l){let w=er(p),y=a.get(w);if(y||(y=r.cloneNode(!0),a.set(w,y)),h.push(y),!o.has(w)){let R=Object.create(s);R[e.item]=p,e.index&&(R[e.index]=d),r[_t]&&(R[r[_t]]=y),o.set(w,R)}f.push(o.get(w))}rr(n.parentNode,u,h,n),u=h;for(let d=0;d<h.length;d++)j(h[d],f[d])}};function Qr(r){let t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,e=/^\s*\(|\)\s*$/g,n=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,i=r.match(n);if(!i)return;let o={};o.items=i[2].trim();let a=i[1].replace(e,"").trim(),u=a.match(t);return u?(o.item=a.replace(t,"").trim(),o.index=u[1].trim()):o.item=a,o}A.id=(r,t)=>{let e=E(r,t,":id"),n=i=>r.id=i||i===0?i:"";return i=>n(e(i))};A.class=(r,t)=>{let e=E(r,t,":class"),n=r.className;return i=>{let o=e(i);r.className=n+typeof o=="string"?o:(Array.isArray(o)?o:Object.entries(o).map(([a,u])=>u?a:"")).filter(Boolean).join(" ")}};A.style=(r,t)=>{let e=E(r,t,":style"),n=r.getAttribute("style")||"";return n.endsWith(";")||(n+="; "),i=>{let o=e(i);if(typeof o=="string")r.setAttribute("style",n+o);else for(let a in o)r.style[a]=o[a]}};A.text=(r,t)=>{let e=E(r,t,":text");return n=>{let i=e(n);r.textContent=i??""}};A.value=(r,t)=>{let e=E(r,t,":value"),n,i,o=r.type==="text"||r.type===""?a=>r.setAttribute("value",r.value=a??""):r.tagName==="TEXTAREA"||r.type==="text"||r.type===""?a=>(n=r.selectionStart,i=r.selectionEnd,r.setAttribute("value",r.value=a??""),n&&r.setSelectionRange(n,i)):r.type==="checkbox"?a=>(r.value=a?"on":"",ut(r,"checked",a)):r.type==="select-one"?a=>{for(let u in r.options)u.removeAttribute("selected");r.value=a,r.selectedOptions[0]?.setAttribute("selected","")}:a=>r.value=a;return a=>o(e(a))};var or=Symbol("stop");A.on=(r,t)=>{let e=E(r,t,":on"),n={};return i=>{for(let o in n)ur(r,o,n[o]);n=e(i);for(let o in n)ar(r,o,n[o])}};var ar=(r,t,e)=>{if(t.indexOf("..")<0)r.addEventListener(t,e);else{let n=t.split("..").map(o=>o.startsWith("on")?o.slice(2):o),i=(o,a=0)=>{let u=s=>{r.removeEventListener(n[a],u),typeof(o=o.call(r,s))!="function"&&(o=()=>{}),++a<n.length?i(o,a):e[or]||i(e)};r.addEventListener(n[a],u)};i(e)}},ur=(r,t,e)=>{t.indexOf("..")>=0&&(e[or]=!0),r.removeEventListener(t,e)};A.data=(r,t)=>{let e=E(r,t,":data");return n=>{let i=e(n);for(let o in i)r.dataset[o]=i[o]}};A.aria=(r,t)=>{let e=E(r,t,":aria"),n=i=>{for(let o in i)ut(r,"aria-"+sr(o),i[o]==null?null:i[o]+"")};return i=>n(e(i))};var bt={};function E(r,t,e){if(bt[t])return bt[t];let n=/^[\n\s]*if.*\(.*\)/.test(t)||/^(let|const)\s/.test(t)?`(() => { ${t} })()`:t,i;try{i=new Function("__scope",`with (__scope) { return ${n} };`).bind(r)}catch(o){return at(o,r,t,e)}return bt[t]=o=>{let a;try{a=i(o)}catch(u){return at(u,r,t,e)}return a}}function at(r,t,e,n){Object.assign(r,{element:t,expression:e}),console.warn(`\u2234 ${r.message}

${n}=${e?`"${e}"

`:""}`,t),setTimeout(()=>{throw r},0)}function sr(r){return r.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,t=>"-"+t.toLowerCase())}var st=new WeakMap;function j(r,t){if(!r.children)return;if(st.has(r))return st.get(r);let e=I(t||{}),n=[],i=(o,a=o.parentNode)=>{if(o.attributes)for(let u=0;u<o.attributes.length;){let s=o.attributes[u];if(s.name[0]!==":"){u++;continue}o.removeAttribute(s.name);let l=s.value;if(!l)continue;let h=s.name.slice(1).split(":");for(let f of h){let d=A[f]||nr;if(n.push(d(o,l,e,f)||(()=>{})),st.has(o)||o.parentNode!==a)return!1}}for(let u=0,s;s=o.children[u];u++)i(s,o)===!1&&u--};i(r);for(let o of n)St(()=>o(e));return Object.seal(e),st.set(r,e),e}var lr=j;var cr=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},U=[],x=[],te=typeof Uint8Array<"u"?Uint8Array:Array,Bt=!1;function dr(){Bt=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,e=r.length;t<e;++t)U[t]=r[t],x[r.charCodeAt(t)]=t;x["-".charCodeAt(0)]=62,x["_".charCodeAt(0)]=63}function re(r){Bt||dr();var t,e,n,i,o,a,u=r.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=r[u-2]==="="?2:r[u-1]==="="?1:0,a=new te(u*3/4-o),n=o>0?u-4:u;var s=0;for(t=0,e=0;t<n;t+=4,e+=3)i=x[r.charCodeAt(t)]<<18|x[r.charCodeAt(t+1)]<<12|x[r.charCodeAt(t+2)]<<6|x[r.charCodeAt(t+3)],a[s++]=i>>16&255,a[s++]=i>>8&255,a[s++]=i&255;return o===2?(i=x[r.charCodeAt(t)]<<2|x[r.charCodeAt(t+1)]>>4,a[s++]=i&255):o===1&&(i=x[r.charCodeAt(t)]<<10|x[r.charCodeAt(t+1)]<<4|x[r.charCodeAt(t+2)]>>2,a[s++]=i>>8&255,a[s++]=i&255),a}function ee(r){return U[r>>18&63]+U[r>>12&63]+U[r>>6&63]+U[r&63]}function ne(r,t,e){for(var n,i=[],o=t;o<e;o+=3)n=(r[o]<<16)+(r[o+1]<<8)+r[o+2],i.push(ee(n));return i.join("")}function fr(r){Bt||dr();for(var t,e=r.length,n=e%3,i="",o=[],a=16383,u=0,s=e-n;u<s;u+=a)o.push(ne(r,u,u+a>s?s:u+a));return n===1?(t=r[e-1],i+=U[t>>2],i+=U[t<<4&63],i+="=="):n===2&&(t=(r[e-2]<<8)+r[e-1],i+=U[t>>10],i+=U[t>>4&63],i+=U[t<<2&63],i+="="),o.push(i),o.join("")}function ct(r,t,e,n,i){var o,a,u=i*8-n-1,s=(1<<u)-1,l=s>>1,h=-7,f=e?i-1:0,d=e?-1:1,p=r[t+f];for(f+=d,o=p&(1<<-h)-1,p>>=-h,h+=u;h>0;o=o*256+r[t+f],f+=d,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=n;h>0;a=a*256+r[t+f],f+=d,h-=8);if(o===0)o=1-l;else{if(o===s)return a?NaN:(p?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-l}return(p?-1:1)*a*Math.pow(2,o-n)}function wr(r,t,e,n,i,o){var a,u,s,l=o*8-i-1,h=(1<<l)-1,f=h>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,w=n?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),a+f>=1?t+=d/s:t+=d*Math.pow(2,1-f),t*s>=2&&(a++,s/=2),a+f>=h?(u=0,a=h):a+f>=1?(u=(t*s-1)*Math.pow(2,i),a=a+f):(u=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;r[e+p]=u&255,p+=w,u/=256,i-=8);for(a=a<<i|u,l+=i;l>0;r[e+p]=a&255,p+=w,a/=256,l-=8);r[e+p-w]|=y*128}var ie={}.toString,mr=Array.isArray||function(r){return ie.call(r)=="[object Array]"};var oe=50;c.TYPED_ARRAY_SUPPORT=cr.TYPED_ARRAY_SUPPORT!==void 0?cr.TYPED_ARRAY_SUPPORT:!0;function xt(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function D(r,t){if(xt()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(t),r.__proto__=c.prototype):(r===null&&(r=new c(t)),r.length=t),r}function c(r,t,e){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(r,t,e);if(typeof r=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return Ut(this,r)}return vr(this,r,t,e)}c.poolSize=8192;c._augment=function(r){return r.__proto__=c.prototype,r};function vr(r,t,e,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?se(r,t,e,n):typeof t=="string"?ue(r,t,e):le(r,t)}c.from=function(r,t,e){return vr(null,r,t,e)};c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array);function yr(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function ae(r,t,e,n){return yr(t),t<=0?D(r,t):e!==void 0?typeof n=="string"?D(r,t).fill(e,n):D(r,t).fill(e):D(r,t)}c.alloc=function(r,t,e){return ae(null,r,t,e)};function Ut(r,t){if(yr(t),r=D(r,t<0?0:Tt(t)|0),!c.TYPED_ARRAY_SUPPORT)for(var e=0;e<t;++e)r[e]=0;return r}c.allocUnsafe=function(r){return Ut(null,r)};c.allocUnsafeSlow=function(r){return Ut(null,r)};function ue(r,t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!c.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=gr(t,e)|0;r=D(r,n);var i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}function It(r,t){var e=t.length<0?0:Tt(t.length)|0;r=D(r,e);for(var n=0;n<e;n+=1)r[n]=t[n]&255;return r}function se(r,t,e,n){if(t.byteLength,e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return e===void 0&&n===void 0?t=new Uint8Array(t):n===void 0?t=new Uint8Array(t,e):t=new Uint8Array(t,e,n),c.TYPED_ARRAY_SUPPORT?(r=t,r.__proto__=c.prototype):r=It(r,t),r}function le(r,t){if(T(t)){var e=Tt(t.length)|0;return r=D(r,e),r.length===0||t.copy(r,0,0,e),r}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||Be(t.length)?D(r,0):It(r,t);if(t.type==="Buffer"&&mr(t.data))return It(r,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Tt(r){if(r>=xt())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+xt().toString(16)+" bytes");return r|0}c.isBuffer=Ue;function T(r){return!!(r!=null&&r._isBuffer)}c.compare=function(t,e){if(!T(t)||!T(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,o=0,a=Math.min(n,i);o<a;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0};c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};c.concat=function(t,e){if(!mr(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return c.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=c.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!T(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i};function gr(r,t){if(T(r))return r.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var e=r.length;if(e===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return lt(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return xr(r).length;default:if(n)return lt(r).length;t=(""+t).toLowerCase(),n=!0}}c.byteLength=gr;function ce(r,t,e){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(r||(r="utf8");;)switch(r){case"hex":return Ae(this,t,e);case"utf8":case"utf-8":return Sr(this,t,e);case"ascii":return ye(this,t,e);case"latin1":case"binary":return ge(this,t,e);case"base64":return me(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ee(this,t,e);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}c.prototype._isBuffer=!0;function W(r,t,e){var n=r[t];r[t]=r[e],r[e]=n}c.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)W(this,e,e+1);return this};c.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)W(this,e,e+3),W(this,e+1,e+2);return this};c.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)W(this,e,e+7),W(this,e+1,e+6),W(this,e+2,e+5),W(this,e+3,e+4);return this};c.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?Sr(this,0,t):ce.apply(this,arguments)};c.prototype.equals=function(t){if(!T(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:c.compare(this,t)===0};c.prototype.inspect=function(){var t="",e=oe;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"};c.prototype.compare=function(t,e,n,i,o){if(!T(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var a=o-i,u=n-e,s=Math.min(a,u),l=this.slice(i,o),h=t.slice(e,n),f=0;f<s;++f)if(l[f]!==h[f]){a=l[f],u=h[f];break}return a<u?-1:u<a?1:0};function Ar(r,t,e,n,i){if(r.length===0)return-1;if(typeof e=="string"?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:r.length-1),e<0&&(e=r.length+e),e>=r.length){if(i)return-1;e=r.length-1}else if(e<0)if(i)e=0;else return-1;if(typeof t=="string"&&(t=c.from(t,n)),T(t))return t.length===0?-1:hr(r,t,e,n,i);if(typeof t=="number")return t=t&255,c.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,t,e):Uint8Array.prototype.lastIndexOf.call(r,t,e):hr(r,[t],e,n,i);throw new TypeError("val must be string, number or Buffer")}function hr(r,t,e,n,i){var o=1,a=r.length,u=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||t.length<2)return-1;o=2,a/=2,u/=2,e/=2}function s(p,w){return o===1?p[w]:p.readUInt16BE(w*o)}var l;if(i){var h=-1;for(l=e;l<a;l++)if(s(r,l)===s(t,h===-1?0:l-h)){if(h===-1&&(h=l),l-h+1===u)return h*o}else h!==-1&&(l-=l-h),h=-1}else for(e+u>a&&(e=a-u),l=e;l>=0;l--){for(var f=!0,d=0;d<u;d++)if(s(r,l+d)!==s(t,d)){f=!1;break}if(f)return l}return-1}c.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1};c.prototype.indexOf=function(t,e,n){return Ar(this,t,e,n,!0)};c.prototype.lastIndexOf=function(t,e,n){return Ar(this,t,e,n,!1)};function fe(r,t,e,n){e=Number(e)||0;var i=r.length-e;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var u=parseInt(t.substr(a*2,2),16);if(isNaN(u))return a;r[e+a]=u}return a}function he(r,t,e,n){return pt(lt(t,r.length-e),r,e,n)}function Er(r,t,e,n){return pt(xe(t),r,e,n)}function pe(r,t,e,n){return Er(r,t,e,n)}function de(r,t,e,n){return pt(xr(t),r,e,n)}function we(r,t,e,n){return pt(Ie(t,r.length-e),r,e,n)}c.prototype.write=function(t,e,n,i){if(e===void 0)i="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")i=e,n=this.length,e=0;else if(isFinite(e))e=e|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-e;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return fe(this,t,e,n);case"utf8":case"utf-8":return he(this,t,e,n);case"ascii":return Er(this,t,e,n);case"latin1":case"binary":return pe(this,t,e,n);case"base64":return de(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function me(r,t,e){return t===0&&e===r.length?fr(r):fr(r.slice(t,e))}function Sr(r,t,e){e=Math.min(r.length,e);for(var n=[],i=t;i<e;){var o=r[i],a=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=e){var s,l,h,f;switch(u){case 1:o<128&&(a=o);break;case 2:s=r[i+1],(s&192)===128&&(f=(o&31)<<6|s&63,f>127&&(a=f));break;case 3:s=r[i+1],l=r[i+2],(s&192)===128&&(l&192)===128&&(f=(o&15)<<12|(s&63)<<6|l&63,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:s=r[i+1],l=r[i+2],h=r[i+3],(s&192)===128&&(l&192)===128&&(h&192)===128&&(f=(o&15)<<18|(s&63)<<12|(l&63)<<6|h&63,f>65535&&f<1114112&&(a=f))}}a===null?(a=65533,u=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=u}return ve(n)}var pr=4096;function ve(r){var t=r.length;if(t<=pr)return String.fromCharCode.apply(String,r);for(var e="",n=0;n<t;)e+=String.fromCharCode.apply(String,r.slice(n,n+=pr));return e}function ye(r,t,e){var n="";e=Math.min(r.length,e);for(var i=t;i<e;++i)n+=String.fromCharCode(r[i]&127);return n}function ge(r,t,e){var n="";e=Math.min(r.length,e);for(var i=t;i<e;++i)n+=String.fromCharCode(r[i]);return n}function Ae(r,t,e){var n=r.length;(!t||t<0)&&(t=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=t;o<e;++o)i+=_e(r[o]);return i}function Ee(r,t,e){for(var n=r.slice(t,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}c.prototype.slice=function(t,e){var n=this.length;t=~~t,e=e===void 0?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var i;if(c.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=c.prototype;else{var o=e-t;i=new c(o,void 0);for(var a=0;a<o;++a)i[a]=this[a+t]}return i};function g(r,t,e){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+t>e)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUIntLE=function(t,e,n){t=t|0,e=e|0,n||g(t,e,this.length);for(var i=this[t],o=1,a=0;++a<e&&(o*=256);)i+=this[t+a]*o;return i};c.prototype.readUIntBE=function(t,e,n){t=t|0,e=e|0,n||g(t,e,this.length);for(var i=this[t+--e],o=1;e>0&&(o*=256);)i+=this[t+--e]*o;return i};c.prototype.readUInt8=function(t,e){return e||g(t,1,this.length),this[t]};c.prototype.readUInt16LE=function(t,e){return e||g(t,2,this.length),this[t]|this[t+1]<<8};c.prototype.readUInt16BE=function(t,e){return e||g(t,2,this.length),this[t]<<8|this[t+1]};c.prototype.readUInt32LE=function(t,e){return e||g(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};c.prototype.readUInt32BE=function(t,e){return e||g(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};c.prototype.readIntLE=function(t,e,n){t=t|0,e=e|0,n||g(t,e,this.length);for(var i=this[t],o=1,a=0;++a<e&&(o*=256);)i+=this[t+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i};c.prototype.readIntBE=function(t,e,n){t=t|0,e=e|0,n||g(t,e,this.length);for(var i=e,o=1,a=this[t+--i];i>0&&(o*=256);)a+=this[t+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*e)),a};c.prototype.readInt8=function(t,e){return e||g(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};c.prototype.readInt16LE=function(t,e){e||g(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};c.prototype.readInt16BE=function(t,e){e||g(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};c.prototype.readInt32LE=function(t,e){return e||g(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};c.prototype.readInt32BE=function(t,e){return e||g(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};c.prototype.readFloatLE=function(t,e){return e||g(t,4,this.length),ct(this,t,!0,23,4)};c.prototype.readFloatBE=function(t,e){return e||g(t,4,this.length),ct(this,t,!1,23,4)};c.prototype.readDoubleLE=function(t,e){return e||g(t,8,this.length),ct(this,t,!0,52,8)};c.prototype.readDoubleBE=function(t,e){return e||g(t,8,this.length),ct(this,t,!1,52,8)};function S(r,t,e,n,i,o){if(!T(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(e+n>r.length)throw new RangeError("Index out of range")}c.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e=e|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;S(this,t,e,n,o,0)}var a=1,u=0;for(this[e]=t&255;++u<n&&(a*=256);)this[e+u]=t/a&255;return e+n};c.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e=e|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;S(this,t,e,n,o,0)}var a=n-1,u=1;for(this[e+a]=t&255;--a>=0&&(u*=256);)this[e+a]=t/u&255;return e+n};c.prototype.writeUInt8=function(t,e,n){return t=+t,e=e|0,n||S(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t&255,e+1};function ft(r,t,e,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(r.length-e,2);i<o;++i)r[e+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=e|0,n||S(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8):ft(this,t,e,!0),e+2};c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=e|0,n||S(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t&255):ft(this,t,e,!1),e+2};function ht(r,t,e,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(r.length-e,4);i<o;++i)r[e+i]=t>>>(n?i:3-i)*8&255}c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=e|0,n||S(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255):ht(this,t,e,!0),e+4};c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=e|0,n||S(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255):ht(this,t,e,!1),e+4};c.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=e|0,!i){var o=Math.pow(2,8*n-1);S(this,t,e,n,o-1,-o)}var a=0,u=1,s=0;for(this[e]=t&255;++a<n&&(u*=256);)t<0&&s===0&&this[e+a-1]!==0&&(s=1),this[e+a]=(t/u>>0)-s&255;return e+n};c.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=e|0,!i){var o=Math.pow(2,8*n-1);S(this,t,e,n,o-1,-o)}var a=n-1,u=1,s=0;for(this[e+a]=t&255;--a>=0&&(u*=256);)t<0&&s===0&&this[e+a+1]!==0&&(s=1),this[e+a]=(t/u>>0)-s&255;return e+n};c.prototype.writeInt8=function(t,e,n){return t=+t,e=e|0,n||S(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=t&255,e+1};c.prototype.writeInt16LE=function(t,e,n){return t=+t,e=e|0,n||S(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8):ft(this,t,e,!0),e+2};c.prototype.writeInt16BE=function(t,e,n){return t=+t,e=e|0,n||S(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t&255):ft(this,t,e,!1),e+2};c.prototype.writeInt32LE=function(t,e,n){return t=+t,e=e|0,n||S(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):ht(this,t,e,!0),e+4};c.prototype.writeInt32BE=function(t,e,n){return t=+t,e=e|0,n||S(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255):ht(this,t,e,!1),e+4};function Rr(r,t,e,n,i,o){if(e+n>r.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function br(r,t,e,n,i){return i||Rr(r,t,e,4),wr(r,t,e,n,23,4),e+4}c.prototype.writeFloatLE=function(t,e,n){return br(this,t,e,!0,n)};c.prototype.writeFloatBE=function(t,e,n){return br(this,t,e,!1,n)};function _r(r,t,e,n,i){return i||Rr(r,t,e,8),wr(r,t,e,n,52,8),e+8}c.prototype.writeDoubleLE=function(t,e,n){return _r(this,t,e,!0,n)};c.prototype.writeDoubleBE=function(t,e,n){return _r(this,t,e,!1,n)};c.prototype.copy=function(t,e,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var o=i-n,a;if(this===t&&n<e&&e<i)for(a=o-1;a>=0;--a)t[a+e]=this[a+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)t[a+e]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o};c.prototype.fill=function(t,e,n,i){if(typeof t=="string"){if(typeof e=="string"?(i=e,e=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),t.length===1){var o=t.charCodeAt(0);o<256&&(t=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof t=="number"&&(t=t&255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e=e>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var a;if(typeof t=="number")for(a=e;a<n;++a)this[a]=t;else{var u=T(t)?t:lt(new c(t,i).toString()),s=u.length;for(a=0;a<n-e;++a)this[a+e]=u[a%s]}return this};var Se=/[^+\/0-9A-Za-z-_]/g;function Re(r){if(r=be(r).replace(Se,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function be(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function _e(r){return r<16?"0"+r.toString(16):r.toString(16)}function lt(r,t){t=t||1/0;for(var e,n=r.length,i=null,o=[],a=0;a<n;++a){if(e=r.charCodeAt(a),e>55295&&e<57344){if(!i){if(e>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(t-=3)>-1&&o.push(239,191,189),i=e;continue}e=(i-55296<<10|e-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((t-=1)<0)break;o.push(e)}else if(e<2048){if((t-=2)<0)break;o.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;o.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return o}function xe(r){for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e)&255);return t}function Ie(r,t){for(var e,n,i,o=[],a=0;a<r.length&&!((t-=2)<0);++a)e=r.charCodeAt(a),n=e>>8,i=e%256,o.push(i),o.push(n);return o}function xr(r){return re(Re(r))}function pt(r,t,e,n){for(var i=0;i<n&&!(i+e>=t.length||i>=r.length);++i)t[i+e]=r[i];return i}function Be(r){return r!==r}function Ue(r){return r!=null&&(!!r._isBuffer||Ir(r)||Te(r))}function Ir(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function Te(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&Ir(r.slice(0,0))}var Pe={pcm8:(r,t,e,n,i)=>{let o=new Uint8Array(r,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=o[a++]-128;e[s][u]=l<0?l/128:l/127}},pcm16:(r,t,e,n,i)=>{let o=new Int16Array(r,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=o[a++];e[s][u]=l<0?l/32768:l/32767}},pcm24:(r,t,e,n,i)=>{let o=new Uint8Array(r,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=o[a++],h=o[a++],f=o[a++],d=l+(h<<8)+(f<<16),p=d>8388608?d-16777216:d;e[s][u]=p<0?p/8388608:p/8388607}},pcm32:(r,t,e,n,i)=>{let o=new Int32Array(r,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=o[a++];e[s][u]=l<0?l/2147483648:l/2147483647}},pcm32f:(r,t,e,n,i)=>{let o=new Float32Array(r,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s)e[s][u]=o[a++]},pcm64f:(r,t,e,n,i)=>{let o=new Float64Array(r,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s)e[s][u]=o[a++]}},Ce={pcm8:(r,t,e,n,i)=>{let o=new Uint8Array(r,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(e[s][u],1));l=(l*.5+.5)*255|0,o[a++]=l}},pcm16:(r,t,e,n,i)=>{let o=new Int16Array(r,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(e[s][u],1));l=(l<0?l*32768:l*32767)|0,o[a++]=l}},pcm24:(r,t,e,n,i)=>{let o=new Uint8Array(r,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(e[s][u],1));l=(l<0?16777216+l*8388608:l*8388607)|0,o[a++]=l>>0&255,o[a++]=l>>8&255,o[a++]=l>>16&255}},pcm32:(r,t,e,n,i)=>{let o=new Int32Array(r,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(e[s][u],1));l=(l<0?l*2147483648:l*2147483647)|0,o[a++]=l}},pcm32f:(r,t,e,n,i)=>{let o=new Float32Array(r,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(e[s][u],1));o[a++]=l}},pcm64f:(r,t,e,n,i)=>{let o=new Float64Array(r,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(e[s][u],1));o[a++]=l}}};function Br(r,t,e){let n="pcm"+t+(e?"f":"");console.log("encoder",n);let i=r[n];if(!i)throw new TypeError("Unsupported data format: "+n);return i}function Me(r){let t=0,e=0;r.buffer?(t=r.byteOffset,e=r.length,r=r.buffer):(t=0,e=r.byteLength);let n=new DataView(r);function i(){let l=n.getUint8(t);return t++,l}function o(){let l=n.getUint16(t,!0);return t+=2,l}function a(){let l=n.getUint32(t,!0);return t+=4,l}function u(l){let h="";for(let f=0;f<l;++f)h+=String.fromCharCode(i());return h}if(u(4)!=="RIFF")throw new TypeError("Invalid WAV file");if(a(),u(4)!=="WAVE")throw new TypeError("Invalid WAV file");let s;for(;t<e;){let l=u(4),h=a(),f=t+h;switch(l){case"fmt ":let d=o();if(d!==1&&d!==3)throw new TypeError("Unsupported format in WAV file: "+d.toString(16));s={format:"lpcm",floatingPoint:d===3,channels:o(),sampleRate:a(),byteRate:a(),blockSize:o(),bitDepth:o()};break;case"data":if(!s)throw new TypeError('Missing "fmt " chunk.');let p=Math.floor(h/s.blockSize),w=s.channels,y=s.sampleRate,R=[];for(let O=0;O<w;++O)R[O]=new Float32Array(p);return Br(Pe,s.bitDepth,s.floatingPoint)(r,t,R,w,p),{sampleRate:y,channelData:R}}t=f}}function ke(r,t){console.time("encode start");let e=t.sampleRate||16e3,n=!!(t.float||t.floatingPoint),i=n?32:t.bitDepth|0||16,o=r.length,a=r[0].length,u=new ArrayBuffer(44+a*o*(i>>3)),s=new DataView(u),l=0;function h(w){s.setUint8(l++,w)}function f(w){s.setUint16(l,w,!0),l+=2}function d(w){s.setUint32(l,w,!0),l+=4}function p(w){for(var y=0;y<w.length;++y)h(w.charCodeAt(y))}return p("RIFF"),d(u.byteLength-8),p("WAVE"),p("fmt "),d(16),f(n?3:1),f(o),d(e),d(e*o*(i>>3)),f(o*(i>>3)),f(i),p("data"),d(u.byteLength-44),console.timeEnd("encode start"),console.time("encode body"),Br(Ce,i,n)(u,l,r,o,a),console.timeEnd("encode body"),u}var Pt={decode:Me,encode:ke},sn=Pt.decode,Ur=Pt,ln=Pt.encode;var Mr=function(){function r(){}return r.prototype.then=function(t,e){let n=new r,i=this.s;if(i){let o=1&i?t:e;if(o){try{_(n,1,o(this.v))}catch(a){_(n,2,a)}return n}return this}return this.o=function(o){try{let a=o.v;1&o.s?_(n,1,t?t(a):a):e?_(n,1,e(a)):_(n,2,a)}catch(a){_(n,2,a)}},n},r}();function _(r,t,e){if(!r.s){if(e instanceof Mr){if(!e.s)return void(e.o=_.bind(null,r,t));1&t&&(t=e.s),e=e.v}if(e&&e.then)return void e.then(_.bind(null,r,t),_.bind(null,r,2));r.s=t,r.v=e;let n=r.o;n&&n(r)}}var De=0,H=typeof WeakMap=="function"?WeakMap:function(){var r=typeof Symbol=="function"?Symbol(0):"__weak$"+ ++De;this.set=function(t,e){t[r]=e},this.get=function(t){return t[r]}};function Dt(r,t){return new Promise(function(e,n){r.onsuccess=function(){var i=r.result;t&&(i=t(i)),e(i)},r.onerror=function(){n(r.error)}})}function kr(r,t){return Dt(r.openCursor(t),function(e){return e?[e.key,e.value]:[]})}function Tr(r){return new Promise(function(t,e){r.oncomplete=function(){t()},r.onabort=function(){e(r.error)},r.onerror=function(){e(r.error)}})}function Ct(r){if(!function(t){return!!(typeof t=="number"||typeof t=="string"||typeof t=="object"&&t&&(Array.isArray(t)||"setUTCFullYear"in t||typeof ArrayBuffer=="function"&&ArrayBuffer.isView(t)||"byteLength"in t&&"length"in t))}(r))throw Error("kv-storage: The given value is not allowed as a key")}var Dr={};function Pr(r,t){return kr(r,Nr(t))}function Nr(r){return r===Dr?IDBKeyRange.lowerBound(-1/0):IDBKeyRange.lowerBound(r,!0)}var Or=new H,wt=new H,mt=new H,Yr=new H,dt=function(){};function Cr(r,t){return t(function(e,n){try{let l=function(){return wt.set(r,o),mt.set(r,void 0),{value:u,done:o===void 0}};var i=wt.get(r);if(i===void 0)return Promise.resolve({value:void 0,done:!0});var o,a,u,s=function(h,f){var d,p=-1;t:{for(var w=0;w<f.length;w++){var y=f[w][0];if(y){var R=y();if(R&&R.then)break t;if(R===h){p=w;break}}else p=w}if(p!==-1){do{for(var O=f[p][1];!O;)O=f[++p][1];var rt=O();if(rt&&rt.then){d=!0;break t}var $t=f[p][2];p++}while($t&&!$t());return rt}}let G=new Mr,et=_.bind(null,G,2);return(d?rt.then(yt):R.then(function V(Y){for(;;){if(Y===h){p=w;break}if(++w===f.length){if(p!==-1)break;return void _(G,1,J)}if(y=f[w][0]){if((Y=y())&&Y.then)return void Y.then(V).then(void 0,et)}else p=w}do{for(var L=f[p][1];!L;)L=f[++p][1];var J=L();if(J&&J.then)return void J.then(yt).then(void 0,et);var Vt=f[p][2];p++}while(Vt&&!Vt());_(G,1,J)})).then(void 0,et),G;function yt(V){for(;;){var Y=f[p][2];if(!Y||Y())break;for(var L=f[++p][1];!L;)L=f[++p][1];if((V=L())&&V.then)return void V.then(yt).then(void 0,et)}_(G,1,V)}}(Yr.get(r),[[function(){return"keys"},function(){return Promise.resolve(function(h,f){return kr(h,Nr(f)).then(function(d){return d[0]})}(n,i)).then(function(h){u=o=h})}],[function(){return"values"},function(){return Promise.resolve(Pr(n,i)).then(function(h){var f;o=(f=h)[0],u=a=f[1]})}],[function(){return"entries"},function(){return Promise.resolve(Pr(n,i)).then(function(h){var f;a=(f=h)[1],u=(o=f[0])===void 0?void 0:[o,a]})}]]);return Promise.resolve(s&&s.then?s.then(l):l())}catch(l){return Promise.reject(l)}})}function Mt(r,t){var e=new dt;return Yr.set(e,r),Or.set(e,t),wt.set(e,Dr),mt.set(e,void 0),e}dt.prototype.return=function(){wt.set(this,void 0)},dt.prototype.next=function(){var r=this,t=Or.get(this);if(!t)return Promise.reject(new TypeError("Invalid this value"));var e,n=mt.get(this);return e=n!==void 0?n.then(function(){return Cr(r,t)}):Cr(this,t),mt.set(this,e),e},typeof Symbol=="function"&&Symbol.asyncIterator&&(dt.prototype[Symbol.asyncIterator]=function(){return this});var q=function(r,t,e){try{return N.get(r)===null&&function(n){var i=Nt.get(n);N.set(n,new Promise(function(o,a){var u=self.indexedDB.open(i,1);u.onsuccess=function(){var s=u.result;(function(l,h,f){if(l.objectStoreNames.length!==1||l.objectStoreNames[0]!==$)return f(kt(h)),!1;var d=l.transaction($,"readonly").objectStore($);return!(d.autoIncrement||d.keyPath||d.indexNames.length)||(f(kt(h)),!1)})(s,i,a)&&(s.onclose=function(){N.set(n,null)},s.onversionchange=function(){s.close(),N.set(n,null)},o(s))},u.onerror=function(){return a(u.error)},u.onupgradeneeded=function(){try{u.result.createObjectStore($)}catch(s){a(s)}}}))}(r),Promise.resolve(N.get(r)).then(function(n){var i=n.transaction($,t),o=i.objectStore($);return e(i,o)})}catch(n){return Promise.reject(n)}},Nt=new H,N=new H,$="store",P=function(r){var t="kv-storage:"+r;N.set(this,null),Nt.set(this,t),this.backingStore={database:t,store:$,version:1}};function kt(r){return new Error('kv-storage: database "'+r+'" corrupted')}P.prototype.set=function(r,t){try{return Ct(r),q(this,"readwrite",function(e,n){return t===void 0?n.delete(r):n.put(t,r),Tr(e)})}catch(e){return Promise.reject(e)}},P.prototype.get=function(r){try{return Ct(r),q(this,"readonly",function(t,e){return Dt(e.get(r))})}catch(t){return Promise.reject(t)}},P.prototype.delete=function(r){try{return Ct(r),q(this,"readwrite",function(t,e){return e.delete(r),Tr(t)})}catch(t){return Promise.reject(t)}},P.prototype.clear=function(){try{let i=function(){function o(){return Dt(self.indexedDB.deleteDatabase(Nt.get(r)))}var a=function(){if(t){try{t.close()}catch{}return Promise.resolve(new Promise(setTimeout)).then(function(){})}}();return a&&a.then?a.then(o):o()};var r=this,t,e=N.get(r),n=function(){if(e!==null){let a=function(){N.set(r,null)};var o=function(u,s){try{var l=Promise.resolve(e).then(function(h){t=h})}catch{return}return l&&l.then?l.then(void 0,function(){}):l}();return o&&o.then?o.then(a):a()}}();return n&&n.then?n.then(i):i()}catch(i){return Promise.reject(i)}},P.prototype.keys=function(){var r=this;return Mt("keys",function(t){return q(r,"readonly",t)})},P.prototype.values=function(){var r=this;return Mt("values",function(t){return q(r,"readonly",t)})},P.prototype.entries=function(){var r=this;return Mt("entries",function(t){return q(r,"readonly",t)})},typeof Symbol=="function"&&Symbol.asyncIterator&&(P.prototype[Symbol.asyncIterator]=P.prototype.entries);var Ne=new P("default");var vt=44100,B=1024,X=r=>Math.floor(r*vt/B),Ot=r=>r*B/vt,Lr=r=>Math.ceil(X(r)/B),Oe=await(async()=>{let r=new Audio,t=OfflineAudioContext;return r.canPlayType("audio/ogg")||(t=(await import("./oggmented-bundle-ZFEURIUF.js")).default.OggmentedAudioContext),new t({sampleRate:vt,length:60*60*44100})})();async function Fr(r){console.time("fetch");let t=await fetch(r);if(!t.ok)throw new Error(`HTTP error: status=${t.status}`);let e=await t.arrayBuffer();return console.timeEnd("fetch"),e}async function jr(r,t){console.time("decode");let e;try{e=await Oe.decodeAudioData(r)}catch(n){console.log(n)}return console.timeEnd("decode"),e}async function Wr(r){console.time("wav encode");let t=r.getChannelData(0),e=Ur.encode([t],{sampleRate:r.sampleRate,float:!1,bitDepth:16});return console.timeEnd("wav encode"),e}async function Yt(r){if(!r)return"";console.time("to waveform string");let t=r.getChannelData(0),e="",n=2;for(let i=0,o=B;i<t.length;){let a=0,u=0;for(;i<o;i++)a+=i>t.length?0:t[i]**2;let s=Math.sqrt(a/B),l=Math.min(100,Math.ceil(s*100*n));e+=String.fromCharCode(256+l),o+=B}return console.timeEnd("to waveform string"),e}function $r(r,t,e){t=t??0,e=Math.min(e??r.length,r.length);for(var n=[],i,o=0;o<r.numberOfChannels;o++){n.push(i=new Float32Array(r.length-Math.abs(e-t)));var a=r.getChannelData(o);i.set(a.subarray(0,t),0),i.set(a.subarray(e),t)}return Lt(n)}function Vr(r,t=2){let e=Array.from({length:t},()=>new Float32Array(r));return Lt(e)}function Lt(r){let t=new AudioBuffer({length:r[0].length,numberOfChannels:r.length,sampleRate:vt});for(var e=0;e<t.numberOfChannels;e++)t.copyToChannel(r[e],e,0);return t}function Kr(r,t,e){for(var n=[],i,o=0;o<r.numberOfChannels;o++){n.push(i=new Float32Array(r.length+e.length));var a=r.getChannelData(o);i.set(a.subarray(0,t),0),i.set(e.getChannelData(o),t),i.set(a.subarray(t),t+e.length)}return Lt(n)}window.BlobBuilder||=window.WebKitBlobBuilder||window.MozBlobBuilder;var jt;document.addEventListener("mousedown",()=>jt=!0);document.addEventListener("mouseup",()=>jt=!1);var Wt=document.querySelector(".waveplay"),k=Wt.querySelector(".w-wavearea"),C=Wt.querySelector(".w-playback"),m=lr(Wt,{loading:!0,recording:!1,playing:!1,selecting:!1,startFrame:0,volume:1,error:null,buffer:null,segments:[""],wavURL:"",handleCaret(r){console.log("caret",r),m.startFrame=X(C.currentTime=Ot(M().start))},handleKey(r){r.key==="Enter"&&r.preventDefault()},handleInput(r){let t=M().start,e=k.textContent,n=m.segments.join("");n.length===e.length&&n===e||(clearTimeout(k._id),k._id=setTimeout(()=>{if(e.length<n.length){let i=t*B,o=(t+n.length-e.length)*B;m.buffer=$r(m.buffer,i,o)}else{let i=e.match(/\s+/);if(i){let o=i.index,a=i[0].length;m.buffer=Kr(m.buffer,o*B,Vr(a*B))}}m.updateAudio()},700))},timeChange(r){document.activeElement!==k&&(M(m.startFrame=X(C.currentTime)),k.focus())},async updateAudio(){let{buffer:r}=m,t=await Wr(r),e=new Blob([t],{type:"audio/wav"});m.wavURL=URL.createObjectURL(e);let n=M();n&&(C.currentTime=Ot(n.start)),C.onload=()=>{URL.revokeObjectURL(m.wavURL)};let i=await Yt(r);m.segments.join("")!==i&&(console.log("rerender"),m.segments=[i],n&&M(n.start))},play(r){m.playing=!0;let t=M();t||(t=M(0));let e=t.start,n=t.collapsed?X(C.duration):t.end,i,o=()=>{let a=X(C.currentTime)-m.startFrame,u=m.startFrame+a;jt||M(u),n&&u>=n?C.pause():i=requestAnimationFrame(o)};return o(),k.focus(),()=>{m.playing=!1,cancelAnimationFrame(i),i=null,t.start!==t.end&&M(e,n),C.currentTime>=C.duration&&M(Lr(C.duration).length),k.focus()}}}),M=(r,t=r)=>{let e=window.getSelection();if(r!=null){let i,o;e.removeAllRanges();let a=new Range;for(i=k.firstChild;r>i.firstChild.data.length;)r-=i.firstChild.data.length,i=i.nextSibling;for(a.setStart(i.firstChild,r),o=k.firstChild;t>o.firstChild.data.length;)t-=o.firstChild.data.length,o=o.nextSibling;return a.setEnd(o.firstChild,t),e.addRange(a),{start:r,startNode:i,end:t,endNode:o,collapsed:e.isCollapsed}}if(!e.anchorNode||e.anchorNode.parentNode.parentNode!==k)return;r=e.anchorOffset,t=e.focusOffset;let n=e.anchorNode;for(;n=n.previousSibling;)r+=n.textContent.length;for(n=e.focusNode;n=n.previousSibling;)t+=n.textContent.length;return{start:r,startNode:e.anchorNode,end:t,endNode:e.focusNode,collapsed:e.isCollapsed}},Zr=["https://upload.wikimedia.org/wikipedia/commons/c/cf/Caja_de_m%C3%BAsica_%28PianoConcerto5_Beethoven%29.ogg"],Ft=new URL(location);async function Le(r){m.loading=!0,r||(r=Zr[Math.floor(Math.random()*Zr.length)],Ft.searchParams.set("src",r),history.pushState(null,"",Ft));try{let t;t=await Fr(r),m.buffer=await jr(t),m.updateAudio(),m.segments=[await Yt(m.buffer)]}catch(t){console.error(t),m.error=t.message}m.loading=!1}Le(Ft.searchParams.get("src"));
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
//# sourceMappingURL=waveplay.js.map
