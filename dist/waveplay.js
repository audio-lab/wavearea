import"./chunk-ABZDHW4W.js";function nt(){throw new Error("Cycle detected")}function gt(){if(K>1)K--;else{for(var e,t=!1;J!==void 0;){var r=J;for(J=void 0,yt++;r!==void 0;){var n=r.o;if(r.o=void 0,r.f&=-3,!(8&r.f)&&Kt(r))try{r.c()}catch(i){t||(e=i,t=!0)}r=n}}if(yt=0,K--,t)throw e}}var v=void 0,J=void 0,K=0,yt=0,et=0;function Vt(e){if(v!==void 0){var t=e.n;if(t===void 0||t.t!==v)return v.s=t={i:0,S:e,p:void 0,n:v.s,t:v,e:void 0,x:void 0,r:t},e.n=t,32&v.f&&e.S(t),t;if(t.i===-1)return t.i=0,t.p!==void 0&&(t.p.n=t.n,t.n!==void 0&&(t.n.p=t.p),t.p=void 0,t.n=v.s,v.s.p=t,v.s=t),t}}function b(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}b.prototype.h=function(){return!0};b.prototype.S=function(e){this.t!==e&&e.e===void 0&&(e.x=this.t,this.t!==void 0&&(this.t.e=e),this.t=e)};b.prototype.U=function(e){var t=e.e,r=e.x;t!==void 0&&(t.x=r,e.e=void 0),r!==void 0&&(r.e=t,e.x=void 0),e===this.t&&(this.t=r)};b.prototype.subscribe=function(e){var t=this;return St(function(){var r=t.value,n=32&this.f;this.f&=-33;try{e(r)}finally{this.f|=n}})};b.prototype.valueOf=function(){return this.value};b.prototype.toString=function(){return this.value+""};b.prototype.peek=function(){return this.v};Object.defineProperty(b.prototype,"value",{get:function(){var e=Vt(this);return e!==void 0&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){yt>100&&nt(),this.v=e,this.i++,et++,K++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{gt()}}}});function Et(e){return new b(e)}function Kt(e){for(var t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function Zt(e){for(var t=e.s;t!==void 0;t=t.n){var r=t.S.n;r!==void 0&&(t.r=r),t.S.n=t,t.i=-1}}function zt(e){for(var t=e.s,r=void 0;t!==void 0;){var n=t.n;t.i===-1?(t.S.U(t),t.n=void 0):(r!==void 0&&(r.p=t),t.p=void 0,t.n=r,r=t),t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=n}e.s=r}function N(e){b.call(this,void 0),this.x=e,this.s=void 0,this.g=et-1,this.f=4}(N.prototype=new b).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===et))return!0;if(this.g=et,this.f|=1,this.i>0&&!Kt(this))return this.f&=-2,!0;var e=v;try{Zt(this),v=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(r){this.v=r,this.f|=16,this.i++}return v=e,zt(this),this.f&=-2,!0};N.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}b.prototype.S.call(this,e)};N.prototype.U=function(e){if(b.prototype.U.call(this,e),this.t===void 0){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}};N.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;e!==void 0;e=e.x)e.t.N()}};N.prototype.peek=function(){if(this.h()||nt(),16&this.f)throw this.v;return this.v};Object.defineProperty(N.prototype,"value",{get:function(){1&this.f&&nt();var e=Vt(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}});function qt(e){return new N(e)}function Ht(e){var t=e.u;if(e.u=void 0,typeof t=="function"){K++;var r=v;v=void 0;try{t()}catch(n){throw e.f&=-2,e.f|=8,At(e),n}finally{v=r,gt()}}}function At(e){for(var t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,Ht(e)}function Zr(e){if(v!==this)throw new Error("Out-of-order effect");zt(this),v=e,this.f&=-2,8&this.f&&At(this),gt()}function Q(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}Q.prototype.c=function(){var e=this.S();try{!(8&this.f)&&this.x!==void 0&&(this.u=this.x())}finally{e()}};Q.prototype.S=function(){1&this.f&&nt(),this.f|=1,this.f&=-9,Ht(this),Zt(this),K++;var e=v;return v=this,Zr.bind(this,e)};Q.prototype.N=function(){2&this.f||(this.f|=2,this.o=J,J=this)};Q.prototype.d=function(){this.f|=8,1&this.f||At(this)};function St(e){var t=new Q(e);return t.c(),t.d.bind(t)}Symbol.observable||=Symbol("observable");var Xt=e=>e&&!!(e[Symbol.observable]||e[Symbol.asyncIterator]||e.call&&e.set||e.subscribe||e.then),zr=new FinalizationRegistry(e=>e.call?.()),qr=e=>e&&(()=>e.unsubscribe?.()),Gt=(e,t,r,n,i,o)=>e&&(o=qr((e[Symbol.observable]?.()||e).subscribe?.(t,r,n))||e.set&&e.call?.(i,t)||(e.then?.(a=>(!i&&t(a),n?.()),r)||(async a=>{try{for await(a of e){if(i)return;t(a)}n?.()}catch(u){r?.(u)}})())&&(a=>i=1),zr.register(e,o),o);var Jt=e=>e&&e.peek,Rt=e=>e&&e[Qt],Qt=Symbol("signal-struct");U.isStruct=Rt;function U(e,t){if(Rt(e)&&!t)return e;let r,n;if(_t(e)){r=Object.create(t||Object.getPrototypeOf(e)),n={};let i=Object.getOwnPropertyDescriptors(e);if(Rt(e))for(let o in i)Object.defineProperty(r,o,i[o]);else for(let o in i)n[o]=Hr(r,o,i[o].get?qt(i[o].get.bind(r)):i[o].value);return Object.defineProperty(r,Qt,{configurable:!1,enumerable:!1,value:!0}),r}return Array.isArray(e)?e.map(i=>U(i)):e}function Hr(e,t,r){let n,i=Jt(r)?r:_t(r)||Array.isArray(r)?Et(U(r)):Et((n=Xt(r))?void 0:r);return n&&Gt(r,o=>i.value=o),Object.defineProperty(e,t,{get(){return i.value},set:!Jt(r)&&_t(r)?o=>o?Object.assign(i.value,o):i.value=U(o):o=>i.value=U(o),enumerable:!0,configurable:!1}),i}function _t(e){return e&&e.constructor===Object}var Z=(e,t,r,n=null)=>{let i=0,o,a,u,s=r.length,l=t.length,{remove:h,same:f,insert:w,replace:p}=Z;for(;i<s&&i<l&&f(t[i],r[i]);)i++;for(;i<s&&i<l&&f(r[s-1],t[l-1]);)n=r[--l,--s];if(i==l)for(;i<s;)w(n,r[i++],e);else{for(o=t[i];i<s;)u=r[i++],a=o?o.nextSibling:n,f(o,u)?o=a:i<s&&f(r[i],a)?(p(o,u,e),o=a):w(o,u,e);for(;!f(o,n);)a=o.nextSibling,h(o,e),o=a}return r};Z.same=(e,t)=>e==t;Z.replace=(e,t,r)=>r.replaceChild(t,e);Z.insert=(e,t,r)=>r.insertBefore(t,e);Z.remove=(e,t)=>t.removeChild(e);var tr=Z;var z={},Xr={},Gr={},rr=e=>e===null?Xr:e===void 0?Gr:typeof e=="number"||e instanceof Number?z[e]||(z[e]=new Number(e)):typeof e=="string"||e instanceof String?z[e]||(z[e]=new String(e)):typeof e=="boolean"||e instanceof Boolean?z[e]||(z[e]=new Boolean(e)):e;var E={},er=(e,t,r,n)=>{let i=n.startsWith("on")&&n.slice(2),o=S(e,t,":"+n),a;if(o)return i?u=>{a&&ar(e,i,a),a=o(u),a&&or(e,i,a)}:u=>ot(e,n,o(u))},ot=(e,t,r)=>{r==null||r===!1?e.removeAttribute(t):e.setAttribute(t,r===!0?"":typeof r=="number"||typeof r=="string"?r:"")};E[""]=(e,t)=>{let r=S(e,t,":");if(r)return n=>{let i=r(n);for(let o in i)ot(e,ur(o),i[o])}};var nr=Symbol(":each"),xt=Symbol(":ref");E.ref=(e,t,r)=>{if(e.hasAttribute(":each")){e[xt]=t;return}r[t]=e};E.with=(e,t,r)=>{let n=S(e,t,"with");W(e,U(n(r),r))};E.if=(e,t)=>{let r=document.createTextNode(""),n=[S(e,t,":if")],i=[e],o=e;for(;(o=e.nextElementSibling)&&o.hasAttribute(":else");)o.removeAttribute(":else"),(t=o.getAttribute(":if"))?(o.removeAttribute(":if"),o.remove(),i.push(o),n.push(S(e,t,":else :if"))):(o.remove(),i.push(o),n.push(()=>1));return e.replaceWith(o=r),a=>{let u=n.findIndex(s=>s(a));i[u]!=o&&((o[nr]||o).replaceWith(o=i[u]||r),W(o,a))}};E.each=(e,t)=>{let r=Jr(t);if(!r)return it(new Error,e,t);let n=e[nr]=document.createTextNode("");e.replaceWith(n);let i=S(e,r.items,":each"),o=new WeakMap,a=new WeakMap,u=[];return s=>{let l=i(s);l?typeof l=="number"?l=Array.from({length:l},(w,p)=>[p,p+1]):Array.isArray(l)?l=l.map((w,p)=>[p+1,w]):typeof l=="object"?l=Object.entries(l):it(Error("Bad list value"),e,t,":each",l):l=[];let h=[],f=[];for(let[w,p]of l){let m=rr(p),y=a.get(m);if(y||(y=e.cloneNode(!0),a.set(m,y)),h.push(y),!o.has(m)){let _=Object.create(s);_[r.item]=p,r.index&&(_[r.index]=w),e[xt]&&(_[e[xt]]=y),o.set(m,_)}f.push(o.get(m))}tr(n.parentNode,u,h,n),u=h;for(let w=0;w<h.length;w++)W(h[w],f[w])}};function Jr(e){let t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,r=/^\s*\(|\)\s*$/g,n=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,i=e.match(n);if(!i)return;let o={};o.items=i[2].trim();let a=i[1].replace(r,"").trim(),u=a.match(t);return u?(o.item=a.replace(t,"").trim(),o.index=u[1].trim()):o.item=a,o}E.id=(e,t)=>{let r=S(e,t,":id"),n=i=>e.id=i||i===0?i:"";return i=>n(r(i))};E.class=(e,t)=>{let r=S(e,t,":class"),n=e.className;return i=>{let o=r(i);e.className=n+typeof o=="string"?o:(Array.isArray(o)?o:Object.entries(o).map(([a,u])=>u?a:"")).filter(Boolean).join(" ")}};E.style=(e,t)=>{let r=S(e,t,":style"),n=e.getAttribute("style")||"";return n.endsWith(";")||(n+="; "),i=>{let o=r(i);if(typeof o=="string")e.setAttribute("style",n+o);else for(let a in o)e.style[a]=o[a]}};E.text=(e,t)=>{let r=S(e,t,":text");return n=>{let i=r(n);e.textContent=i??""}};E.value=(e,t)=>{let r=S(e,t,":value"),n,i,o=e.type==="text"||e.type===""?a=>e.setAttribute("value",e.value=a??""):e.tagName==="TEXTAREA"||e.type==="text"||e.type===""?a=>(n=e.selectionStart,i=e.selectionEnd,e.setAttribute("value",e.value=a??""),n&&e.setSelectionRange(n,i)):e.type==="checkbox"?a=>(e.value=a?"on":"",ot(e,"checked",a)):e.type==="select-one"?a=>{for(let u in e.options)u.removeAttribute("selected");e.value=a,e.selectedOptions[0]?.setAttribute("selected","")}:a=>e.value=a;return a=>o(r(a))};var ir=Symbol("stop");E.on=(e,t)=>{let r=S(e,t,":on"),n={};return i=>{for(let o in n)ar(e,o,n[o]);n=r(i);for(let o in n)or(e,o,n[o])}};var or=(e,t,r)=>{if(t.indexOf("..")<0)e.addEventListener(t,r);else{let n=t.split("..").map(o=>o.startsWith("on")?o.slice(2):o),i=(o,a=0)=>{let u=s=>{e.removeEventListener(n[a],u),typeof(o=o.call(e,s))!="function"&&(o=()=>{}),++a<n.length?i(o,a):r[ir]||i(r)};e.addEventListener(n[a],u)};i(r)}},ar=(e,t,r)=>{t.indexOf("..")>=0&&(r[ir]=!0),e.removeEventListener(t,r)};E.data=(e,t)=>{let r=S(e,t,":data");return n=>{let i=r(n);for(let o in i)e.dataset[o]=i[o]}};E.aria=(e,t)=>{let r=S(e,t,":aria"),n=i=>{for(let o in i)ot(e,"aria-"+ur(o),i[o]==null?null:i[o]+"")};return i=>n(r(i))};var bt={};function S(e,t,r){if(bt[t])return bt[t];let n=/^[\n\s]*if.*\(.*\)/.test(t)||/^(let|const)\s/.test(t)?`(() => { ${t} })()`:t,i;try{i=new Function("__scope",`with (__scope) { return ${n} };`).bind(e)}catch(o){return it(o,e,t,r)}return bt[t]=o=>{let a;try{a=i(o)}catch(u){return it(u,e,t,r)}return a}}function it(e,t,r,n){Object.assign(e,{element:t,expression:r}),console.warn(`\u2234 ${e.message}

${n}=${r?`"${r}"

`:""}`,t),setTimeout(()=>{throw e},0)}function ur(e){return e.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,t=>"-"+t.toLowerCase())}var at=new WeakMap;function W(e,t){if(!e.children)return;if(at.has(e))return at.get(e);let r=U(t||{}),n=[],i=(o,a=o.parentNode)=>{if(o.attributes)for(let u=0;u<o.attributes.length;){let s=o.attributes[u];if(s.name[0]!==":"){u++;continue}o.removeAttribute(s.name);let l=s.value;if(!l)continue;let h=s.name.slice(1).split(":");for(let f of h){let w=E[f]||er;if(n.push(w(o,l,r,f)||(()=>{})),at.has(o)||o.parentNode!==a)return!1}}for(let u=0,s;s=o.children[u];u++)i(s,o)===!1&&u--};i(e);for(let o of n)St(()=>o(r));return Object.seal(r),at.set(e,r),r}var sr=W;var lr=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},T=[],I=[],Qr=typeof Uint8Array<"u"?Uint8Array:Array,Ut=!1;function pr(){Ut=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)T[t]=e[t],I[e.charCodeAt(t)]=t;I["-".charCodeAt(0)]=62,I["_".charCodeAt(0)]=63}function te(e){Ut||pr();var t,r,n,i,o,a,u=e.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=e[u-2]==="="?2:e[u-1]==="="?1:0,a=new Qr(u*3/4-o),n=o>0?u-4:u;var s=0;for(t=0,r=0;t<n;t+=4,r+=3)i=I[e.charCodeAt(t)]<<18|I[e.charCodeAt(t+1)]<<12|I[e.charCodeAt(t+2)]<<6|I[e.charCodeAt(t+3)],a[s++]=i>>16&255,a[s++]=i>>8&255,a[s++]=i&255;return o===2?(i=I[e.charCodeAt(t)]<<2|I[e.charCodeAt(t+1)]>>4,a[s++]=i&255):o===1&&(i=I[e.charCodeAt(t)]<<10|I[e.charCodeAt(t+1)]<<4|I[e.charCodeAt(t+2)]>>2,a[s++]=i>>8&255,a[s++]=i&255),a}function re(e){return T[e>>18&63]+T[e>>12&63]+T[e>>6&63]+T[e&63]}function ee(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(re(n));return i.join("")}function cr(e){Ut||pr();for(var t,r=e.length,n=r%3,i="",o=[],a=16383,u=0,s=r-n;u<s;u+=a)o.push(ee(e,u,u+a>s?s:u+a));return n===1?(t=e[r-1],i+=T[t>>2],i+=T[t<<4&63],i+="=="):n===2&&(t=(e[r-2]<<8)+e[r-1],i+=T[t>>10],i+=T[t>>4&63],i+=T[t<<2&63],i+="="),o.push(i),o.join("")}function st(e,t,r,n,i){var o,a,u=i*8-n-1,s=(1<<u)-1,l=s>>1,h=-7,f=r?i-1:0,w=r?-1:1,p=e[t+f];for(f+=w,o=p&(1<<-h)-1,p>>=-h,h+=u;h>0;o=o*256+e[t+f],f+=w,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=n;h>0;a=a*256+e[t+f],f+=w,h-=8);if(o===0)o=1-l;else{if(o===s)return a?NaN:(p?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-l}return(p?-1:1)*a*Math.pow(2,o-n)}function wr(e,t,r,n,i,o){var a,u,s,l=o*8-i-1,h=(1<<l)-1,f=h>>1,w=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,m=n?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),a+f>=1?t+=w/s:t+=w*Math.pow(2,1-f),t*s>=2&&(a++,s/=2),a+f>=h?(u=0,a=h):a+f>=1?(u=(t*s-1)*Math.pow(2,i),a=a+f):(u=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+p]=u&255,p+=m,u/=256,i-=8);for(a=a<<i|u,l+=i;l>0;e[r+p]=a&255,p+=m,a/=256,l-=8);e[r+p-m]|=y*128}var ne={}.toString,mr=Array.isArray||function(e){return ne.call(e)=="[object Array]"};var ie=50;c.TYPED_ARRAY_SUPPORT=lr.TYPED_ARRAY_SUPPORT!==void 0?lr.TYPED_ARRAY_SUPPORT:!0;function It(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function k(e,t){if(It()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=c.prototype):(e===null&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(e,t,r);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return Tt(this,e)}return dr(this,e,t,r)}c.poolSize=8192;c._augment=function(e){return e.__proto__=c.prototype,e};function dr(e,t,r,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?ue(e,t,r,n):typeof t=="string"?ae(e,t,r):se(e,t)}c.from=function(e,t,r){return dr(null,e,t,r)};c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array);function vr(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function oe(e,t,r,n){return vr(t),t<=0?k(e,t):r!==void 0?typeof n=="string"?k(e,t).fill(r,n):k(e,t).fill(r):k(e,t)}c.alloc=function(e,t,r){return oe(null,e,t,r)};function Tt(e,t){if(vr(t),e=k(e,t<0?0:Pt(t)|0),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}c.allocUnsafe=function(e){return Tt(null,e)};c.allocUnsafeSlow=function(e){return Tt(null,e)};function ae(e,t,r){if((typeof r!="string"||r==="")&&(r="utf8"),!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=yr(t,r)|0;e=k(e,n);var i=e.write(t,r);return i!==n&&(e=e.slice(0,i)),e}function Bt(e,t){var r=t.length<0?0:Pt(t.length)|0;e=k(e,r);for(var n=0;n<r;n+=1)e[n]=t[n]&255;return e}function ue(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return r===void 0&&n===void 0?t=new Uint8Array(t):n===void 0?t=new Uint8Array(t,r):t=new Uint8Array(t,r,n),c.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=c.prototype):e=Bt(e,t),e}function se(e,t){if(P(t)){var r=Pt(t.length)|0;return e=k(e,r),e.length===0||t.copy(e,0,0,r),e}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||Ie(t.length)?k(e,0):Bt(e,t);if(t.type==="Buffer"&&mr(t.data))return Bt(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Pt(e){if(e>=It())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+It().toString(16)+" bytes");return e|0}c.isBuffer=Be;function P(e){return!!(e!=null&&e._isBuffer)}c.compare=function(t,r){if(!P(t)||!P(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var n=t.length,i=r.length,o=0,a=Math.min(n,i);o<a;++o)if(t[o]!==r[o]){n=t[o],i=r[o];break}return n<i?-1:i<n?1:0};c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};c.concat=function(t,r){if(!mr(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return c.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;var i=c.allocUnsafe(r),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!P(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i};function yr(e,t){if(P(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var r=e.length;if(r===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return ut(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return br(e).length;default:if(n)return ut(e).length;t=(""+t).toLowerCase(),n=!0}}c.byteLength=yr;function le(e,t,r){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return ge(this,t,r);case"utf8":case"utf-8":return Ar(this,t,r);case"ascii":return ve(this,t,r);case"latin1":case"binary":return ye(this,t,r);case"base64":return me(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ee(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}c.prototype._isBuffer=!0;function j(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}c.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)j(this,r,r+1);return this};c.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)j(this,r,r+3),j(this,r+1,r+2);return this};c.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)j(this,r,r+7),j(this,r+1,r+6),j(this,r+2,r+5),j(this,r+3,r+4);return this};c.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?Ar(this,0,t):le.apply(this,arguments)};c.prototype.equals=function(t){if(!P(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:c.compare(this,t)===0};c.prototype.inspect=function(){var t="",r=ie;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"};c.prototype.compare=function(t,r,n,i,o){if(!P(t))throw new TypeError("Argument must be a Buffer");if(r===void 0&&(r=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var a=o-i,u=n-r,s=Math.min(a,u),l=this.slice(i,o),h=t.slice(r,n),f=0;f<s;++f)if(l[f]!==h[f]){a=l[f],u=h[f];break}return a<u?-1:u<a?1:0};function gr(e,t,r,n,i){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof t=="string"&&(t=c.from(t,n)),P(t))return t.length===0?-1:fr(e,t,r,n,i);if(typeof t=="number")return t=t&255,c.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):fr(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function fr(e,t,r,n,i){var o=1,a=e.length,u=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;o=2,a/=2,u/=2,r/=2}function s(p,m){return o===1?p[m]:p.readUInt16BE(m*o)}var l;if(i){var h=-1;for(l=r;l<a;l++)if(s(e,l)===s(t,h===-1?0:l-h)){if(h===-1&&(h=l),l-h+1===u)return h*o}else h!==-1&&(l-=l-h),h=-1}else for(r+u>a&&(r=a-u),l=r;l>=0;l--){for(var f=!0,w=0;w<u;w++)if(s(e,l+w)!==s(t,w)){f=!1;break}if(f)return l}return-1}c.prototype.includes=function(t,r,n){return this.indexOf(t,r,n)!==-1};c.prototype.indexOf=function(t,r,n){return gr(this,t,r,n,!0)};c.prototype.lastIndexOf=function(t,r,n){return gr(this,t,r,n,!1)};function ce(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var u=parseInt(t.substr(a*2,2),16);if(isNaN(u))return a;e[r+a]=u}return a}function fe(e,t,r,n){return ft(ut(t,e.length-r),e,r,n)}function Er(e,t,r,n){return ft(be(t),e,r,n)}function he(e,t,r,n){return Er(e,t,r,n)}function pe(e,t,r,n){return ft(br(t),e,r,n)}function we(e,t,r,n){return ft(xe(t,e.length-r),e,r,n)}c.prototype.write=function(t,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-r;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return ce(this,t,r,n);case"utf8":case"utf-8":return fe(this,t,r,n);case"ascii":return Er(this,t,r,n);case"latin1":case"binary":return he(this,t,r,n);case"base64":return pe(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,t,r,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function me(e,t,r){return t===0&&r===e.length?cr(e):cr(e.slice(t,r))}function Ar(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],a=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=r){var s,l,h,f;switch(u){case 1:o<128&&(a=o);break;case 2:s=e[i+1],(s&192)===128&&(f=(o&31)<<6|s&63,f>127&&(a=f));break;case 3:s=e[i+1],l=e[i+2],(s&192)===128&&(l&192)===128&&(f=(o&15)<<12|(s&63)<<6|l&63,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:s=e[i+1],l=e[i+2],h=e[i+3],(s&192)===128&&(l&192)===128&&(h&192)===128&&(f=(o&15)<<18|(s&63)<<12|(l&63)<<6|h&63,f>65535&&f<1114112&&(a=f))}}a===null?(a=65533,u=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=u}return de(n)}var hr=4096;function de(e){var t=e.length;if(t<=hr)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=hr));return r}function ve(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]&127);return n}function ye(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function ge(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=_e(e[o]);return i}function Ee(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}c.prototype.slice=function(t,r){var n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);var i;if(c.TYPED_ARRAY_SUPPORT)i=this.subarray(t,r),i.__proto__=c.prototype;else{var o=r-t;i=new c(o,void 0);for(var a=0;a<o;++a)i[a]=this[a+t]}return i};function g(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUIntLE=function(t,r,n){t=t|0,r=r|0,n||g(t,r,this.length);for(var i=this[t],o=1,a=0;++a<r&&(o*=256);)i+=this[t+a]*o;return i};c.prototype.readUIntBE=function(t,r,n){t=t|0,r=r|0,n||g(t,r,this.length);for(var i=this[t+--r],o=1;r>0&&(o*=256);)i+=this[t+--r]*o;return i};c.prototype.readUInt8=function(t,r){return r||g(t,1,this.length),this[t]};c.prototype.readUInt16LE=function(t,r){return r||g(t,2,this.length),this[t]|this[t+1]<<8};c.prototype.readUInt16BE=function(t,r){return r||g(t,2,this.length),this[t]<<8|this[t+1]};c.prototype.readUInt32LE=function(t,r){return r||g(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};c.prototype.readUInt32BE=function(t,r){return r||g(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};c.prototype.readIntLE=function(t,r,n){t=t|0,r=r|0,n||g(t,r,this.length);for(var i=this[t],o=1,a=0;++a<r&&(o*=256);)i+=this[t+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};c.prototype.readIntBE=function(t,r,n){t=t|0,r=r|0,n||g(t,r,this.length);for(var i=r,o=1,a=this[t+--i];i>0&&(o*=256);)a+=this[t+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*r)),a};c.prototype.readInt8=function(t,r){return r||g(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};c.prototype.readInt16LE=function(t,r){r||g(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};c.prototype.readInt16BE=function(t,r){r||g(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};c.prototype.readInt32LE=function(t,r){return r||g(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};c.prototype.readInt32BE=function(t,r){return r||g(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};c.prototype.readFloatLE=function(t,r){return r||g(t,4,this.length),st(this,t,!0,23,4)};c.prototype.readFloatBE=function(t,r){return r||g(t,4,this.length),st(this,t,!1,23,4)};c.prototype.readDoubleLE=function(t,r){return r||g(t,8,this.length),st(this,t,!0,52,8)};c.prototype.readDoubleBE=function(t,r){return r||g(t,8,this.length),st(this,t,!1,52,8)};function R(e,t,r,n,i,o){if(!P(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}c.prototype.writeUIntLE=function(t,r,n,i){if(t=+t,r=r|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;R(this,t,r,n,o,0)}var a=1,u=0;for(this[r]=t&255;++u<n&&(a*=256);)this[r+u]=t/a&255;return r+n};c.prototype.writeUIntBE=function(t,r,n,i){if(t=+t,r=r|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;R(this,t,r,n,o,0)}var a=n-1,u=1;for(this[r+a]=t&255;--a>=0&&(u*=256);)this[r+a]=t/u&255;return r+n};c.prototype.writeUInt8=function(t,r,n){return t=+t,r=r|0,n||R(this,t,r,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=t&255,r+1};function lt(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}c.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=r|0,n||R(this,t,r,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8):lt(this,t,r,!0),r+2};c.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=r|0,n||R(this,t,r,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t&255):lt(this,t,r,!1),r+2};function ct(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>(n?i:3-i)*8&255}c.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=r|0,n||R(this,t,r,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255):ct(this,t,r,!0),r+4};c.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=r|0,n||R(this,t,r,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255):ct(this,t,r,!1),r+4};c.prototype.writeIntLE=function(t,r,n,i){if(t=+t,r=r|0,!i){var o=Math.pow(2,8*n-1);R(this,t,r,n,o-1,-o)}var a=0,u=1,s=0;for(this[r]=t&255;++a<n&&(u*=256);)t<0&&s===0&&this[r+a-1]!==0&&(s=1),this[r+a]=(t/u>>0)-s&255;return r+n};c.prototype.writeIntBE=function(t,r,n,i){if(t=+t,r=r|0,!i){var o=Math.pow(2,8*n-1);R(this,t,r,n,o-1,-o)}var a=n-1,u=1,s=0;for(this[r+a]=t&255;--a>=0&&(u*=256);)t<0&&s===0&&this[r+a+1]!==0&&(s=1),this[r+a]=(t/u>>0)-s&255;return r+n};c.prototype.writeInt8=function(t,r,n){return t=+t,r=r|0,n||R(this,t,r,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=t&255,r+1};c.prototype.writeInt16LE=function(t,r,n){return t=+t,r=r|0,n||R(this,t,r,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8):lt(this,t,r,!0),r+2};c.prototype.writeInt16BE=function(t,r,n){return t=+t,r=r|0,n||R(this,t,r,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t&255):lt(this,t,r,!1),r+2};c.prototype.writeInt32LE=function(t,r,n){return t=+t,r=r|0,n||R(this,t,r,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):ct(this,t,r,!0),r+4};c.prototype.writeInt32BE=function(t,r,n){return t=+t,r=r|0,n||R(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255):ct(this,t,r,!1),r+4};function Sr(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Rr(e,t,r,n,i){return i||Sr(e,t,r,4),wr(e,t,r,n,23,4),r+4}c.prototype.writeFloatLE=function(t,r,n){return Rr(this,t,r,!0,n)};c.prototype.writeFloatBE=function(t,r,n){return Rr(this,t,r,!1,n)};function _r(e,t,r,n,i){return i||Sr(e,t,r,8),wr(e,t,r,n,52,8),r+8}c.prototype.writeDoubleLE=function(t,r,n){return _r(this,t,r,!0,n)};c.prototype.writeDoubleBE=function(t,r,n){return _r(this,t,r,!1,n)};c.prototype.copy=function(t,r,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-n&&(i=t.length-r+n);var o=i-n,a;if(this===t&&n<r&&r<i)for(a=o-1;a>=0;--a)t[a+r]=this[a+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)t[a+r]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),r);return o};c.prototype.fill=function(t,r,n,i){if(typeof t=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),t.length===1){var o=t.charCodeAt(0);o<256&&(t=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof t=="number"&&(t=t&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var a;if(typeof t=="number")for(a=r;a<n;++a)this[a]=t;else{var u=P(t)?t:ut(new c(t,i).toString()),s=u.length;for(a=0;a<n-r;++a)this[a+r]=u[a%s]}return this};var Ae=/[^+\/0-9A-Za-z-_]/g;function Se(e){if(e=Re(e).replace(Ae,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function Re(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function _e(e){return e<16?"0"+e.toString(16):e.toString(16)}function ut(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function be(e){for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function xe(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function br(e){return te(Se(e))}function ft(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Ie(e){return e!==e}function Be(e){return e!=null&&(!!e._isBuffer||xr(e)||Ue(e))}function xr(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Ue(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&xr(e.slice(0,0))}var Te={pcm8:(e,t,r,n,i)=>{let o=new Uint8Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=o[a++]-128;r[s][u]=l<0?l/128:l/127}},pcm16:(e,t,r,n,i)=>{let o=new Int16Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=o[a++];r[s][u]=l<0?l/32768:l/32767}},pcm24:(e,t,r,n,i)=>{let o=new Uint8Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=o[a++],h=o[a++],f=o[a++],w=l+(h<<8)+(f<<16),p=w>8388608?w-16777216:w;r[s][u]=p<0?p/8388608:p/8388607}},pcm32:(e,t,r,n,i)=>{let o=new Int32Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=o[a++];r[s][u]=l<0?l/2147483648:l/2147483647}},pcm32f:(e,t,r,n,i)=>{let o=new Float32Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s)r[s][u]=o[a++]},pcm64f:(e,t,r,n,i)=>{let o=new Float64Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s)r[s][u]=o[a++]}},Pe={pcm8:(e,t,r,n,i)=>{let o=new Uint8Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(r[s][u],1));l=(l*.5+.5)*255|0,o[a++]=l}},pcm16:(e,t,r,n,i)=>{let o=new Int16Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(r[s][u],1));l=(l<0?l*32768:l*32767)|0,o[a++]=l}},pcm24:(e,t,r,n,i)=>{let o=new Uint8Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(r[s][u],1));l=(l<0?16777216+l*8388608:l*8388607)|0,o[a++]=l>>0&255,o[a++]=l>>8&255,o[a++]=l>>16&255}},pcm32:(e,t,r,n,i)=>{let o=new Int32Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(r[s][u],1));l=(l<0?l*2147483648:l*2147483647)|0,o[a++]=l}},pcm32f:(e,t,r,n,i)=>{let o=new Float32Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(r[s][u],1));o[a++]=l}},pcm64f:(e,t,r,n,i)=>{let o=new Float64Array(e,t),a=0;for(let u=0;u<i;++u)for(let s=0;s<n;++s){let l=Math.max(-1,Math.min(r[s][u],1));o[a++]=l}}};function Ir(e,t,r){let n="pcm"+t+(r?"f":"");console.log("encoder",n);let i=e[n];if(!i)throw new TypeError("Unsupported data format: "+n);return i}function Ce(e){let t=0,r=0;e.buffer?(t=e.byteOffset,r=e.length,e=e.buffer):(t=0,r=e.byteLength);let n=new DataView(e);function i(){let l=n.getUint8(t);return t++,l}function o(){let l=n.getUint16(t,!0);return t+=2,l}function a(){let l=n.getUint32(t,!0);return t+=4,l}function u(l){let h="";for(let f=0;f<l;++f)h+=String.fromCharCode(i());return h}if(u(4)!=="RIFF")throw new TypeError("Invalid WAV file");if(a(),u(4)!=="WAVE")throw new TypeError("Invalid WAV file");let s;for(;t<r;){let l=u(4),h=a(),f=t+h;switch(l){case"fmt ":let w=o();if(w!==1&&w!==3)throw new TypeError("Unsupported format in WAV file: "+w.toString(16));s={format:"lpcm",floatingPoint:w===3,channels:o(),sampleRate:a(),byteRate:a(),blockSize:o(),bitDepth:o()};break;case"data":if(!s)throw new TypeError('Missing "fmt " chunk.');let p=Math.floor(h/s.blockSize),m=s.channels,y=s.sampleRate,_=[];for(let O=0;O<m;++O)_[O]=new Float32Array(p);return Ir(Te,s.bitDepth,s.floatingPoint)(e,t,_,m,p),{sampleRate:y,channelData:_}}t=f}}function Me(e,t){console.time("encode start");let r=t.sampleRate||16e3,n=!!(t.float||t.floatingPoint),i=n?32:t.bitDepth|0||16,o=e.length,a=e[0].length,u=new ArrayBuffer(44+a*o*(i>>3)),s=new DataView(u),l=0;function h(m){s.setUint8(l++,m)}function f(m){s.setUint16(l,m,!0),l+=2}function w(m){s.setUint32(l,m,!0),l+=4}function p(m){for(var y=0;y<m.length;++y)h(m.charCodeAt(y))}return p("RIFF"),w(u.byteLength-8),p("WAVE"),p("fmt "),w(16),f(n?3:1),f(o),w(r),w(r*o*(i>>3)),f(o*(i>>3)),f(i),p("data"),w(u.byteLength-44),console.timeEnd("encode start"),console.time("encode body"),Ir(Pe,i,n)(u,l,e,o,a),console.timeEnd("encode body"),u}var Ct={decode:Ce,encode:Me},sn=Ct.decode,Br=Ct,ln=Ct.encode;var Cr=function(){function e(){}return e.prototype.then=function(t,r){let n=new e,i=this.s;if(i){let o=1&i?t:r;if(o){try{x(n,1,o(this.v))}catch(a){x(n,2,a)}return n}return this}return this.o=function(o){try{let a=o.v;1&o.s?x(n,1,t?t(a):a):r?x(n,1,r(a)):x(n,2,a)}catch(a){x(n,2,a)}},n},e}();function x(e,t,r){if(!e.s){if(r instanceof Cr){if(!r.s)return void(r.o=x.bind(null,e,t));1&t&&(t=r.s),r=r.v}if(r&&r.then)return void r.then(x.bind(null,e,t),x.bind(null,e,2));e.s=t,e.v=r;let n=e.o;n&&n(e)}}var ke=0,H=typeof WeakMap=="function"?WeakMap:function(){var e=typeof Symbol=="function"?Symbol(0):"__weak$"+ ++ke;this.set=function(t,r){t[e]=r},this.get=function(t){return t[e]}};function Yt(e,t){return new Promise(function(r,n){e.onsuccess=function(){var i=e.result;t&&(i=t(i)),r(i)},e.onerror=function(){n(e.error)}})}function Mr(e,t){return Yt(e.openCursor(t),function(r){return r?[r.key,r.value]:[]})}function Ur(e){return new Promise(function(t,r){e.oncomplete=function(){t()},e.onabort=function(){r(e.error)},e.onerror=function(){r(e.error)}})}function Mt(e){if(!function(t){return!!(typeof t=="number"||typeof t=="string"||typeof t=="object"&&t&&(Array.isArray(t)||"setUTCFullYear"in t||typeof ArrayBuffer=="function"&&ArrayBuffer.isView(t)||"byteLength"in t&&"length"in t))}(e))throw Error("kv-storage: The given value is not allowed as a key")}var kr={};function Tr(e,t){return Mr(e,Dr(t))}function Dr(e){return e===kr?IDBKeyRange.lowerBound(-1/0):IDBKeyRange.lowerBound(e,!0)}var Yr=new H,pt=new H,wt=new H,Or=new H,ht=function(){};function Pr(e,t){return t(function(r,n){try{let l=function(){return pt.set(e,o),wt.set(e,void 0),{value:u,done:o===void 0}};var i=pt.get(e);if(i===void 0)return Promise.resolve({value:void 0,done:!0});var o,a,u,s=function(h,f){var w,p=-1;t:{for(var m=0;m<f.length;m++){var y=f[m][0];if(y){var _=y();if(_&&_.then)break t;if(_===h){p=m;break}}else p=m}if(p!==-1){do{for(var O=f[p][1];!O;)O=f[++p][1];var tt=O();if(tt&&tt.then){w=!0;break t}var jt=f[p][2];p++}while(jt&&!jt());return tt}}let X=new Cr,rt=x.bind(null,X,2);return(w?tt.then(vt):_.then(function V(F){for(;;){if(F===h){p=m;break}if(++m===f.length){if(p!==-1)break;return void x(X,1,G)}if(y=f[m][0]){if((F=y())&&F.then)return void F.then(V).then(void 0,rt)}else p=m}do{for(var L=f[p][1];!L;)L=f[++p][1];var G=L();if(G&&G.then)return void G.then(vt).then(void 0,rt);var $t=f[p][2];p++}while($t&&!$t());x(X,1,G)})).then(void 0,rt),X;function vt(V){for(;;){var F=f[p][2];if(!F||F())break;for(var L=f[++p][1];!L;)L=f[++p][1];if((V=L())&&V.then)return void V.then(vt).then(void 0,rt)}x(X,1,V)}}(Or.get(e),[[function(){return"keys"},function(){return Promise.resolve(function(h,f){return Mr(h,Dr(f)).then(function(w){return w[0]})}(n,i)).then(function(h){u=o=h})}],[function(){return"values"},function(){return Promise.resolve(Tr(n,i)).then(function(h){var f;o=(f=h)[0],u=a=f[1]})}],[function(){return"entries"},function(){return Promise.resolve(Tr(n,i)).then(function(h){var f;a=(f=h)[1],u=(o=f[0])===void 0?void 0:[o,a]})}]]);return Promise.resolve(s&&s.then?s.then(l):l())}catch(l){return Promise.reject(l)}})}function kt(e,t){var r=new ht;return Or.set(r,e),Yr.set(r,t),pt.set(r,kr),wt.set(r,void 0),r}ht.prototype.return=function(){pt.set(this,void 0)},ht.prototype.next=function(){var e=this,t=Yr.get(this);if(!t)return Promise.reject(new TypeError("Invalid this value"));var r,n=wt.get(this);return r=n!==void 0?n.then(function(){return Pr(e,t)}):Pr(this,t),wt.set(this,r),r},typeof Symbol=="function"&&Symbol.asyncIterator&&(ht.prototype[Symbol.asyncIterator]=function(){return this});var q=function(e,t,r){try{return D.get(e)===null&&function(n){var i=Ot.get(n);D.set(n,new Promise(function(o,a){var u=self.indexedDB.open(i,1);u.onsuccess=function(){var s=u.result;(function(l,h,f){if(l.objectStoreNames.length!==1||l.objectStoreNames[0]!==$)return f(Dt(h)),!1;var w=l.transaction($,"readonly").objectStore($);return!(w.autoIncrement||w.keyPath||w.indexNames.length)||(f(Dt(h)),!1)})(s,i,a)&&(s.onclose=function(){D.set(n,null)},s.onversionchange=function(){s.close(),D.set(n,null)},o(s))},u.onerror=function(){return a(u.error)},u.onupgradeneeded=function(){try{u.result.createObjectStore($)}catch(s){a(s)}}}))}(e),Promise.resolve(D.get(e)).then(function(n){var i=n.transaction($,t),o=i.objectStore($);return r(i,o)})}catch(n){return Promise.reject(n)}},Ot=new H,D=new H,$="store",C=function(e){var t="kv-storage:"+e;D.set(this,null),Ot.set(this,t),this.backingStore={database:t,store:$,version:1}};function Dt(e){return new Error('kv-storage: database "'+e+'" corrupted')}C.prototype.set=function(e,t){try{return Mt(e),q(this,"readwrite",function(r,n){return t===void 0?n.delete(e):n.put(t,e),Ur(r)})}catch(r){return Promise.reject(r)}},C.prototype.get=function(e){try{return Mt(e),q(this,"readonly",function(t,r){return Yt(r.get(e))})}catch(t){return Promise.reject(t)}},C.prototype.delete=function(e){try{return Mt(e),q(this,"readwrite",function(t,r){return r.delete(e),Ur(t)})}catch(t){return Promise.reject(t)}},C.prototype.clear=function(){try{let i=function(){function o(){return Yt(self.indexedDB.deleteDatabase(Ot.get(e)))}var a=function(){if(t){try{t.close()}catch{}return Promise.resolve(new Promise(setTimeout)).then(function(){})}}();return a&&a.then?a.then(o):o()};var e=this,t,r=D.get(e),n=function(){if(r!==null){let a=function(){D.set(e,null)};var o=function(u,s){try{var l=Promise.resolve(r).then(function(h){t=h})}catch{return}return l&&l.then?l.then(void 0,function(){}):l}();return o&&o.then?o.then(a):a()}}();return n&&n.then?n.then(i):i()}catch(i){return Promise.reject(i)}},C.prototype.keys=function(){var e=this;return kt("keys",function(t){return q(e,"readonly",t)})},C.prototype.values=function(){var e=this;return kt("values",function(t){return q(e,"readonly",t)})},C.prototype.entries=function(){var e=this;return kt("entries",function(t){return q(e,"readonly",t)})},typeof Symbol=="function"&&Symbol.asyncIterator&&(C.prototype[Symbol.asyncIterator]=C.prototype.entries);var De=new C("default");var mt=44100,M=1024,Ye=await(async()=>{let e=new Audio,t=OfflineAudioContext;return e.canPlayType("audio/ogg")||(t=(await import("./oggmented-bundle-ZFEURIUF.js")).default.OggmentedAudioContext),new t({sampleRate:mt,length:60*60*44100})})(),dt=e=>Math.floor(e*mt/M),Ft=e=>e*M/mt;async function Fr(e){console.time("fetch");let t=await fetch(e);if(!t.ok)throw new Error(`HTTP error: status=${t.status}`);let r=await t.arrayBuffer();return console.timeEnd("fetch"),r}async function Lr(e,t){console.time("decode");let r;try{r=await Ye.decodeAudioData(e)}catch(n){console.log(n)}return console.timeEnd("decode"),r}async function Nr(e){console.time("wav encode");let t=e.getChannelData(0),r=Br.encode([t],{sampleRate:e.sampleRate,float:!1,bitDepth:16});return console.timeEnd("wav encode"),r}async function Wr(e){if(!e)return"";console.time("to waveform string");let t=e.getChannelData(0),r="",n=2;for(let i=0,o=M;i<t.length;){let a=0,u=0;for(;i<o;i++)a+=i>t.length?0:t[i]**2;let s=Math.sqrt(a/M),l=Math.min(100,Math.ceil(s*100*n));r+=String.fromCharCode(256+l),o+=M}return console.timeEnd("to waveform string"),r}function jr(e,t,r){t=t??0,r=Math.min(r??e.length,e.length);for(var n=[],i,o=0;o<e.numberOfChannels;o++){n.push(i=new Float32Array(e.length-Math.abs(r-t)));var a=e.getChannelData(o);i.set(a.subarray(0,t),0),i.set(a.subarray(r),t)}return Lt(n)}function $r(e,t=2){let r=Array.from({length:t},()=>new Float32Array(e));return Lt(r)}function Lt(e){let t=new AudioBuffer({length:e[0].length,numberOfChannels:e.length,sampleRate:mt});for(var r=0;r<t.numberOfChannels;r++)t.copyToChannel(e[r],r,0);return t}function Vr(e,t,r){for(var n=[],i,o=0;o<e.numberOfChannels;o++){n.push(i=new Float32Array(e.length+r.length));var a=e.getChannelData(o);console.log("start",t),i.set(a.subarray(0,t),0),i.set(r.getChannelData(o),t),i.set(a.subarray(t),t+r.length)}return Lt(n)}window.BlobBuilder||=window.WebKitBlobBuilder||window.MozBlobBuilder;var Nt;document.addEventListener("mousedown",()=>Nt=!0);document.addEventListener("mouseup",()=>Nt=!1);var Wt=document.querySelector(".waveplay"),B=Wt.querySelector(".w-wavearea"),Y=Wt.querySelector(".w-playback"),d=sr(Wt,{loading:!0,recording:!1,playing:!1,selecting:!1,startFrame:0,endFrame:null,volume:1,error:null,buffer:null,waveform:"",wavURL:"",handleCaret(e){d.startFrame=dt(Y.currentTime=Ft(A().start)),d.endFrame=A().start===A().end?B.textContent.length:A().end},handleKey(e){e.key==="Enter"&&(e.preventDefault(),console.log(e,A()))},handleInput(e){let{waveform:t}=d,r=A().start,n=B.textContent;t.length===n.length&&t===n||(clearTimeout(B._id),B._id=setTimeout(()=>{let i=n;if(i.length<t.length){let o=r*M,a=(r+t.length-i.length)*M;console.log("remove"),d.buffer=jr(d.buffer,o,a)}else for(let o=0;o<i.length;o++)if(i[o]===" "){let u=o;for(;o<i.length&&i[o]===" ";o++);d.buffer=Vr(d.buffer,u*M,$r((o-u)*M))}d.render()},700))},timeChange(e){document.activeElement!==B&&(A(d.startFrame=dt(Y.currentTime)),B.focus())},async render(){let{buffer:e}=d,t=await Nr(e),r=new Blob([t],{type:"audio/wav"});d.wavURL=URL.createObjectURL(r);let n=A();n&&(Y.currentTime=Ft(A().start)),Y.onload=()=>{URL.revokeObjectURL(d.wavURL)};let i=await Wr(e);i!==d.waveform&&(d.waveform=i),n&&A(n.start)},play(e){d.playing=!0;let t=A();t||(t=A(0)),d.startFrame=t.start,d.endFrame=t.start!==t.end?t.end:B.textContent.length;let r,n=()=>{let i=dt(Y.currentTime)-d.startFrame,o=d.startFrame+i;Nt||A(o),d.endFrame&&o>=d.endFrame?Y.pause():r=requestAnimationFrame(n)};return n(),B.focus(),()=>{d.playing=!1,cancelAnimationFrame(r),r=null,t.start!==t.end&&A(startFrame,endFrame),Y.currentTime>=Y.duration&&A(d.waveform.length),B.focus()}}}),A=(e,t=e)=>{let r=window.getSelection();if(e!=null){let n=new Range;n.setStart(B.firstChild,e),n.setEnd(B.firstChild,t),r.removeAllRanges(),r.addRange(n)}if(r.anchorNode===B.firstChild)return{start:r.anchorOffset,end:r.focusOffset}},Kr=["https://upload.wikimedia.org/wikipedia/commons/9/9c/Vivaldi_-_Magnificat_01_Magnificat.oga","https://upload.wikimedia.org/wikipedia/commons/c/cf/Caja_de_m%C3%BAsica_%28PianoConcerto5_Beethoven%29.ogg","https://upload.wikimedia.org/wikipedia/commons/9/96/Carcassi_Op_60_No_1.ogg"],Fe=e=>{let t=new URL(location.href);t.searchParams.set("src",e),history.pushState(null,"",t)};async function Le(e=Kr[Math.floor(Math.random()*Kr.length)]){d.loading=!0;try{let t;console.log("loading default audio"),Fe(e),t=await Fr(e),d.buffer=await Lr(t),d.render()}catch(t){console.error(t),d.error=t.message}d.loading=!1}Le();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
//# sourceMappingURL=waveplay.js.map
