(()=>{(function(){var f,p=[];function h(e){var n=this,t={},a=-1;this.parameters.forEach(function(c,i){var s=p[++a]||(p[a]=new Float32Array(n.bufferSize));s.fill(c.value),t[i]=s}),this.processor.realm.exec("self.sampleRate=sampleRate="+this.context.sampleRate+";self.currentTime=currentTime="+this.context.currentTime);var r=u(e.inputBuffer),o=u(e.outputBuffer);this.instance.process([r],[o],t)}function u(e){for(var n=[],t=0;t<e.numberOfChannels;t++)n[t]=e.getChannelData(t);return n}function m(e){return e.$$processors||(e.$$processors={})}typeof AudioWorkletNode!="function"&&(self.AudioWorkletNode=function(e,n,t){var a=m(e)[n],r=e.createScriptProcessor(void 0,2,t&&t.outputChannelCount?t.outputChannelCount[0]:2);if(r.parameters=new Map,a.properties)for(var o=0;o<a.properties.length;o++){var c=a.properties[o],i=e.createGain().gain;i.value=c.defaultValue,r.parameters.set(c.name,i)}var s=new MessageChannel;f=s.port2;var d=new a.Processor(t||{});return f=null,r.port=s.port1,r.processor=a,r.instance=d,r.onaudioprocess=h,r},Object.defineProperty((self.AudioContext||self.webkitAudioContext).prototype,"audioWorklet",{get:function(){return this.$$audioWorklet||(this.$$audioWorklet=new self.AudioWorklet(this))}}),self.AudioWorklet=function(){function e(n){this.$$context=n}return e.prototype.addModule=function(n,t){var a=this;return fetch(n).then(function(r){if(!r.ok)throw Error(r.status);return r.text()}).then(function(r){var o={sampleRate:0,currentTime:0,AudioWorkletProcessor:function(){this.port=f},registerProcessor:function(i,s){m(a.$$context)[i]={realm:c,context:o,Processor:s,properties:s.parameterDescriptors||[]}}};o.self=o;var c=new function(i,s){var d=document.createElement("iframe");d.style.cssText="position:absolute;left:0;top:-999px;width:1px;height:1px;",s.appendChild(d);var v=d.contentWindow,x=v.document,l="var window,$hook";for(var w in v)w in i||w==="eval"||(l+=",",l+=w);for(var g in i)l+=",",l+=g,l+="=self.",l+=g;var C=x.createElement("script");C.appendChild(x.createTextNode(`function $hook(self,console) {"use strict";
        `+l+";return function() {return eval(arguments[0])}}")),x.body.appendChild(C),this.exec=v.$hook(i,console)}(o,document.documentElement);return c.exec((t&&t.transpile||String)(r)),null})},e}())})();var $=document.getElementById("wavearea");navigator.mediaDevices.getUserMedia({audio:!0}).then(k);function k(f){let p=new AudioContext,h=p.createMediaStreamSource(f),u=p.createAnalyser();u.fftSize=2048;let m=u.frequencyBinCount,e=new Float32Array(m);h.connect(u);let n=!1;requestAnimationFrame(function t(){u.getFloatTimeDomainData(e);let a=0;for(let o=0;o<e.length;o++)a+=e[o]*e[o];let r=Math.sqrt(a/e.length);$.append(String.fromCharCode(256+Math.floor(r*100))),n||requestAnimationFrame(t)}),setTimeout(()=>{n=!0,h.disconnect()},4e4)}})();
//# sourceMappingURL=bundle.js.map
